import{j as e,p as Ut,r as l,m as u,q as Wt,s as mt,u as ut,v as Ee,w as je,x as $t,t as b,P as xt,h as L,y as Se,z as ge,F as ee,G as pt,f as Gt,X as $,H as Ht,I as ht,J as $e,K as ft,N as Vt,O as qt,Q as Jt,V as Ge,W as He,Y as pe,Z as de,b as Yt,_ as Zt,$ as Ae,D as Qt,a0 as Xt,U as Kt,c as es,a1 as ts,a2 as gt,a3 as ss,a4 as is,a5 as _e,a6 as vt,a7 as as,a8 as rs,a9 as te,aa as Be,ab as me,ac as Ve,ad as bt,ae as ns,af as ls,d as os,ag as cs,ah as ds,ai as ms,S as us,aj as xs,ak as ps,al as hs,am as fs,o as gs,g as vs}from"./vendor-react-mA_BqLSv.js";import{t as bs,c as ys,a as js,i as yt,f as jt,F as ws,b as qe}from"./vendor-misc-DRKw7Fqf.js";import{P as wt,r as Ns,s as Ds,A as Ie,t as Te,u as Re,v as Cs,w as ks,V as Es,x as As,j as ue,y as Nt,z as ve,C as X,d as K,B as Y,a as se,b as ie,n as Fs,o as Ss,p as we,q as Ne,E as _s,F as he,S as Bs,I as fe,G as Is,H as Ts,J as re,K as ne,N as le,O as Je}from"./shared-components-D2XvDNhB.js";import{u as Rs,m as Dt,b as Ct,t as zs,c as Ms,d as Ps,g as be,e as Ye,f as Ze,h as Ls,i as Os,j as Us,k as ce}from"./shared-lib-CnbwMGYH.js";import{c as V,p as Ws}from"./admin-features-Cuv_P1eQ.js";async function $s(t,s,r){try{const a=V(),{data:{session:i}}=await a.auth.getSession();if(!i?.access_token)throw new Error("No active session");const o=await fetch(`https://${Ws}.supabase.co/functions/v1/ai-analysis/analyze`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i.access_token}`},body:JSON.stringify({text:t,userName:s,userId:r})});if(!o.ok){const d=await o.text();throw new Error(`AI analysis failed: ${o.statusText}`)}const m=await o.json();if(!m.success)throw new Error(m.error||"AI analysis failed");return m.analysis}catch{return{sentiment:"positive",category:"Другое",tags:[],reply:"Записано! 💪 Продолжай отмечать свои достижения!",summary:t.substring(0,50)+(t.length>50?"...":""),insight:"Каждая запись приближает тебя к цели!",isAchievement:!0,mood:"хорошее",confidence:.5}}}async function Gs(t){const s=V(),{data:r,error:a}=await s.from("entries").insert({user_id:t.userId,text:t.text,sentiment:t.sentiment||"neutral",category:t.category||"Другое",tags:t.tags||[],ai_reply:t.aiReply||"",ai_summary:t.aiSummary||null,ai_insight:t.aiInsight||null,is_achievement:t.isAchievement||!1,mood:t.mood||null,created_at:new Date().toISOString()}).select().single();if(a)throw new Error(a.message||"Failed to create entry");return{id:r.id,userId:r.user_id,text:r.text,voiceUrl:null,mediaUrl:null,sentiment:r.sentiment,category:r.category,tags:r.tags||[],aiReply:r.ai_reply||"",aiSummary:r.ai_summary,aiInsight:r.ai_insight,isAchievement:r.is_achievement,mood:r.mood,createdAt:r.created_at,streakDay:1,focusArea:""}}async function kt(t){const s=V(),{data:r,error:a}=await s.from("profiles").insert({id:t.id,name:t.name||"Пользователь",email:t.email,language:t.language||"ru",diary_name:t.diaryName||"Мой дневник",diary_emoji:t.diaryEmoji||"📝",notification_settings:t.notificationSettings||{selectedTime:"none",morningTime:"08:00",eveningTime:"21:00",permissionGranted:!1},onboarding_completed:t.onboardingCompleted||!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(a)throw new Error(a.message||"Failed to create profile");return{id:r.id,name:r.name,email:r.email,language:r.language,diaryName:r.diary_name,diaryEmoji:r.diary_emoji,notificationSettings:r.notification_settings,onboardingCompleted:r.onboarding_completed,createdAt:r.created_at}}async function ze(t){try{const s=V(),{data:r,error:a}=await s.from("profiles").select("*").eq("id",t).single();return a||!r?null:{id:r.id,name:r.name,email:r.email,language:r.language,diaryName:r.diary_name,diaryEmoji:r.diary_emoji,notificationSettings:r.notification_settings,onboardingCompleted:r.onboarding_completed,createdAt:r.created_at}}catch{return null}}async function Hs(t,s,r){try{const a=V(),{data:i,error:o}=await a.auth.signUp({email:t,password:s,options:{data:{name:r.name}}});if(o)return{success:!1,error:o.message};if(!i.user)return{success:!1,error:"Failed to create user"};const m=await kt({id:i.user.id,email:i.user.email,name:r.name,diaryName:r.diaryName||"Мой дневник",diaryEmoji:r.diaryEmoji||"🏆",language:r.language||"ru",notificationSettings:r.notificationSettings||{selectedTime:"none",morningTime:"08:00",eveningTime:"21:00",permissionGranted:!1},onboardingCompleted:!0});if(r.firstEntry&&r.firstEntry.trim())try{let d;try{d=await $s(r.firstEntry.trim(),r.name||"Пользователь",i.user.id)}catch{d={sentiment:"positive",category:"Другое",tags:[],reply:"Отличное начало! Продолжай вести дневник! 🎉",summary:"Первая запись в дневнике",insight:"Ведение дневника помогает лучше понимать себя и свои достижения.",isAchievement:!0,mood:"хорошее",confidence:.8}}await Gs({userId:i.user.id,text:r.firstEntry.trim(),sentiment:d.sentiment||"positive",category:d.category||"Другое",tags:d.tags||[],aiReply:d.reply||"",aiSummary:d.summary||null,aiInsight:d.insight||null,isAchievement:d.isAchievement||!0,mood:d.mood||"хорошее"})}catch{}return{success:!0,user:i.user,profile:m}}catch(a){return{success:!1,error:a.message}}}async function Vs(t,s){try{const r=V(),{data:a,error:i}=await r.auth.signInWithPassword({email:t,password:s});if(i)return{success:!1,error:i.message};if(!a.user)return{success:!1,error:"Failed to sign in"};const o=await ze(a.user.id),m=o?!o.onboardingCompleted:!0;return{success:!0,user:a.user,profile:o||void 0,needsOnboarding:m}}catch(r){return{success:!1,error:r.message}}}async function qs(){try{const t=V(),{data:s,error:r}=await t.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});return r?{success:!1,error:r.message}:{success:!0}}catch(t){return{success:!1,error:t.message}}}async function Js(){try{const t=V(),{data:s,error:r}=await t.auth.signInWithOAuth({provider:"facebook",options:{redirectTo:window.location.origin}});return r?{success:!1,error:r.message}:{success:!0}}catch(t){return{success:!1,error:t.message}}}async function ka(){await V().auth.signOut()}async function Ea(){try{const t=V(),{data:{session:s},error:r}=await t.auth.getSession();if(r||!s?.user)return{success:!1};let a=await ze(s.user.id);if(!a)try{a=await kt({id:s.user.id,email:s.user.email,name:s.user.user_metadata?.name||s.user.email?.split("@")[0]||"Пользователь",diaryName:"Мой дневник",diaryEmoji:"🏆",language:"ru",notificationSettings:{selectedTime:"none",morningTime:"08:00",eveningTime:"21:00",permissionGranted:!1},onboardingCompleted:!1})}catch{a={id:s.user.id,email:s.user.email,name:s.user.user_metadata?.name||"Пользователь",diaryName:"Мой дневник",diaryEmoji:"🏆",language:"ru",notificationSettings:{selectedTime:"none",morningTime:"08:00",eveningTime:"21:00",permissionGranted:!1},onboardingCompleted:!1}}return{success:!0,user:s.user,profile:a}}catch(t){return{success:!1,error:t.message}}}function Ys(...t){return bs(ys(t))}const Zs=js("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Qe({className:t,variant:s,size:r,asChild:a=!1,...i}){const o=a?Ut:"button";return e.jsx(o,{"data-slot":"button",className:Ys(Zs({variant:s,size:r,className:t})),...i})}const Qs="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20151%20151%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2022%22%20filter%3D%22url(%23filter0_f_12_507)%22%3E%0A%3Ccircle%20cx%3D%2275.5%22%20cy%3D%2275.5%22%20r%3D%2248.5%22%20fill%3D%22var(--fill-0%2C%20%23725FFF)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_507%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22151%22%20height%3D%22151%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2213.5%22%20result%3D%22effect1_foregroundBlur_12_507%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",Xs="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20464%20464%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2013%22%20filter%3D%22url(%23filter0_f_12_513)%22%3E%0A%3Ccircle%20cx%3D%22232%22%20cy%3D%22232%22%20r%3D%22170%22%20fill%3D%22var(--fill-0%2C%20%236652FF)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_513%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22464%22%20height%3D%22464%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2231%22%20result%3D%22effect1_foregroundBlur_12_513%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",Ks="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20464%20464%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2014%22%20filter%3D%22url(%23filter0_f_12_493)%22%3E%0A%3Ccircle%20cx%3D%22232%22%20cy%3D%22232%22%20r%3D%22170%22%20fill%3D%22var(--fill-0%2C%20%236C5CFF)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_493%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22464%22%20height%3D%22464%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2231%22%20result%3D%22effect1_foregroundBlur_12_493%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",ae="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20100%20100%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2015%22%20filter%3D%22url(%23filter0_f_12_509)%22%3E%0A%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2223%22%20fill%3D%22var(--fill-0%2C%20%23725FFF)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_509%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22100%22%20height%3D%22100%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2213.5%22%20result%3D%22effect1_foregroundBlur_12_509%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",ei="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20100%20100%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2020%22%20filter%3D%22url(%23filter0_f_12_505)%22%3E%0A%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2223%22%20fill%3D%22var(--fill-0%2C%20%235A47FD)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_505%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22100%22%20height%3D%22100%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2213.5%22%20result%3D%22effect1_foregroundBlur_12_505%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",ti="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20100%20100%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2021%22%20filter%3D%22url(%23filter0_f_12_521)%22%3E%0A%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2223%22%20fill%3D%22var(--fill-0%2C%20%235440F6)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_521%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22100%22%20height%3D%22100%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2213.5%22%20result%3D%22effect1_foregroundBlur_12_521%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",si="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20340%20340%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2012%22%20filter%3D%22url(%23filter0_f_12_501)%22%3E%0A%3Ccircle%20cx%3D%22170%22%20cy%3D%22170%22%20r%3D%22141%22%20fill%3D%22var(--fill-0%2C%20%23AAA2FF)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_501%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22340%22%20height%3D%22340%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2214.5%22%20result%3D%22effect1_foregroundBlur_12_501%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",ii="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20398%20398%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2011%22%20filter%3D%22url(%23filter0_f_12_515)%22%3E%0A%3Ccircle%20cx%3D%22199%22%20cy%3D%22199%22%20r%3D%22170%22%20fill%3D%22var(--fill-0%2C%20%235945FB)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_515%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22398%22%20height%3D%22398%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2214.5%22%20result%3D%22effect1_foregroundBlur_12_515%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",Xe="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%2086%2086%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2023%22%20filter%3D%22url(%23filter0_f_12_511)%22%3E%0A%3Ccircle%20cx%3D%2243%22%20cy%3D%2243%22%20r%3D%2223%22%20fill%3D%22var(--fill-0%2C%20%235A46FC)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_511%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2286%22%20height%3D%2286%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2210%22%20result%3D%22effect1_foregroundBlur_12_511%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",ai="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20182%20182%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2027%22%20filter%3D%22url(%23filter0_f_12_519)%22%3E%0A%3Ccircle%20cx%3D%2291%22%20cy%3D%2291%22%20r%3D%2256%22%20fill%3D%22var(--fill-0%2C%20%235A46FC)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_519%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22182%22%20height%3D%22182%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2217.5%22%20result%3D%22effect1_foregroundBlur_12_519%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",ri="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20352%20352%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2036%22%20filter%3D%22url(%23filter0_f_12_482)%22%3E%0A%3Ccircle%20cx%3D%22176%22%20cy%3D%22176%22%20r%3D%2256%22%20fill%3D%22var(--fill-0%2C%20%235A46FC)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_482%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22352%22%20height%3D%22352%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2260%22%20result%3D%22effect1_foregroundBlur_12_482%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",ni="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20318%20318%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2032%22%20filter%3D%22url(%23filter0_f_12_503)%22%3E%0A%3Ccircle%20cx%3D%22159%22%20cy%3D%22159%22%20r%3D%2239%22%20fill%3D%22var(--fill-0%2C%20%235A46FC)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_503%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22318%22%20height%3D%22318%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2260%22%20result%3D%22effect1_foregroundBlur_12_503%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",li="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20352%20352%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2033%22%20filter%3D%22url(%23filter0_f_12_499)%22%3E%0A%3Ccircle%20cx%3D%22176%22%20cy%3D%22176%22%20r%3D%2239%22%20fill%3D%22var(--fill-0%2C%20%235A46FC)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_499%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22352%22%20height%3D%22352%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2268.5%22%20result%3D%22effect1_foregroundBlur_12_499%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",oi="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20118%20118%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2034%22%20filter%3D%22url(%23filter0_f_12_497)%22%3E%0A%3Ccircle%20cx%3D%2259%22%20cy%3D%2259%22%20r%3D%2239%22%20fill%3D%22var(--fill-0%2C%20%235A46FC)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_497%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22118%22%20height%3D%22118%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2210%22%20result%3D%22effect1_foregroundBlur_12_497%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",ci="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20241%20241%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2029%22%20filter%3D%22url(%23filter0_f_12_495)%22%3E%0A%3Ccircle%20cx%3D%22120.5%22%20cy%3D%22120.5%22%20r%3D%2291.5%22%20fill%3D%22var(--fill-0%2C%20%23A399FF)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_495%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22241%22%20height%3D%22241%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2214.5%22%20result%3D%22effect1_foregroundBlur_12_495%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",di="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20104%20104%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2030%22%20filter%3D%22url(%23filter0_f_12_489)%22%3E%0A%3Ccircle%20cx%3D%2252%22%20cy%3D%2252%22%20r%3D%2223%22%20fill%3D%22var(--fill-0%2C%20%23A399FF)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_489%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22104%22%20height%3D%22104%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2214.5%22%20result%3D%22effect1_foregroundBlur_12_489%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",mi="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%2086%2086%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2024%22%20filter%3D%22url(%23filter0_f_12_491)%22%3E%0A%3Ccircle%20cx%3D%2243%22%20cy%3D%2243%22%20r%3D%2223%22%20fill%3D%22var(--fill-0%2C%20%235A47FD)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_491%22%20x%3D%220%22%20y%3D%220%22%20width%3D%2286%22%20height%3D%2286%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2210%22%20result%3D%22effect1_foregroundBlur_12_491%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",ui="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20104%20104%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2025%22%20filter%3D%22url(%23filter0_f_12_480)%22%3E%0A%3Ccircle%20cx%3D%2252%22%20cy%3D%2252%22%20r%3D%2223%22%20fill%3D%22var(--fill-0%2C%20%235440F6)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_480%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22104%22%20height%3D%22104%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2214.5%22%20result%3D%22effect1_foregroundBlur_12_480%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",xi="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20392%20392%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%2035%22%20filter%3D%22url(%23filter0_f_12_517)%22%3E%0A%3Ccircle%20cx%3D%22196%22%20cy%3D%22196%22%20r%3D%2256%22%20fill%3D%22var(--fill-0%2C%20%23A096FF)%22%2F%3E%0A%3C%2Fg%3E%0A%3Cdefs%3E%0A%3Cfilter%20id%3D%22filter0_f_12_517%22%20x%3D%220%22%20y%3D%220%22%20width%3D%22392%22%20height%3D%22392%22%20filterUnits%3D%22userSpaceOnUse%22%20color-interpolation-filters%3D%22sRGB%22%3E%0A%3CfeFlood%20flood-opacity%3D%220%22%20result%3D%22BackgroundImageFix%22%2F%3E%0A%3CfeBlend%20mode%3D%22normal%22%20in%3D%22SourceGraphic%22%20in2%3D%22BackgroundImageFix%22%20result%3D%22shape%22%2F%3E%0A%3CfeGaussianBlur%20stdDeviation%3D%2270%22%20result%3D%22effect1_foregroundBlur_12_517%22%2F%3E%0A%3C%2Ffilter%3E%0A%3C%2Fdefs%3E%0A%3C%2Fsvg%3E%0A",pi="/src/assets/bd383d77e5f7766d755b15559de65d5ccfa62e27.webp",De=[{id:"1",code:"ru",name:"Russian",native_name:"Русский",flag:"🇷🇺",is_active:!0},{id:"2",code:"en",name:"English",native_name:"English",flag:"🇬🇧",is_active:!0},{id:"3",code:"es",name:"Spanish",native_name:"Español",flag:"🇪🇸",is_active:!0},{id:"4",code:"de",name:"German",native_name:"Deutsch",flag:"🇩🇪",is_active:!0},{id:"5",code:"fr",name:"French",native_name:"Français",flag:"🇫🇷",is_active:!0},{id:"6",code:"zh",name:"Chinese",native_name:"中文",flag:"🇨🇳",is_active:!0},{id:"7",code:"ja",name:"Japanese",native_name:"日本語",flag:"🇯🇵",is_active:!0}],Ke={ru:{title:"Создавай дневник побед",subtitle:"История ваших побед — день за днём",startButton:"Начать",alreadyHaveAccount:"У меня уже есть аккаунт"},en:{title:"Create a victory diary",subtitle:"The history of your victories — day by day",startButton:"Get Started",alreadyHaveAccount:"I already have an account"},es:{title:"Crea un diario de victorias",subtitle:"La historia de tus victorias — día a día",startButton:"Comenzar",alreadyHaveAccount:"Ya tengo una cuenta"},de:{title:"Erstelle ein Siegestagebuch",subtitle:"Die Geschichte deiner Siege — Tag für Tag",startButton:"Beginnen",alreadyHaveAccount:"Ich habe bereits ein Konto"},fr:{title:"Créez un journal de victoires",subtitle:"L'histoire de vos victoires — jour après jour",startButton:"Commencer",alreadyHaveAccount:"J'ai déjà un compte"},zh:{title:"创建胜利日记",subtitle:"您的胜利历史——日复一日",startButton:"开始",alreadyHaveAccount:"我已经有账户了"},ja:{title:"勝利の日記を作成",subtitle:"あなたの勝利の歴史——日々の記録",startButton:"始める",alreadyHaveAccount:"すでにアカウントを持っています"}};function Aa({onNext:t,onSkip:s,currentStep:r,totalSteps:a,onStepClick:i}){const{changeLanguage:o,currentLanguage:m}=Rs(),[d,h]=l.useState(m||"ru"),[x,g]=l.useState(!1),[p,n]=l.useState(De),[c,f]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const C=await fetch("https://ecuwuzqlwdkkdncampnc.supabase.co/functions/v1/make-server-9729c493/languages",{headers:{Authorization:`Bearer ${JSON.parse(localStorage.getItem("sb-ecuwuzqlwdkkdncampnc-auth-token")||"{}").access_token||""}`}});if(C.ok){const j=await C.json();n(j.languages||[])}else n(De)}catch{n(De)}finally{f(!1)}})()},[]);const w=p.find(v=>v.code===d)||p[0],y=Ke[d]||Ke.ru;return l.useEffect(()=>{d!==m&&o(d)},[d,m,o]),e.jsxs(u.div,{className:"bg-background relative w-full h-screen flex flex-col overflow-hidden scrollbar-hide",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"relative flex-shrink-0 overflow-hidden",style:{height:"min(50vh, 400px)"},children:[e.jsx("div",{className:"absolute inset-0",children:e.jsx(wt,{src:pi,alt:"Welcome background",className:"w-full h-full object-cover",priority:!0})}),e.jsxs("div",{className:"absolute inset-0 hidden sm:block pointer-events-none",children:[e.jsx("div",{className:"absolute left-[-150px] size-[282px] top-[-87px]",children:e.jsx("div",{className:"absolute inset-[-10.284%]",children:e.jsx("img",{className:"block max-w-none size-full",src:si,alt:""})})}),e.jsx("div",{className:"absolute left-[94px] size-[340px] top-[-145px]",children:e.jsx("div",{className:"absolute inset-[-8.529%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ii,alt:""})})}),e.jsx("div",{className:"absolute left-[201px] size-[46px] top-[35px]",children:e.jsx("div",{className:"absolute inset-[-43.478%]",children:e.jsx("img",{className:"block max-w-none size-full",src:Xe,alt:""})})}),e.jsx("div",{className:"absolute left-[150px] size-[46px] top-[31px]",children:e.jsx("div",{className:"absolute inset-[-43.478%]",children:e.jsx("img",{className:"block max-w-none size-full",src:Xe,alt:""})})}),e.jsx("div",{className:"absolute left-[98px] size-28 top-[-29px]",children:e.jsx("div",{className:"absolute inset-[-31.25%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ai,alt:""})})}),e.jsx("div",{className:"absolute left-[81px] size-28 top-[-27px]",children:e.jsx("div",{className:"absolute inset-[-107.143%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ri,alt:""})})}),e.jsx("div",{className:"absolute left-[215px] size-[78px] top-[25px]",children:e.jsx("div",{className:"absolute inset-[-153.846%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ni,alt:""})})}),e.jsx("div",{className:"absolute left-[169px] size-[78px] top-[18px]",children:e.jsx("div",{className:"absolute inset-[-175.641%]",children:e.jsx("img",{className:"block max-w-none size-full",src:li,alt:""})})}),e.jsx("div",{className:"absolute left-[290px] size-[78px] top-[19px]",children:e.jsx("div",{className:"absolute inset-[-25.641%]",children:e.jsx("img",{className:"block max-w-none size-full",src:oi,alt:""})})}),e.jsx("div",{className:"absolute left-[-63px] size-[183px] top-[-55px]",children:e.jsx("div",{className:"absolute inset-[-15.847%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ci,alt:""})})}),e.jsx("div",{className:"absolute left-[-23px] size-[46px] top-[31px]",children:e.jsx("div",{className:"absolute inset-[-63.044%]",children:e.jsx("img",{className:"block max-w-none size-full",src:di,alt:""})})}),e.jsx("div",{className:"absolute left-[267px] size-[46px] top-[35px]",children:e.jsx("div",{className:"absolute inset-[-43.478%]",children:e.jsx("img",{className:"block max-w-none size-full",src:mi,alt:""})})}),e.jsx("div",{className:"absolute left-[319px] size-[46px] top-[37px]",children:e.jsx("div",{className:"absolute inset-[-63.044%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ui,alt:""})})}),e.jsx("div",{className:"absolute left-[74px] size-28 top-[-29px]",children:e.jsx("div",{className:"absolute inset-[-125%]",children:e.jsx("img",{className:"block max-w-none size-full",src:xi,alt:""})})})]}),e.jsx(u.div,{className:"relative z-20 flex justify-center pt-safe",style:{paddingTop:"max(env(safe-area-inset-top), 24px)"},initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.6},children:e.jsx("div",{className:"relative mt-4",children:e.jsxs(Qe,{onClick:()=>g(!x),className:"bg-card box-border flex h-14 items-center justify-between min-w-[230px] pl-[22px] pr-[13px] py-0 rounded-[10px] text-muted-foreground border-0 shadow-lg hover:bg-accent/5",style:{fontFamily:"'Inter', var(--font-family-primary)",fontSize:"12px",fontWeight:"400"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:w.flag}),e.jsx("span",{children:w.native_name})]}),e.jsx(u.div,{animate:{rotate:x?180:0},transition:{duration:.3},children:e.jsx(Wt,{size:18,className:"text-[#6b6b6b]"})})]})})})]}),e.jsxs("div",{className:"relative flex-1 bg-gradient-to-b from-[#ffffff] to-[#f8f6ff] rounded-t-[30px] flex flex-col overflow-hidden",style:{marginTop:"-30px",zIndex:10},children:[e.jsxs("div",{className:"absolute left-0 right-0 top-0 h-10 pointer-events-none hidden sm:block",children:[e.jsx("div",{className:"absolute left-2.5 size-[46px] top-0",children:e.jsx("div",{className:"absolute inset-[-58.696%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ae,alt:""})})}),e.jsx("div",{className:"absolute left-[62px] size-[46px] top-[2px]",children:e.jsx("div",{className:"absolute inset-[-58.696%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ae,alt:""})})}),e.jsx("div",{className:"absolute left-[120px] size-[46px] top-[-4px]",children:e.jsx("div",{className:"absolute inset-[-58.696%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ae,alt:""})})}),e.jsx("div",{className:"absolute left-[178px] size-[46px] top-[-8px]",children:e.jsx("div",{className:"absolute inset-[-58.696%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ae,alt:""})})}),e.jsx("div",{className:"absolute left-[227px] size-[46px] top-0",children:e.jsx("div",{className:"absolute inset-[-58.696%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ae,alt:""})})}),e.jsx("div",{className:"absolute left-[293px] size-[46px] top-0",children:e.jsx("div",{className:"absolute inset-[-58.696%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ei,alt:""})})}),e.jsx("div",{className:"absolute left-[332px] size-[46px] top-[-4px]",children:e.jsx("div",{className:"absolute inset-[-58.696%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ae,alt:""})})}),e.jsx("div",{className:"absolute left-[345px] size-[46px] top-[2px]",children:e.jsx("div",{className:"absolute inset-[-58.696%]",children:e.jsx("img",{className:"block max-w-none size-full",src:ti,alt:""})})})]}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none hidden sm:block",children:[e.jsx("div",{className:"absolute left-[99px] size-[97px] top-[20px]",children:e.jsx("div",{className:"absolute inset-[-27.835%]",children:e.jsx("img",{className:"block max-w-none size-full",src:Qs,alt:""})})}),e.jsx("div",{className:"absolute left-[94px] size-[340px] top-0",children:e.jsx("div",{className:"absolute inset-[-18.235%]",children:e.jsx("img",{className:"block max-w-none size-full",src:Xs,alt:""})})}),e.jsx("div",{className:"absolute left-[-144px] size-[340px] top-[10px]",children:e.jsx("div",{className:"absolute inset-[-18.235%]",children:e.jsx("img",{className:"block max-w-none size-full",src:Ks,alt:""})})})]}),e.jsxs("div",{className:"relative z-10 flex-1 flex flex-col items-center justify-center px-6 pb-4",children:[e.jsx(u.div,{className:"text-center mb-4",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.5,duration:.8,type:"spring"},children:e.jsx("h1",{className:"text-[#756ef3] mb-0",style:{fontFamily:"'Poller One', serif",fontSize:"clamp(36px, 10vw, 46px)",lineHeight:"1.1"},children:"UNITY"})}),e.jsxs(u.div,{className:"text-center max-w-[320px]",initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7,duration:.7},children:[e.jsx(u.h2,{className:"text-[#2f394b] mb-2",style:{fontFamily:"'Open Sans', var(--font-family-primary)",fontWeight:"700",fontSize:"clamp(28px, 8vw, 37px)",lineHeight:"1.2",letterSpacing:"-0.8px"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:y.title}),e.jsx(u.p,{className:"text-[#8d8d8d]",style:{fontFamily:"'Open Sans', var(--font-family-primary)",fontWeight:"700",fontSize:"14px",lineHeight:"1.7",opacity:"0.6"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.1},children:y.subtitle})]},d)]}),e.jsx(u.div,{className:"relative z-10 w-full px-6",style:{paddingBottom:"max(env(safe-area-inset-bottom, 24px), 32px)"},initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9,duration:.6},children:e.jsxs("div",{className:"max-w-xs mx-auto",children:[s&&e.jsx(u.button,{onClick:s,className:"w-full mb-5 text-center py-3 text-[#8d8d8d] hover:text-[#756ef3] transition-colors",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.1,duration:.6},style:{fontFamily:"'Inter', var(--font-family-primary)",fontWeight:"500",fontSize:"15px"},children:y.alreadyHaveAccount}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 rounded-[15px] opacity-60",style:{background:"linear-gradient(135.96deg, #8B78FF 0%, #5451D6 101.74%)",filter:"blur(16px)",transform:"translateY(4px)"}}),e.jsx(Qe,{onClick:()=>t(d),className:"relative w-full h-[60px] rounded-[15px] text-white border-0 shadow-none hover:scale-[1.02] transition-transform duration-200",style:{background:"linear-gradient(135.96deg, #8B78FF 0%, #5451D6 101.74%)",fontFamily:"'Inter', var(--font-family-primary)",fontWeight:"600",fontSize:"20px",lineHeight:"24px"},children:e.jsx(u.span,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:y.startButton},d)})]})]})})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-md flex items-center justify-center px-4",style:{zIndex:999999},onClick:()=>g(!1),children:e.jsx(u.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,type:"spring",damping:25},className:"bg-card rounded-[20px] w-[280px] max-h-[65vh] overflow-hidden shadow-2xl",onClick:v=>v.stopPropagation(),children:e.jsx("div",{className:"overflow-y-auto max-h-[65vh]",children:p.map(v=>e.jsxs("button",{onClick:()=>{h(v.code),g(!1)},className:"w-full flex items-center justify-between pl-[22px] pr-[13px] h-14 text-left hover:bg-accent/5 active:bg-accent/10 transition-colors",style:{fontFamily:"'Inter', var(--font-family-primary)",fontSize:"12px",fontWeight:"400"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:v.flag}),e.jsx("span",{className:"text-[#6b6b6b]",children:v.native_name})]}),d===v.code&&e.jsx(mt,{size:16,className:"text-[#8B78FF]",strokeWidth:2})]},v.code))})})})]})}const hi="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20369%20434%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Circle%22%3E%0A%3Ccircle%20id%3D%22Ellipse%20701%22%20cx%3D%2228%22%20cy%3D%22332%22%20r%3D%2228%22%20fill%3D%22var(--fill-0%2C%20%23FED883)%22%2F%3E%0A%3Ccircle%20id%3D%22Ellipse%20195%22%20cx%3D%22296%22%20cy%3D%22182%22%20r%3D%226%22%20fill%3D%22var(--fill-0%2C%20%23C6C3FB)%22%2F%3E%0A%3Ccircle%20id%3D%22Ellipse%20705%22%20cx%3D%22126%22%20cy%3D%22310%22%20r%3D%226%22%20fill%3D%22var(--fill-0%2C%20%23C6C3FB)%22%2F%3E%0A%3Ccircle%20id%3D%22Ellipse%20702%22%20cx%3D%22337%22%20cy%3D%22387%22%20r%3D%226%22%20fill%3D%22var(--fill-0%2C%20%23C6C3FB)%22%2F%3E%0A%3Ccircle%20id%3D%22Ellipse%20196%22%20cx%3D%22317%22%20cy%3D%227.00005%22%20r%3D%224%22%20fill%3D%22var(--fill-0%2C%20%23FED883)%22%2F%3E%0A%3Ccircle%20id%3D%22Ellipse%20703%22%20cx%3D%22294%22%20cy%3D%22364%22%20r%3D%224%22%20fill%3D%22var(--fill-0%2C%20%23FED883)%22%2F%3E%0A%3Ccircle%20id%3D%22Ellipse%20197%22%20cx%3D%22367%22%20cy%3D%2244.0001%22%20r%3D%222%22%20fill%3D%22var(--fill-0%2C%20%23FEB5BD)%22%2F%3E%0A%3Ccircle%20id%3D%22Ellipse%20704%22%20cx%3D%22307%22%20cy%3D%22432%22%20r%3D%222%22%20fill%3D%22var(--fill-0%2C%20%23FEB5BD)%22%2F%3E%0A%3Ccircle%20id%3D%22Ellipse%20198%22%20cx%3D%2243%22%20cy%3D%2233.0001%22%20r%3D%223%22%20fill%3D%22var(--fill-0%2C%20%23FEB5BD)%22%2F%3E%0A%3Ccircle%20id%3D%22Oval%20Copy%205%22%20cx%3D%22116.449%22%20cy%3D%222.44949%22%20r%3D%222%22%20transform%3D%22rotate(-105%20116.449%202.44949)%22%20fill%3D%22var(--fill-0%2C%20%23246BFD)%22%2F%3E%0A%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A",Me="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%2014%2017%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Arrow%20-%20Right%22%3E%0A%3Cpath%20id%3D%22Stroke%201%22%20d%3D%22M7.0246%2016V1%22%20stroke%3D%22var(--stroke-0%2C%20white)%22%20stroke-width%3D%221.5%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%0A%3Cpath%20id%3D%22Stroke%203%22%20d%3D%22M13.049%209.9502L7.025%2016.0002L1%209.9502%22%20stroke%3D%22var(--stroke-0%2C%20white)%22%20stroke-width%3D%221.5%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%2F%3E%0A%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A",Pe="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%20120%20191%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20id%3D%22Rectangle%205904%22%20d%3D%22M1.98974%20123.73C-4.4938%2085.8384%2015.2618%2048.3117%2050.1698%2032.21L120%200V191H13.5L1.98974%20123.73Z%22%20fill%3D%22var(--fill-0%2C%20%23756EF3)%22%2F%3E%0A%3C%2Fsvg%3E%0A",fi="/src/assets/5f4bd000111b1df6537a53aaf570a9424e39fbcf.webp",et={ru:{subtitle:"Твои маленькие шаги — большие победы",title:"Фиксируй достижения и смотри, как растёт твой прогресс"},en:{subtitle:"Your small steps — big victories",title:"Track achievements and watch your progress grow"},es:{subtitle:"Tus pequeños pasos — grandes victorias",title:"Rastrea logros y observa cómo crece tu progreso"},de:{subtitle:"Deine kleinen Schritte — große Siege",title:"Verfolge Erfolge und sieh, wie dein Fortschritt wächst"},fr:{subtitle:"Tes petits pas — de grandes victoires",title:"Suivez les réalisations et regardez votre progrès grandir"},zh:{subtitle:"你的小步骤——大胜利",title:"跟踪成就，观看你的进步增长"},ja:{subtitle:"あなたの小さな一歩—大きな勝利",title:"成果を追跡し、進歩の成長を見る"}};function gi(){return e.jsx(u.div,{className:"relative shrink-0 pointer-events-none","data-name":"Circle",style:{height:"clamp(300px, 48vh, 434px)",width:"min(369px, 90vw)",marginTop:"min(10px, 1vh)"},initial:{opacity:0,rotate:-10,scale:.9},animate:{opacity:1,rotate:0,scale:1,y:[0,-5,0]},transition:{delay:.2,duration:1,y:{duration:3,repeat:1/0,ease:"easeInOut"}},children:e.jsx("img",{className:"block max-w-none size-full",src:hi})})}function vi({currentTranslations:t}){return e.jsxs(u.div,{className:"absolute gap-3 grid grid-cols-[repeat(1,_minmax(0px,_1fr))] grid-rows-[repeat(2,_minmax(0px,_1fr))] leading-[0] translate-x-[-50%] px-4","data-name":"Text",style:{left:"50%",top:"clamp(300px, calc(100vh - 270px), 453px)",width:"min(335px, calc(100vw - 32px))",height:"clamp(100px, 13vh, 133px)"},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4,duration:.7},children:[e.jsx(u.div,{className:"[grid-area:1_/_1] font-['Poppins:Medium',_'Noto_Sans:Regular',_sans-serif] relative shrink-0 text-[#756ef3] text-[14px]",style:{fontVariationSettings:"'CTGR' 0, 'wdth' 100, 'wght' 400"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.1},children:e.jsx("p",{className:"leading-[18px] font-[Days_One] font-bold font-normal text-[12px]",children:t.subtitle})},t.subtitle),e.jsx(u.div,{className:"[grid-area:2_/_1] font-['Poppins:Regular',_'Noto_Sans:Regular',_sans-serif] relative self-start shrink-0 text-[#002055] text-[28px] tracking-[-1px] w-full",style:{fontVariationSettings:"'CTGR' 0, 'wdth' 100, 'wght' 400"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e.jsx("p",{className:"!leading-[33px] !text-[24px] !font-semibold !font-[Days_One]",children:t.title})},t.title)]})}function bi({currentStep:t,totalSteps:s,onStepClick:r}){return e.jsx(u.div,{className:"absolute flex items-center gap-[8px]","data-name":"Sliedbar",style:{bottom:"max(calc(env(safe-area-inset-bottom, 20px) + 85px), 85px)",left:"min(25px, 8vw)"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:Array.from({length:s},(a,i)=>e.jsx(u.button,{onClick:()=>r(i+1),className:`h-[6px] rounded-[4px] cursor-pointer border-0 p-0 transition-all duration-300 hover:scale-110 ${i===0?"w-[25px]":"w-[8px]"}`,style:{background:"linear-gradient(135.96deg, #8B78FF 0%, #5451D6 101.74%)",opacity:i<t?1:.4},initial:{scaleX:0},animate:{scaleX:i<t?1:.3},transition:{delay:.8+i*.1,duration:.8,ease:"easeOut"},whileHover:{scale:1.2},whileTap:{scale:.9}},i))})}function yi(){return e.jsx("div",{className:"relative size-full","data-name":"Arrow - Right",children:e.jsx("div",{className:"absolute inset-[-5%_-6.22%]",children:e.jsx("img",{className:"block max-w-none size-full",src:Me})})})}function ji({onClick:t}){return e.jsx("button",{onClick:t,className:"absolute size-6 bg-transparent border-0 cursor-pointer z-10","data-name":"Arrow - Right",style:{bottom:"max(env(safe-area-inset-bottom, 20px), 20px)",right:"min(46px, 12vw)"},children:e.jsx("div",{className:"absolute flex inset-[23.75%_17.71%_26.04%_19.79%] items-center justify-center pointer-events-none",children:e.jsx("div",{className:"flex-none h-[15px] rotate-[270deg] w-[12.049px]",children:e.jsx(yi,{})})})})}function wi({onNext:t}){return e.jsxs(u.div,{className:"absolute contents",style:{bottom:"max(env(safe-area-inset-bottom, 0px), 0px)",right:"max(-1px, calc(0px - 1vw))"},"data-name":"Next Button",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.6,duration:.6,type:"spring"},whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx("button",{onClick:t,className:"absolute bg-transparent border-0 cursor-pointer",style:{bottom:"max(env(safe-area-inset-bottom, 0px), 0px)",right:"max(-1px, calc(0px - 1vw))",height:"min(191px, 25vh)",width:"min(129px, 30vw)"},children:e.jsx("div",{className:"absolute bottom-0 left-[7.57%] right-0 top-0 pointer-events-none",children:e.jsx("img",{className:"block max-w-none size-full",src:Pe})})}),e.jsx(ji,{onClick:t})]})}function Ni({selectedLanguage:t,onNext:s,currentStep:r,totalSteps:a,onStepClick:i}){const o=et[t]||et.ru;return e.jsxs(u.div,{className:"content-center flex flex-wrap gap-0 h-screen items-center justify-center relative shrink-0 w-full max-w-[444px] mx-auto overflow-hidden scrollbar-hide",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx(gi,{}),e.jsx(u.div,{className:"absolute translate-x-[-50%] rounded-lg overflow-hidden","data-name":"image 1569",style:{left:"50%",top:"clamp(0px, -5vh, 15px)",height:"min(379px, 50vh)",width:"min(314px, 85vw)"},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3,duration:.8},children:e.jsx(wt,{src:fi,alt:"Onboarding illustration",className:"w-full h-full object-cover",priority:!0})}),e.jsx(vi,{currentTranslations:o}),e.jsx(bi,{currentStep:r,totalSteps:a,onStepClick:i}),e.jsx(wi,{onNext:s})]})}function Fa({selectedLanguage:t,onNext:s,currentStep:r,totalSteps:a,onStepClick:i}){return e.jsx("div",{className:"bg-background content-stretch flex gap-2.5 items-center justify-center relative size-full h-screen overflow-hidden scrollbar-hide","data-name":"Onboard 2",children:e.jsx(Ni,{selectedLanguage:t,onNext:s,currentStep:r,totalSteps:a,onStepClick:i})})}const tt={ru:{title:"Дай имя своему дневнику",subtitle:"Персонализируй свой путь к успеху",placeholder:"Название дневника",presets:["Мой путь","Достижения","Я — молодец!"]},en:{title:"Name your diary",subtitle:"Personalize your path to success",placeholder:"Diary name",presets:["My Path","Achievements","I'm Awesome!"]},es:{title:"Dale nombre a tu diario",subtitle:"Personaliza tu camino al éxito",placeholder:"Nombre del diario",presets:["Mi Camino","Logros","¡Soy Genial!"]},de:{title:"Benenne dein Tagebuch",subtitle:"Personalisiere deinen Weg zum Erfolg",placeholder:"Tagebuch Name",presets:["Mein Weg","Erfolge","Ich bin toll!"]},fr:{title:"Nomme ton journal",subtitle:"Personnalise ton chemin vers le succès",placeholder:"Nom du journal",presets:["Mon Chemin","Réussites","Je suis génial!"]},zh:{title:"为你的日记命名",subtitle:"个性化你的成功之路",placeholder:"日记名称",presets:["我的道路","成就","我很棒!"]},ja:{title:"日記に名前をつけよう",subtitle:"成功への道のりをパーソナライズ",placeholder:"日記の名前",presets:["私の道","成果","私は素晴らしい!"]}},Di=["🏆","🚀","💪","🎯","🌟"];function Ci({currentTranslations:t,onNext:s,onUpdate:r}){const[a,i]=l.useState(""),[o,m]=l.useState("🏆"),[d,h]=l.useState(!1),x=n=>{i(n),r?.(n,o)},g=n=>{i(n),r?.(n,o)},p=n=>{m(n),r?.(a,n)};return e.jsxs(u.div,{className:"absolute gap-6 grid grid-cols-[repeat(1,_minmax(0px,_1fr))] h-auto leading-[0] translate-x-[-50%] w-[335px] max-w-[calc(100%-32px)] px-4","data-name":"PersonalizationForm",style:{left:"50%",top:"min(180px, calc(50vh - 150px))"},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4,duration:.7},children:[e.jsx(u.div,{className:"font-['Poppins:Medium',_'Noto_Sans:Regular',_sans-serif] relative shrink-0 text-[#756ef3] text-[14px]",style:{fontVariationSettings:"'CTGR' 0, 'wdth' 100, 'wght' 400"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.1},children:e.jsx("p",{className:"!leading-[18px] !font-[Days_One] !font-bold !text-[12px]",children:t.subtitle})},t.subtitle),e.jsx(u.div,{className:"font-['Poppins:Regular',_'Noto_Sans:Regular',_sans-serif] relative self-start shrink-0 text-[#002055] text-[28px] tracking-[-1px] w-full",style:{fontVariationSettings:"'CTGR' 0, 'wdth' 100, 'wght' 400"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e.jsx("p",{className:"!leading-[33px] !text-[24px] !font-semibold !font-[Days_One]",children:t.title})},t.title),e.jsx(u.div,{className:"flex gap-3 justify-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.6,duration:.5},children:Di.map((n,c)=>e.jsx(u.button,{onClick:()=>p(n),className:`w-12 h-12 rounded-full flex items-center justify-center text-2xl border-2 transition-all duration-300 ${o===n?"border-[#756ef3] bg-[#756ef3]/10 scale-110":"border-border hover:border-[#756ef3]/50"}`,whileHover:{scale:o===n?1.1:1.05},whileTap:{scale:.95},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7+c*.1,duration:.3},children:n},n))}),e.jsxs(u.div,{className:"relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:[e.jsx(u.input,{type:"text",value:a,onChange:n=>g(n.target.value),onFocus:()=>h(!0),onBlur:()=>h(!1),placeholder:t.placeholder,className:"w-full px-4 py-3 rounded-xl border-2 border-border focus:border-[#756ef3] focus:outline-none transition-all duration-300 text-center !text-[16px] !font-semibold bg-background text-foreground",maxLength:30,animate:{scale:d?1.02:1,boxShadow:d?"0 4px 20px rgba(117, 110, 243, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.1)"},transition:{duration:.2}}),e.jsxs(u.div,{className:"absolute -bottom-6 right-2 text-xs text-muted-foreground",initial:{opacity:0},animate:{opacity:a.length>20?1:0},transition:{duration:.2},children:[a.length,"/30"]})]}),e.jsxs(u.div,{className:"flex flex-col gap-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:[e.jsx(u.p,{className:"text-center text-muted-foreground !text-[12px] mb-1",initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.3},children:"Или выберите готовый вариант:"}),t.presets.map((n,c)=>e.jsx(u.button,{onClick:()=>x(n),className:`px-4 py-3 rounded-lg border-2 transition-all duration-300 text-center !text-[14px] !font-semibold ${a===n?"border-primary bg-primary/10 text-primary":"border-border hover:border-primary hover:bg-primary/5"}`,whileHover:{scale:1.02,boxShadow:"0 4px 12px rgba(117, 110, 243, 0.15)"},whileTap:{scale:.98},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1+c*.1,duration:.3},children:e.jsx(u.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.1+c*.1,duration:.2},children:n})},n))]}),e.jsxs(u.div,{className:"flex items-center justify-center gap-2",initial:{opacity:0,scale:.8},animate:{opacity:a.trim()?1:0,scale:a.trim()?1:.8},transition:{duration:.3,type:"spring"},children:[e.jsx(u.div,{className:"w-3 h-3 rounded-full bg-green-500",animate:{scale:a.trim()?[1,1.2,1]:0,opacity:a.trim()?1:0},transition:{duration:.4,ease:"easeOut"}}),e.jsx(u.span,{className:"text-green-600 !text-[12px] !font-semibold",initial:{opacity:0,x:-10},animate:{opacity:a.trim()?1:0,x:a.trim()?0:-10},transition:{duration:.3},children:"Готово! Нажмите стрелку →"})]})]})}function ki({currentStep:t,totalSteps:s,onStepClick:r}){return e.jsx(u.div,{className:"absolute flex items-center gap-[8px]","data-name":"Sliedbar",style:{bottom:"min(40px, 8vh)",left:"min(25px, 8vw)"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:Array.from({length:s},(a,i)=>e.jsx(u.button,{onClick:()=>r(i+1),className:`h-[6px] rounded-[4px] cursor-pointer border-0 p-0 transition-all duration-300 hover:scale-110 ${i===0?"w-[25px]":"w-[8px]"}`,style:{background:"linear-gradient(135.96deg, #8B78FF 0%, #5451D6 101.74%)",opacity:i<t?1:.4},initial:{scaleX:0},animate:{scaleX:i<t?1:.3},transition:{delay:.8+i*.1,duration:.8,ease:"easeOut"},whileHover:{scale:1.2},whileTap:{scale:.9}},i))})}function Ei(){return e.jsx("div",{className:"relative size-full","data-name":"Arrow - Right",children:e.jsx("div",{className:"absolute inset-[-5%_-6.22%]",children:e.jsx("img",{className:"block max-w-none size-full",src:Me})})})}function Ai({onClick:t,disabled:s}){return e.jsx("button",{onClick:t,disabled:s,className:`absolute size-6 bg-transparent border-0 cursor-pointer z-10 ${s?"opacity-50 cursor-not-allowed":""}`,"data-name":"Arrow - Right",style:{bottom:"min(69px, 15vh)",right:"min(46px, 12vw)"},children:e.jsx("div",{className:"absolute flex inset-[23.75%_17.71%_26.04%_19.79%] items-center justify-center pointer-events-none",children:e.jsx("div",{className:"flex-none h-[15px] rotate-[270deg] w-[12.049px]",children:e.jsx(Ei,{})})})})}function Fi({onNext:t,disabled:s}){return e.jsxs(u.div,{className:"absolute contents",style:{bottom:"max(-2px, calc(0px - 2vh))",right:"max(-1px, calc(0px - 1vw))"},"data-name":"Next Button",initial:{opacity:0,scale:.8,x:50},animate:{opacity:s?.5:1,scale:1,x:0},transition:{delay:.6,duration:.6,type:"spring"},whileHover:{scale:s?1:1.05,rotate:0},whileTap:{scale:s?1:.95},children:[e.jsx("button",{onClick:t,disabled:s,className:`absolute h-[191px] w-[129px] max-w-[30vw] bg-transparent border-0 ${s?"cursor-not-allowed":"cursor-pointer"}`,style:{bottom:"max(-2px, calc(0px - 2vh))",right:"max(-1px, calc(0px - 1vw))"},children:e.jsx("div",{className:"absolute bottom-0 left-[7.57%] right-0 top-0 pointer-events-none",children:e.jsx("img",{className:"block max-w-none size-full",src:Pe})})}),e.jsx(Ai,{onClick:t,disabled:s})]})}function Si({selectedLanguage:t,onNext:s,currentStep:r,totalSteps:a,onStepClick:i}){const o=tt[t]||tt.ru,[m,d]=l.useState(!1),[h,x]=l.useState({name:"",emoji:"🏆"}),g=(n,c)=>{x({name:n,emoji:c}),d(!0),s(n,c)},p=(n,c)=>{x({name:n,emoji:c}),d(n.trim().length>0)};return e.jsxs(u.div,{className:"content-center flex flex-wrap gap-0 h-screen items-center justify-center relative shrink-0 w-full max-w-[444px] mx-auto overflow-hidden scrollbar-hide",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx(Ci,{currentTranslations:o,onNext:g,onUpdate:p}),e.jsx(ki,{currentStep:r,totalSteps:a,onStepClick:i}),e.jsx(Fi,{onNext:()=>g(h.name||o.presets[0],h.emoji),disabled:!m})]})}function Sa({selectedLanguage:t,onNext:s,currentStep:r,totalSteps:a,onStepClick:i}){return e.jsxs(u.div,{className:"bg-background content-stretch flex gap-2.5 items-center justify-center relative size-full h-screen overflow-hidden scrollbar-hide","data-name":"Onboard 3",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx(u.div,{className:"absolute top-10 left-10 w-20 h-20 rounded-full bg-gradient-to-br from-[#756ef3]/10 to-[#756ef3]/5",animate:{scale:[1,1.2,1],rotate:[0,180,360],opacity:[.3,.6,.3]},transition:{duration:8,repeat:1/0,ease:"linear"}}),e.jsx(u.div,{className:"absolute top-32 right-16 w-12 h-12 rounded-full bg-gradient-to-br from-[#8B78FF]/20 to-[#5451D6]/10",animate:{scale:[1,.8,1],x:[0,10,0],y:[0,-5,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"}}),e.jsx(u.div,{className:"absolute bottom-24 left-20 w-6 h-6 rounded-full bg-gradient-to-br from-[#756ef3]/15 to-transparent",animate:{scale:[.5,1,.5],opacity:[.2,.8,.2]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),e.jsx(Si,{selectedLanguage:t,onNext:s,currentStep:r,totalSteps:a,onStepClick:i})]})}const _i="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Microphone%22%3E%0A%3Cpath%20id%3D%22Vector%22%20d%3D%22M8%2011C8.7954%2010.9992%209.55798%2010.6828%2010.1204%2010.1204C10.6828%209.55798%2010.9992%208.7954%2011%208V4C11%203.20435%2010.6839%202.44129%2010.1213%201.87868C9.55871%201.31607%208.79565%201%208%201C7.20435%201%206.44129%201.31607%205.87868%201.87868C5.31607%202.44129%205%203.20435%205%204V8C5.00083%208.7954%205.31716%209.55798%205.87959%2010.1204C6.44202%2010.6828%207.2046%2010.9992%208%2011ZM6%204C6%203.46957%206.21071%202.96086%206.58579%202.58579C6.96086%202.21071%207.46957%202%208%202C8.53043%202%209.03914%202.21071%209.41421%202.58579C9.78929%202.96086%2010%203.46957%2010%204V8C10%208.53043%209.78929%209.03914%209.41421%209.41421C9.03914%209.78929%208.53043%2010%208%2010C7.46957%2010%206.96086%209.78929%206.58579%209.41421C6.21071%209.03914%206%208.53043%206%208V4ZM8.5%2012.975V14.5C8.5%2014.6326%208.44732%2014.7598%208.35355%2014.8536C8.25979%2014.9473%208.13261%2015%208%2015C7.86739%2015%207.74021%2014.9473%207.64645%2014.8536C7.55268%2014.7598%207.5%2014.6326%207.5%2014.5V12.975C6.26728%2012.8496%205.12485%2012.2715%204.29365%2011.3525C3.46245%2010.4336%203.00152%209.23909%203%208C3%207.86739%203.05268%207.74021%203.14645%207.64645C3.24021%207.55268%203.36739%207.5%203.5%207.5C3.63261%207.5%203.75979%207.55268%203.85355%207.64645C3.94732%207.74021%204%207.86739%204%208C4%209.06087%204.42143%2010.0783%205.17157%2010.8284C5.92172%2011.5786%206.93913%2012%208%2012C9.06087%2012%2010.0783%2011.5786%2010.8284%2010.8284C11.5786%2010.0783%2012%209.06087%2012%208C12%207.86739%2012.0527%207.74021%2012.1464%207.64645C12.2402%207.55268%2012.3674%207.5%2012.5%207.5C12.6326%207.5%2012.7598%207.55268%2012.8536%207.64645C12.9473%207.74021%2013%207.86739%2013%208C12.9985%209.23909%2012.5375%2010.4336%2011.7063%2011.3525C10.8751%2012.2715%209.73272%2012.8496%208.5%2012.975Z%22%20fill%3D%22var(--fill-0%2C%20black)%22%2F%3E%0A%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A",Bi="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22PaperPlaneRight%22%3E%0A%3Cpath%20id%3D%22Vector%22%20d%3D%22M13.9919%207.125L3.49187%201.13187C3.31488%201.03259%203.11187%200.989506%202.90981%201.00834C2.70775%201.02718%202.5162%201.10705%202.36061%201.23734C2.20503%201.36763%202.09276%201.54218%202.03873%201.73779C1.9847%201.9334%201.99147%202.14082%202.05812%202.3325L3.99562%207.98688C3.99538%207.98895%203.99538%207.99105%203.99562%207.99313C3.99528%207.99519%203.99528%207.99731%203.99562%207.99937L2.05812%2013.6662C2.00474%2013.817%201.98831%2013.9784%202.0102%2014.1369C2.03209%2014.2953%202.09167%2014.4462%202.18394%2014.5768C2.2762%2014.7075%202.39847%2014.8141%202.54046%2014.8878C2.68246%2014.9614%202.84005%2014.9999%203%2015C3.17354%2014.9996%203.34404%2014.9544%203.495%2014.8687L13.9894%208.86563C14.1442%208.77891%2014.2731%208.65257%2014.363%208.49957C14.4528%208.34656%2014.5003%208.17241%2014.5007%207.99498C14.501%207.81754%2014.4541%207.64322%2014.3648%207.4899C14.2755%207.33657%2014.147%207.20977%2013.9925%207.1225L13.9919%207.125ZM3%2014V13.9944L4.88375%208.5H8.5C8.63261%208.5%208.75979%208.44732%208.85355%208.35355C8.94732%208.25979%209%208.13261%209%208C9%207.86739%208.94732%207.74022%208.85355%207.64645C8.75979%207.55268%208.63261%207.5%208.5%207.5H4.88875L3.00375%202.0075L3%202L13.5%207.98938L3%2014Z%22%20fill%3D%22var(--fill-0%2C%20black)%22%20fill-opacity%3D%220.4%22%2F%3E%0A%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A";function Ii(){const[t,s]=l.useState(!1),[r,a]=l.useState(""),i=l.useRef(null),o=typeof window<"u"&&("webkitSpeechRecognition"in window||"SpeechRecognition"in window);return l.useEffect(()=>{if(!o)return;const h=window.webkitSpeechRecognition||window.SpeechRecognition;i.current=new h;const x=i.current;return x.continuous=!1,x.interimResults=!1,x.lang="ru-RU",x.onstart=()=>{s(!0)},x.onresult=g=>{const p=g.results[0][0].transcript;a(p)},x.onend=()=>{s(!1)},x.onerror=()=>{s(!1)},()=>{x&&x.stop()}},[o]),{isListening:t,transcript:r,startListening:()=>{!o||!i.current||(a(""),i.current.start())},stopListening:()=>{i.current&&i.current.stop()},isSupported:o}}function Ti({isOpen:t,onClose:s,onTimeSelect:r,initialTime:a,title:i}){const[o,m]=l.useState(parseInt(a.split(":")[0])||8),[d,h]=l.useState(parseInt(a.split(":")[1])||0),x=Array.from({length:24},(c,f)=>f),g=Array.from({length:60},(c,f)=>f),p=(c,f)=>`${c.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`,n=()=>{r(p(o,d)),s()};return e.jsx(Ns,{isOpen:t,onClose:s,title:i,showCloseButton:!1,enableSwipeDown:!0,closeOnBackdrop:!0,closeOnEscape:!0,maxHeight:"60vh",footer:e.jsx(Ds,{onCancel:s,onConfirm:n,cancelText:"Отмена",confirmText:"Готово"}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground block mb-3",children:"Выберите время"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("select",{value:o,onChange:c=>m(parseInt(c.target.value)),className:"w-24 h-14 border-2 border-border rounded-xl text-center text-lg font-medium focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none bg-background text-foreground transition-all",children:x.map(c=>e.jsx("option",{value:c,children:c.toString().padStart(2,"0")},c))}),e.jsx("span",{className:"text-2xl font-bold text-muted-foreground",children:":"}),e.jsx("select",{value:d,onChange:c=>h(parseInt(c.target.value)),className:"w-24 h-14 border-2 border-border rounded-xl text-center text-lg font-medium focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none bg-background text-foreground transition-all",children:g.filter(c=>c%5===0).map(c=>e.jsx("option",{value:c,children:c.toString().padStart(2,"0")},c))})]})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-xl",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Выбранное время"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:p(o,d)})]})]})})}const st={ru:{title:"Настрой привычку и сделай первую запись",subtitle:"Последние шаги к успеху",reminderTitle:"Напоминания",reminderSubtitle:"Выбери удобное время",morningTime:"Утром (08:00)",eveningTime:"Вечером (21:00)",bothTimes:"Утро + вечер",firstEntryTitle:"Первая запись",firstEntrySubtitle:"Начни прямо сейчас",placeholder:"Что сегодня получилось лучше всего?",next:"Завершить",permissionRequest:"Разрешить уведомления?",allow:"Разрешить",later:"Позже",successMessage:"Отлично! Твоя первая запись сохранена! 🎉",entryHint:"Опиши свой успех сегодня...",readyHint:"Готово! Нажмите стрелку →"},en:{title:"Set Up Habits and Make First Entry",subtitle:"Final steps to success",reminderTitle:"Reminders",reminderSubtitle:"Choose convenient time",morningTime:"Morning (08:00)",eveningTime:"Evening (21:00)",bothTimes:"Morning + Evening",firstEntryTitle:"First Entry",firstEntrySubtitle:"Start right now",placeholder:"What went best today?",next:"Complete",permissionRequest:"Allow notifications?",allow:"Allow",later:"Later",successMessage:"Great! Your first entry is saved! 🎉",entryHint:"Describe your success today...",readyHint:"Ready! Press the arrow →"},es:{title:"Configurar Hábitos y Primera Entrada",subtitle:"Pasos finales al éxito",reminderTitle:"Recordatorios",reminderSubtitle:"Elige hora conveniente",morningTime:"Mañana (08:00)",eveningTime:"Noche (21:00)",bothTimes:"Mañana + Noche",firstEntryTitle:"Primera Entrada",firstEntrySubtitle:"Comienza ahora",placeholder:"¿Qué salió mejor hoy?",next:"Completar",permissionRequest:"¿Permitir notificaciones?",allow:"Permitir",later:"Más tarde",successMessage:"¡Genial! ¡Tu primera entrada está guardada! 🎉",entryHint:"Describe tu éxito hoy...",readyHint:"¡Listo! Presiona la flecha →"},de:{title:"Gewohnheiten und Ersten Eintrag Einrichten",subtitle:"Letzte Schritte zum Erfolg",reminderTitle:"Erinnerungen",reminderSubtitle:"Wähle passende Zeit",morningTime:"Morgen (08:00)",eveningTime:"Abend (21:00)",bothTimes:"Morgen + Abend",firstEntryTitle:"Erster Eintrag",firstEntrySubtitle:"Jetzt starten",placeholder:"Was lief heute am besten?",next:"Abschließen",permissionRequest:"Benachrichtigungen erlauben?",allow:"Erlauben",later:"Später",successMessage:"Großartig! Dein erster Eintrag ist gespeichert! 🎉",entryHint:"Beschreibe deinen Erfolg heute...",readyHint:"Bereit! Drücke den Pfeil →"},fr:{title:"Configurer Habitudes et Première Entrée",subtitle:"Dernières étapes vers le succès",reminderTitle:"Rappels",reminderSubtitle:"Choisir heure pratique",morningTime:"Matin (08:00)",eveningTime:"Soir (21:00)",bothTimes:"Matin + Soir",firstEntryTitle:"Première Entrée",firstEntrySubtitle:"Commencer maintenant",placeholder:"Qu'est-ce qui s'est le mieux passé aujourd'hui?",next:"Terminer",permissionRequest:"Autoriser les notifications?",allow:"Autoriser",later:"Plus tard",successMessage:"Excellent! Votre première entrée est sauvegardée! 🎉",entryHint:"Décrivez votre succès aujourd'hui...",readyHint:"Prêt! Appuyez sur la flèche →"},zh:{title:"设置习惯和第一条记录",subtitle:"成功的最后步骤",reminderTitle:"提醒",reminderSubtitle:"选择方便的时间",morningTime:"早上 (08:00)",eveningTime:"晚上 (21:00)",bothTimes:"早上 + 晚上",firstEntryTitle:"第一条记录",firstEntrySubtitle:"现在开始",placeholder:"今天什么做得最好？",next:"完成",permissionRequest:"允许通知？",allow:"允许",later:"稍后",successMessage:"太好了！您的第一条记录已保存！🎉",entryHint:"描述你今天的成功...",readyHint:"准备好了！按箭头 →"},ja:{title:"習慣設定と最初のエントリ",subtitle:"成功への最終ステップ",reminderTitle:"リマインダー",reminderSubtitle:"便利な時間を選択",morningTime:"朝 (08:00)",eveningTime:"夜 (21:00)",bothTimes:"朝 + 夜",firstEntryTitle:"最初のエントリ",firstEntrySubtitle:"今すぐ始める",placeholder:"今日は何がうまくいきましたか？",next:"完了",permissionRequest:"通知を許可しますか？",allow:"許可",later:"後で",successMessage:"素晴らしい！最初のエントリが保存されました！🎉",entryHint:"今日の成功を説明してください...",readyHint:"準備完了！矢印を押してください →"}};function Ri({value:t,onChange:s,onSubmit:r,placeholder:a,disabled:i=!1}){const{isListening:o,transcript:m,startListening:d,stopListening:h,isSupported:x}=Ii(),[g,p]=l.useState(52),[n,c]=l.useState("");l.useEffect(()=>{p(52)},[]);const f=v=>{v.key==="Enter"&&!v.shiftKey&&t.trim()&&(v.preventDefault(),r())},w=v=>{const C=v.target.value;s(C);const j=v.target;j.style.height="auto";const _=18,k=16,B=_*2+k,S=_*5+k,I=Math.min(Math.max(j.scrollHeight,B),S);p(I),j.style.height=`${I}px`},y=()=>{if(!x){alert("Речевой ввод не поддерживается в этом браузере");return}o?h():d()};return l.useEffect(()=>{if(m&&m.trim()&&m!==n){const v=t&&t.trim()?`${t.trim()} ${m.trim()}`:m.trim();s(v),c(m),setTimeout(()=>{const C=document.querySelectorAll("textarea"),j=Array.from(C).find(_=>_.value===v);if(j){j.style.height="auto";const _=18,k=16,B=_*2+k,S=_*5+k,I=Math.min(Math.max(j.scrollHeight,B),S);p(I),j.style.height=`${I}px`}},0)}},[m,n,t,s]),e.jsx(u.div,{className:"bg-card relative rounded-xl w-full border-2 border-border focus-within:border-[#756ef3] transition-all duration-300","data-name":"Input",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},whileFocusWithin:{boxShadow:"0 4px 20px rgba(117, 110, 243, 0.2)"},children:e.jsxs("div",{className:"flex items-start gap-2 p-3",children:[e.jsx(u.button,{onClick:y,disabled:i,className:`flex items-center justify-center w-8 h-8 rounded-lg transition-all duration-200 flex-shrink-0 mt-0 ${o?"bg-red-100 text-red-600":"hover:bg-[#756ef3]/10 text-[#756ef3]"} ${i?"opacity-50 cursor-not-allowed":""}`,whileTap:{scale:.95},animate:o?{scale:[1,1.1,1]}:{},transition:o?{repeat:1/0,duration:1}:{},children:e.jsx("div",{className:"w-4 h-4",children:e.jsx("img",{className:"w-full h-full",src:_i,style:{filter:o?"sepia(1) saturate(5) hue-rotate(300deg)":"sepia(1) saturate(5) hue-rotate(240deg)"}})})}),e.jsx("textarea",{value:t,onChange:w,onKeyPress:f,placeholder:a,disabled:i,className:"flex-1 bg-transparent border-0 outline-none resize-none overflow-hidden placeholder:text-muted-foreground placeholder:text-[11px] placeholder:font-normal text-foreground",style:{height:`${g}px`,fontSize:"13px",fontWeight:400,lineHeight:"18px",color:"#002055",fontFamily:"var(--font-family-primary)",minHeight:"52px",maxHeight:"106px"},rows:2}),e.jsx(u.button,{onClick:r,disabled:!t.trim()||i,className:`flex items-center justify-center w-8 h-8 rounded-lg transition-all duration-200 flex-shrink-0 mt-0 ${t.trim()&&!i?"bg-primary text-white hover:bg-primary/90":"bg-muted text-muted-foreground cursor-not-allowed"}`,whileTap:t.trim()&&!i?{scale:.95}:{},children:e.jsx("div",{className:"w-4 h-4",children:e.jsx("img",{className:"w-full h-full",src:Bi,style:{filter:t.trim()&&!i?"brightness(0) invert(1)":void 0}})})})]})})}function zi({currentTranslations:t,onNext:s,onUpdate:r}){const[a,i]=l.useState({selectedTime:"none",morningTime:"08:00",eveningTime:"21:00",permissionGranted:!1}),[o,m]=l.useState(""),[d,h]=l.useState(!1),[x,g]=l.useState({show:!1,type:"morning",title:""}),p=v=>{const C={...a,selectedTime:v};i(C),r?.(o,C),v!=="none"&&!a.permissionGranted&&h(!0)},n=v=>{g({show:!0,type:v,title:v==="morning"?"Утреннее напоминание":"Вечернее напоминание"})},c=v=>{const C={...a,[x.type==="morning"?"morningTime":"eveningTime"]:v};i(C),r?.(o,C)},f=async v=>{if(h(!1),v)try{const C=await Notification.requestPermission(),j={...a,permissionGranted:C==="granted"};i(j),r?.(o,j)}catch{}else{const C={...a,selectedTime:"none"};i(C),r?.(o,C)}},w=v=>{m(v),r?.(v,a)},y=()=>{s(o.trim(),a)};return e.jsxs(u.div,{className:"absolute gap-6 grid grid-cols-[repeat(1,_minmax(0px,_1fr))] h-auto leading-[0] translate-x-[-50%] w-[335px] max-w-[calc(100%-32px)] px-4","data-name":"HabitsAndEntryForm",style:{left:"50%",top:"min(120px, calc(50vh - 200px))"},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4,duration:.7},children:[e.jsx(u.div,{className:"font-['Poppins:Medium',_'Noto_Sans:Regular',_sans-serif] relative shrink-0 text-[#756ef3] text-[14px]",style:{fontVariationSettings:"'CTGR' 0, 'wdth' 100, 'wght' 400"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.1},children:e.jsx("p",{className:"!leading-[18px] !font-[Days_One] !font-bold !text-[12px]",children:t.subtitle})},t.subtitle),e.jsx(u.div,{className:"font-['Poppins:Regular',_'Noto_Sans:Regular',_sans-serif] relative self-start shrink-0 text-[#002055] text-[28px] tracking-[-1px] w-full",style:{fontVariationSettings:"'CTGR' 0, 'wdth' 100, 'wght' 400"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e.jsx("p",{className:"!leading-[28px] !text-[20px] !font-semibold !font-[Days_One]",children:t.title})},t.title),e.jsxs(u.div,{className:"bg-[#756ef3]/10 rounded-xl p-4 space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-[#756ef3]"}),e.jsx("h3",{className:"!text-[#756ef3] !text-[14px] !font-semibold",children:t.reminderTitle})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u.button,{onClick:()=>p("morning"),className:`flex items-center justify-between bg-card rounded-lg p-3 w-full transition-all duration-200 ${a.selectedTime==="morning"?"ring-2 ring-[#756ef3] bg-[#756ef3]/5":"hover:bg-muted"}`,whileTap:{scale:.98},children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${a.selectedTime==="morning"?"border-[#756ef3] bg-[#756ef3]":"border-border"}`,children:a.selectedTime==="morning"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-card"})}),e.jsx("span",{className:"!text-[#002055] !text-[13px] !font-medium",children:"Утром"})]}),e.jsxs("div",{onClick:v=>{v.stopPropagation(),n("morning")},className:"flex items-center space-x-1 px-2 py-1 rounded-md hover:bg-muted transition-colors cursor-pointer",children:[e.jsx(je,{className:"w-3 h-3 text-[#756ef3]"}),e.jsxs("span",{className:"!text-[#756ef3] !text-[13px] !font-medium",children:["(",a.morningTime,")"]})]})]}),e.jsxs(u.button,{onClick:()=>p("evening"),className:`flex items-center justify-between bg-card rounded-lg p-3 w-full transition-all duration-200 ${a.selectedTime==="evening"?"ring-2 ring-[#756ef3] bg-[#756ef3]/5":"hover:bg-muted"}`,whileTap:{scale:.98},children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${a.selectedTime==="evening"?"border-[#756ef3] bg-[#756ef3]":"border-border"}`,children:a.selectedTime==="evening"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-card"})}),e.jsx("span",{className:"!text-[#002055] !text-[13px] !font-medium",children:"Вечером"})]}),e.jsxs("div",{onClick:v=>{v.stopPropagation(),n("evening")},className:"flex items-center space-x-1 px-2 py-1 rounded-md hover:bg-muted transition-colors cursor-pointer",children:[e.jsx(je,{className:"w-3 h-3 text-[#756ef3]"}),e.jsxs("span",{className:"!text-[#756ef3] !text-[13px] !font-medium",children:["(",a.eveningTime,")"]})]})]}),e.jsxs(u.button,{onClick:()=>p("both"),className:`flex items-center justify-between bg-card rounded-lg p-3 w-full transition-all duration-200 ${a.selectedTime==="both"?"ring-2 ring-[#756ef3] bg-[#756ef3]/5":"hover:bg-muted"}`,whileTap:{scale:.98},children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${a.selectedTime==="both"?"border-[#756ef3] bg-[#756ef3]":"border-border"}`,children:a.selectedTime==="both"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-card"})}),e.jsx("span",{className:"!text-[#002055] !text-[13px] !font-medium",children:"Утро + вечер"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(je,{className:"w-3 h-3 text-[#756ef3]"}),e.jsxs("span",{className:"!text-[#756ef3] !text-[13px] !font-medium",children:["(",a.morningTime," & ",a.eveningTime,")"]})]})]})]})]}),e.jsxs(u.div,{className:"space-y-3",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"!text-[#756ef3] !text-[14px] !font-semibold mb-1",children:t.firstEntryTitle}),e.jsx("p",{className:"!text-[#002055]/70 !text-[12px]",children:t.firstEntrySubtitle})]}),e.jsx(Ri,{value:o,onChange:w,onSubmit:y,placeholder:t.placeholder})]}),d&&e.jsx(u.div,{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 px-4 pb-24",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},onClick:()=>f(!1),children:e.jsxs(u.div,{className:"bg-card rounded-[var(--radius)] p-6 w-full max-w-[300px] shadow-lg border border-border transition-colors duration-300",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"text-center space-y-3 mb-6",children:[e.jsx(Ee,{className:"w-12 h-12 text-[#756ef3] mx-auto"}),e.jsx("h3",{className:"!text-[17px] !font-semibold !text-[#002055]",children:t.permissionRequest})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-3 px-4 rounded-[var(--radius)] bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-all duration-200 active:scale-95",children:t.later}),e.jsx("button",{onClick:()=>f(!0),className:"flex-1 py-3 px-4 rounded-[var(--radius)] bg-[#756ef3] text-white hover:bg-[#6b62e8] transition-all duration-200 active:scale-95",children:t.allow})]})]})}),e.jsx(Ti,{isOpen:x.show,onClose:()=>g({...x,show:!1}),onTimeSelect:c,initialTime:x.type==="morning"?a.morningTime:a.eveningTime,title:x.title})]})}function Mi({currentStep:t,totalSteps:s,onStepClick:r}){return e.jsx(u.div,{className:"absolute flex items-center gap-[8px]","data-name":"Sliedbar",style:{bottom:"min(40px, 8vh)",left:"min(25px, 8vw)"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:Array.from({length:s},(a,i)=>e.jsx(u.button,{onClick:()=>r(i+1),className:`h-[6px] rounded-[4px] cursor-pointer border-0 p-0 transition-all duration-300 hover:scale-110 ${i===0?"w-[25px]":"w-[8px]"}`,style:{background:"linear-gradient(135.96deg, #8B78FF 0%, #5451D6 101.74%)",opacity:i<t?1:.4},initial:{scaleX:0},animate:{scaleX:i<t?1:.3},transition:{delay:.8+i*.1,duration:.8,ease:"easeOut"},whileHover:{scale:1.2},whileTap:{scale:.9}},i))})}function Pi(){return e.jsx("div",{className:"relative size-full","data-name":"Arrow - Right",children:e.jsx("div",{className:"absolute inset-[-5%_-6.22%]",children:e.jsx("img",{className:"block max-w-none size-full",src:Me})})})}function Li({onNext:t,disabled:s}){const r=()=>{s||t()};return e.jsx(u.div,{onClick:r,className:`absolute h-[191px] w-[129px] max-w-[30vw] bg-transparent ${s?"cursor-not-allowed":"cursor-pointer"}`,style:{bottom:"max(-2px, calc(0px - 2vh))",right:"max(-1px, calc(0px - 1vw))",zIndex:50},"data-name":"Next Button",initial:{opacity:0,scale:.8,x:50},animate:{opacity:s?.5:1,scale:1,x:0},transition:{delay:.6,duration:.6,type:"spring"},whileHover:{scale:s?1:1.05,rotate:s?0:2},whileTap:{scale:s?1:.95},children:e.jsxs("div",{className:"absolute h-full w-full",children:[e.jsx("div",{className:"absolute bottom-0 left-[7.57%] right-0 top-0 pointer-events-none",children:e.jsx("img",{className:"block max-w-none size-full",src:Pe})}),e.jsx("div",{className:`absolute size-6 z-10 ${s?"opacity-50 cursor-not-allowed":""}`,style:{bottom:"min(69px, 15vh)",right:"min(46px, 12vw)"},children:e.jsx("div",{className:"absolute flex inset-[23.75%_17.71%_26.04%_19.79%] items-center justify-center pointer-events-none",children:e.jsx("div",{className:"flex-none h-[15px] rotate-[270deg] w-[12.049px]",children:e.jsx(Pi,{})})})})]})})}function Oi({selectedLanguage:t,onNext:s,currentStep:r,totalSteps:a,onStepClick:i}){const o=st[t]||st.ru,[m,d]=l.useState(!1),[h,x]=l.useState({entry:"",settings:{selectedTime:"none",morningTime:"08:00",eveningTime:"21:00",permissionGranted:!1}}),[g,p]=l.useState(!1),n=async(f,w)=>{x({entry:f,settings:w}),d(!0),f.trim()&&(p(!0),await new Promise(y=>setTimeout(y,2e3))),s(f,w)},c=(f,w)=>{x({entry:f,settings:w});const y=f.trim().length>0||w.selectedTime!=="none";d(y)};return e.jsxs(u.div,{className:"content-center flex flex-wrap gap-0 h-screen items-center justify-center relative shrink-0 w-full max-w-[444px] mx-auto overflow-hidden scrollbar-hide",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx(zi,{currentTranslations:o,onNext:n,onUpdate:c}),e.jsx(Mi,{currentStep:r,totalSteps:a,onStepClick:i}),e.jsx(Li,{onNext:()=>n(h.entry,h.settings),disabled:!m}),g&&e.jsx(u.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 pb-24 scrollbar-hide",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e.jsxs(u.div,{className:"bg-card rounded-xl p-6 space-y-4 w-[300px] mx-4 text-center border border-border transition-colors duration-300",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[e.jsx(u.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,duration:.5,type:"spring"},children:e.jsx(ut,{className:"w-12 h-12 text-green-500 mx-auto"})}),e.jsx("p",{className:"!text-[16px] !text-[#002055]",children:o.successMessage})]})})]})}function _a({selectedLanguage:t,onNext:s,currentStep:r,totalSteps:a,onStepClick:i}){return e.jsxs(u.div,{className:"bg-background content-stretch flex gap-2.5 items-center justify-center relative size-full h-screen overflow-hidden scrollbar-hide transition-colors duration-300","data-name":"Onboard 4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx(u.div,{className:"absolute top-10 left-10 w-20 h-20 rounded-full bg-gradient-to-br from-[#756ef3]/10 to-[#756ef3]/5",animate:{scale:[1,1.2,1],rotate:[0,180,360],opacity:[.3,.6,.3]},transition:{duration:8,repeat:1/0,ease:"linear"}}),e.jsx(u.div,{className:"absolute top-32 right-16 w-12 h-12 rounded-full bg-gradient-to-br from-[#8B78FF]/20 to-[#5451D6]/10",animate:{scale:[1,.8,1],x:[0,10,0],y:[0,-5,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"}}),e.jsx(u.div,{className:"absolute bottom-24 left-20 w-6 h-6 rounded-full bg-gradient-to-br from-[#756ef3]/15 to-transparent",animate:{scale:[.5,1,.5],opacity:[.2,.8,.2]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),e.jsx(Oi,{selectedLanguage:t,onNext:s,currentStep:r,totalSteps:a,onStepClick:i})]})}const Ui="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%2064%2049%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Ellipse%22%3E%0A%3Ccircle%20id%3D%22Ellipse%20195%22%20cx%3D%2258%22%20cy%3D%2221%22%20r%3D%226%22%20fill%3D%22var(--fill-0%2C%20%2396BFFE)%22%2F%3E%0A%3Ccircle%20id%3D%22Ellipse%20196%22%20cx%3D%224%22%20cy%3D%224%22%20r%3D%224%22%20fill%3D%22var(--fill-0%2C%20%23FED883)%22%2F%3E%0A%3Ccircle%20id%3D%22Ellipse%20197%22%20cx%3D%2246%22%20cy%3D%2247%22%20r%3D%222%22%20fill%3D%22var(--fill-0%2C%20%23FEB5BD)%22%2F%3E%0A%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A",Wi="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%2060%2058%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Apple%22%3E%0A%3Crect%20id%3D%22Rectangle%20320%22%20x%3D%220.5%22%20y%3D%220.5%22%20width%3D%2259%22%20height%3D%2257%22%20rx%3D%2215.5%22%20fill%3D%22var(--fill-0%2C%20white)%22%20stroke%3D%22var(--stroke-0%2C%20%23E9F1FF)%22%2F%3E%0A%3Cpath%20id%3D%22path4%22%20d%3D%22M40.5599%2036.2619C40.1828%2037.1703%2039.7366%2038.0064%2039.2195%2038.7752C38.5147%2039.8231%2037.9376%2040.5486%2037.4928%2040.9514C36.8034%2041.6126%2036.0647%2041.9512%2035.2737%2041.9705C34.7058%2041.9705%2034.021%2041.802%2033.2239%2041.4601C32.4241%2041.1199%2031.6891%2040.9514%2031.0171%2040.9514C30.3123%2040.9514%2029.5563%2041.1199%2028.7478%2041.4601C27.938%2041.802%2027.2857%2041.9801%2026.7869%2041.9978C26.0284%2042.0315%2025.2723%2041.6832%2024.5176%2040.9514C24.036%2040.5132%2023.4335%2039.7622%2022.7117%2038.6981C21.9373%2037.5619%2021.3007%2036.2442%2020.8019%2034.7421C20.2678%2033.1195%2020%2031.5483%2020%2030.0272C20%2028.2848%2020.361%2026.782%2021.0842%2025.5226C21.6525%2024.5111%2022.4086%2023.7131%2023.3548%2023.1273C24.3011%2022.5415%2025.3236%2022.243%2026.4247%2022.2239C27.0271%2022.2239%2027.8172%2022.4183%2028.799%2022.8002C29.7781%2023.1835%2030.4067%2023.3778%2030.6824%2023.3778C30.8884%2023.3778%2031.5868%2023.1506%2032.7707%2022.6975C33.8902%2022.2774%2034.8351%2022.1034%2035.6092%2022.1719C37.7067%2022.3485%2039.2826%2023.2108%2040.3306%2024.7643C38.4546%2025.9497%2037.5267%2027.6099%2037.5451%2029.7398C37.5621%2031.3988%2038.1392%2032.7793%2039.2733%2033.8754C39.7873%2034.3842%2040.3614%2034.7774%2041%2035.0566C40.8615%2035.4755%2040.7153%2035.8767%2040.5599%2036.2619V36.2619ZM35.7492%2016.5201C35.7492%2017.8204%2035.2937%2019.0345%2034.3858%2020.1583C33.29%2021.4942%2031.9647%2022.2661%2030.5275%2022.1443C30.5092%2021.9883%2030.4986%2021.8241%2030.4986%2021.6516C30.4986%2020.4033%2031.0197%2019.0674%2031.945%2017.9751C32.407%2017.4221%2032.9946%2016.9622%2033.7071%2016.5954C34.4181%2016.2341%2035.0906%2016.0342%2035.7231%2016C35.7415%2016.1738%2035.7492%2016.3477%2035.7492%2016.5201V16.5201Z%22%20fill%3D%22var(--fill-0%2C%20black)%22%2F%3E%0A%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A",$i="data:image/svg+xml,%3Csvg%20preserveAspectRatio%3D%22none%22%20width%3D%22100%25%22%20height%3D%22100%25%22%20overflow%3D%22visible%22%20style%3D%22display%3A%20block%3B%22%20viewBox%3D%220%200%2025%2025%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cg%20id%3D%22Group%20659%22%3E%0A%3Cpath%20id%3D%22Vector%22%20d%3D%22M25.0001%2012.7849C25.0012%2011.9331%2024.9277%2011.0828%2024.7805%2010.2434H12.7532V15.0574H19.6419C19.5009%2015.8263%2019.2025%2016.5592%2018.7648%2017.2121C18.327%2017.8649%2017.7589%2018.4241%2017.0947%2018.8559V21.9808H21.2059C23.6132%2019.8055%2025.0001%2016.5886%2025.0001%2012.7849Z%22%20fill%3D%22var(--fill-0%2C%20%234285F4)%22%2F%3E%0A%3Cpath%20id%3D%22Vector_2%22%20d%3D%22M12.7535%2024.9999C16.1952%2024.9999%2019.0931%2023.8923%2021.2062%2021.9827L17.095%2018.8578C15.9507%2019.6182%2014.477%2020.0522%2012.7535%2020.0522C9.42698%2020.0522%206.6035%2017.8544%205.59384%2014.8927H1.35862V18.113C2.42012%2020.1832%204.0478%2021.9235%206.05995%2023.1397C8.0721%2024.3558%2010.3895%2024.9998%2012.7535%2024.9999V24.9999Z%22%20fill%3D%22var(--fill-0%2C%20%2334A853)%22%2F%3E%0A%3Cpath%20id%3D%22Vector_3%22%20d%3D%22M5.59324%2014.8926C5.05948%2013.3407%205.05948%2011.66%205.59324%2010.1081V6.88771H1.35802C0.465056%208.62923%200%2010.5513%200%2012.5004C0%2014.4494%200.465056%2016.3715%201.35802%2018.113L5.59324%2014.8926Z%22%20fill%3D%22var(--fill-0%2C%20%23FBBC04)%22%2F%3E%0A%3Cpath%20id%3D%22Vector_4%22%20d%3D%22M12.7535%204.94855C14.5723%204.91943%2016.3297%205.59293%2017.6459%206.82348L21.286%203.25591C18.9778%201.13112%2015.92%20-0.0354269%2012.7535%200.000820087C10.3895%200.000925682%208.0721%200.644988%206.05995%201.8611C4.0478%203.07722%202.42012%204.81752%201.35862%206.88772L5.59384%2010.1081C6.6035%207.14639%209.42698%204.94855%2012.7535%204.94855V4.94855Z%22%20fill%3D%22var(--fill-0%2C%20%23EA4335)%22%2F%3E%0A%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A",Gi="data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2258%22%20viewBox%3D%220%200%2060%2058%22%20fill%3D%22none%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Crect%20x%3D%220.5%22%20y%3D%220.5%22%20width%3D%2259%22%20height%3D%2257%22%20rx%3D%2215.5%22%20fill%3D%22white%22%20stroke%3D%22%23E9F1FF%22/%3E%3Cpath%20d%3D%22M44%2030.073c0-6.627-5.373-12-12-12s-12%205.373-12%2012c0%205.99%204.388%2010.954%2010.125%2011.854v-8.385H27.078v-3.47h3.047V27.43c0-3.007%201.792-4.669%204.533-4.669%201.312%200%202.686.235%202.686.235v2.953H35.83c-1.491%200-1.956.925-1.956%201.874v2.25h3.328l-.532%203.47h-2.796v8.385C39.612%2041.027%2044%2036.062%2044%2030.073z%22%20fill%3D%22%231877F2%22/%3E%3C/svg%3E",it={ru:{signIn:"Войти",signUp:"Регистрация",signInWith:"Войти через",signUpWith:"Регистрация через",yourEmail:"Ваш email",yourName:"Ваше имя",password:"Пароль",welcomeBack:"Добро пожаловать!",createAccount:"Создать аккаунт",notRegisteredYet:"Еще не зарегистрированы?",alreadyHaveAccountAuth:"Уже есть аккаунт?",back:"Назад"},en:{signIn:"Sign In",signUp:"Sign Up",signInWith:"Sign in with",signUpWith:"Sign up with",yourEmail:"Your email",yourName:"Your name",password:"Password",welcomeBack:"Welcome back!",createAccount:"Create account",notRegisteredYet:"Not registered yet?",alreadyHaveAccountAuth:"Already have an account?",back:"Back"},es:{signIn:"Iniciar sesión",signUp:"Registrarse",signInWith:"Iniciar sesión con",signUpWith:"Registrarse con",yourEmail:"Tu email",yourName:"Tu nombre",password:"Contraseña",welcomeBack:"¡Bienvenido de vuelta!",createAccount:"Crear cuenta",notRegisteredYet:"¿Aún no registrado?",alreadyHaveAccountAuth:"¿Ya tienes cuenta?",back:"Atrás"},de:{signIn:"Anmelden",signUp:"Registrieren",signInWith:"Anmelden mit",signUpWith:"Registrieren mit",yourEmail:"Deine E-Mail",yourName:"Dein Name",password:"Passwort",welcomeBack:"Willkommen zurück!",createAccount:"Konto erstellen",notRegisteredYet:"Noch nicht registriert?",alreadyHaveAccountAuth:"Bereits ein Konto?",back:"Zurück"},fr:{signIn:"Se connecter",signUp:"S'inscrire",signInWith:"Se connecter avec",signUpWith:"S'inscrire avec",yourEmail:"Ton email",yourName:"Ton nom",password:"Mot de passe",welcomeBack:"Bon retour !",createAccount:"Créer un compte",notRegisteredYet:"Pas encore inscrit ?",alreadyHaveAccountAuth:"Déjà un compte ?",back:"Retour"},zh:{signIn:"登录",signUp:"注册",signInWith:"使用以下方式登录",signUpWith:"使用以下方式注册",yourEmail:"你的邮箱",yourName:"你的姓名",password:"密码",welcomeBack:"欢迎回来！",createAccount:"创建账户",notRegisteredYet:"还没有注册？",alreadyHaveAccountAuth:"已经有账户了？",back:"返回"},ja:{signIn:"サインイン",signUp:"サインアップ",signInWith:"でサインイン",signUpWith:"でサインアップ",yourEmail:"あなたのメール",yourName:"あなたの名前",password:"パスワード",welcomeBack:"おかえりなさい！",createAccount:"アカウントを作成",notRegisteredYet:"まだ登録していませんか？",alreadyHaveAccountAuth:"すでにアカウントをお持ちですか？",back:"戻る"}};function Hi(){return e.jsx("div",{className:"absolute right-4 top-20 w-16 h-12 pointer-events-none z-0",children:e.jsx("img",{className:"block w-full h-full object-contain",src:Ui,alt:""})})}function Ba({onComplete:t,onAuthComplete:s,onBack:r,showTopBar:a=!0,contextText:i="Сохраним твои успехи?",selectedLanguage:o="ru",initialMode:m="register",onboardingData:d}){const h=s||t,[x,g]=l.useState(m==="login"),[p,n]=l.useState(!1),[c,f]=l.useState(!1),[w,y]=l.useState(""),[v,C]=l.useState(""),[j,_]=l.useState(""),k=it[o]||it.ru,B=V(),S=async A=>{f(!0);try{const N=await fetch("https://ecuwuzqlwdkkdncampnc.supabase.co/functions/v1/telegram-auth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVjdXd1enFsd2Rra2RuY2FtcG5jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNTg2OTQsImV4cCI6MjA3NTYzNDY5NH0.OnBM1BIQMVgJur2nM4gZGDW-PWWwSR92DpJHhPpqB88",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVjdXd1enFsd2Rra2RuY2FtcG5jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNTg2OTQsImV4cCI6MjA3NTYzNDY5NH0.OnBM1BIQMVgJur2nM4gZGDW-PWWwSR92DpJHhPpqB88"},body:JSON.stringify({telegramData:A,action:"auth"})});if(N.ok){const z=await N.json();if(z.session&&await B.auth.setSession(z.session),b.success("Авторизация через Telegram успешна! 👋"),(await B.auth.getSession()).data.session){try{const O=await ze(z.user.id),F={id:z.user.id,email:z.user.email,name:`${A.first_name} ${A.last_name||""}`.trim(),diaryData:{name:O?.diaryName||"Мой дневник",emoji:O?.diaryEmoji||"🏆"},diaryName:O?.diaryName||"Мой дневник",diaryEmoji:O?.diaryEmoji||"🏆",language:O?.language||o,notificationSettings:O?.notificationSettings||{selectedTime:"none",morningTime:"08:00",eveningTime:"21:00",permissionGranted:!1},onboardingCompleted:O?.onboardingCompleted||!1,createdAt:O?.createdAt||new Date().toISOString(),telegramData:{id:A.id,username:A.username,photo_url:A.photo_url}};h?.(F)}catch{const F={id:z.user.id,email:z.user.email,name:`${A.first_name} ${A.last_name||""}`.trim(),diaryData:{name:"Мой дневник",emoji:"🏆"},diaryName:"Мой дневник",diaryEmoji:"🏆",language:o,notificationSettings:{selectedTime:"none",morningTime:"08:00",eveningTime:"21:00",permissionGranted:!1},onboardingCompleted:!1,createdAt:new Date().toISOString(),telegramData:{id:A.id,username:A.username,photo_url:A.photo_url}};h?.(F)}return}const Z={id:z.user.id,email:z.user.email,name:`${A.first_name} ${A.last_name||""}`.trim(),diaryData:{name:"Мой дневник",emoji:"🏆"},diaryName:"Мой дневник",diaryEmoji:"🏆",language:o,notificationSettings:{selectedTime:"none",morningTime:"08:00",eveningTime:"21:00",permissionGranted:!1},onboardingCompleted:!1,createdAt:new Date().toISOString(),telegramData:{id:A.id,username:A.username,photo_url:A.photo_url}};h?.(Z)}else{const z=await N.json();throw new Error(z.error||"Failed to process Telegram authentication")}}catch(N){b.error("Ошибка авторизации через Telegram",{description:N.message})}finally{f(!1)}},I=async A=>{A.preventDefault(),n(!0);try{if(x){const N=await Vs(v,j);N.success&&N.user&&N.profile?(b.success("Добро пожаловать! 👋"),h?.({id:N.user.id,email:N.user.email,name:N.profile.name,diaryData:{name:N.profile.diaryName,emoji:N.profile.diaryEmoji},diaryName:N.profile.diaryName,diaryEmoji:N.profile.diaryEmoji,language:N.profile.language,notificationSettings:N.profile.notificationSettings,onboardingCompleted:N.profile.onboardingCompleted,createdAt:N.profile.createdAt})):b.error("Ошибка входа",{description:N.error||"Проверьте email и пароль"})}else{const N=await Hs(v,j,{name:w||"Пользователь",diaryName:d?.diaryName||"Мой дневник",diaryEmoji:d?.diaryEmoji||"🏆",language:d?.language||o,notificationSettings:d?.notificationSettings,firstEntry:d?.firstEntry});if(N.success&&N.user&&N.profile){const z={id:N.user.id,email:N.user.email,name:N.profile.name,diaryData:{name:N.profile.diaryName,emoji:N.profile.diaryEmoji},diaryName:N.profile.diaryName,diaryEmoji:N.profile.diaryEmoji,language:N.profile.language,notificationSettings:N.profile.notificationSettings,onboardingCompleted:N.profile.onboardingCompleted,createdAt:N.profile.createdAt};b.success("Аккаунт создан! 🎉"),h?.(z)}else b.error("Ошибка регистрации",{description:N.error||"Попробуйте другой email"})}}catch(N){b.error("Произошла ошибка",{description:N.message})}finally{n(!1)}},G=async A=>{n(!0);try{let N;switch(A){case"google":N=await qs(),b.success("Авторизация через Google...");break;case"facebook":N=await Js(),b.success("Авторизация через Facebook...");break;case"telegram":b.success("Авторизация через Telegram...");break}!N.success&&N.error&&(b.error("Ошибка авторизации",{description:N.error}),n(!1))}catch(N){b.error("Произошла ошибка",{description:N.message}),n(!1)}};return e.jsxs("div",{className:"bg-background relative min-h-screen flex flex-col overflow-x-hidden scrollbar-hide",children:[e.jsx(Hi,{}),e.jsxs("div",{className:"flex-1 flex flex-col justify-start px-6 pt-16 pb-8 relative z-10",children:[!a&&i&&e.jsx(u.div,{className:"text-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx("p",{className:"text-accent !text-[16px] !font-semibold",children:i})}),e.jsxs(u.div,{className:"text-left mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-[#002055] mb-3",children:x?k.signIn:k.signUp}),e.jsx("p",{className:"text-[#868d95] !text-[14px] leading-relaxed max-w-[300px]",children:x?k.welcomeBack:k.createAccount})]}),e.jsxs(u.form,{onSubmit:I,className:"space-y-6 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[!x&&e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:w,onChange:A=>y(A.target.value),placeholder:k.yourName,className:"w-full h-[60px] px-6 bg-input-background border-2 border-[#756ef3] rounded-[var(--radius)] outline-none transition-all duration-200 placeholder:text-[#848a94] text-[#002055]",required:!0})}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"email",value:v,onChange:A=>C(A.target.value),placeholder:k.yourEmail,className:"w-full h-[60px] px-6 bg-input-background border-2 border-[#756ef3] rounded-[var(--radius)] outline-none transition-all duration-200 placeholder:text-[#848a94] text-[#002055]",required:!0})}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"password",value:j,onChange:A=>_(A.target.value),placeholder:k.password,className:"w-full h-[60px] px-6 bg-input-background border-2 border-[#756ef3] rounded-[var(--radius)] outline-none transition-all duration-200 placeholder:text-[#848a94] text-[#002055]",required:!0,minLength:6})}),e.jsx(u.button,{type:"submit",disabled:p,className:"w-full h-12 bg-[#756ef3] text-white rounded-[var(--radius)] shadow-[0px_8px_24px_rgba(117,110,243,0.3)] hover:bg-[#6b62e8] transition-all duration-200 active:scale-98 flex items-center justify-center disabled:opacity-50",whileTap:{scale:p?1:.98},children:p?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):x?k.signIn:k.signUp})]}),e.jsxs(u.div,{className:"mb-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:[e.jsx("p",{className:"text-[#868d95] text-center mb-6 !text-[14px]",children:x?k.signInWith:k.signUpWith}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{type:"button",onClick:()=>G("apple"),disabled:p,className:"h-[58px] w-[60px] hover:opacity-80 transition-opacity disabled:opacity-50",children:e.jsx("img",{className:"block w-full h-full object-cover",src:Wi,alt:"Apple"})}),e.jsx("button",{type:"button",onClick:()=>G("google"),disabled:p,className:"relative h-[58px] w-[60px] bg-card rounded-[var(--radius)] border border-border hover:border-primary transition-all duration-200 disabled:opacity-50",children:e.jsx("img",{className:"absolute inset-0 m-auto w-6 h-6",src:$i,alt:"Google"})}),e.jsx("button",{type:"button",onClick:()=>G("facebook"),disabled:p,className:"h-[58px] w-[60px] hover:opacity-80 transition-opacity disabled:opacity-50",children:e.jsx("img",{className:"block w-full h-full object-cover",src:Gi,alt:"Facebook"})}),e.jsx("div",{className:"relative h-[58px] w-[60px]",children:e.jsx($t,{botName:"diary_bookai_bot",dataOnauth:S,buttonSize:"large",cornerRadius:"8",requestAccess:"write",usePic:!1,lang:"ru"})})]})]}),e.jsx(u.div,{className:"text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},children:e.jsxs("button",{type:"button",onClick:()=>g(!x),disabled:p,className:"!text-[14px] hover:opacity-80 transition-opacity disabled:opacity-50",children:[e.jsx("span",{className:"text-[#868d95]",children:x?k.notRegisteredYet+" ":k.alreadyHaveAccountAuth+" "}),e.jsx("span",{className:"text-[#756ef3] !font-semibold",children:x?k.signUp:k.signIn})]})}),r&&e.jsx(u.div,{className:"text-center mt-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},children:e.jsxs("button",{type:"button",onClick:r,disabled:p,className:"text-[#868d95] !text-[13px] hover:opacity-80 transition-opacity disabled:opacity-50",children:["← ",k.back]})})]})]})}const at="https://cdn.shadcnstudio.com/ss-assets/avatar/avatar-5.png";function Vi({userName:t,userEmail:s,avatarUrl:r}){const a=r||at;return e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsxs(Ie,{className:"h-[70px] w-[70px] ring-1 ring-border",children:[e.jsx(Te,{src:a,alt:t,className:"object-cover"}),e.jsx(Re,{className:"bg-muted",children:e.jsx("img",{src:at,alt:"Default avatar",className:"h-full w-full object-cover"})})]}),e.jsxs("span",{className:"absolute bottom-1 right-1 flex h-3.5 w-3.5 z-10",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-500 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3.5 w-3.5 bg-green-500"})]})]})}function qi({isOpen:t,onClose:s}){const r=[{icon:xt,label:"Новая запись",color:"bg-[var(--action-primary)]",action:()=>{}},{icon:Se,label:"Голосовая запись",color:"bg-[var(--action-voice)]",action:()=>{}},{icon:ge,label:"Фото достижение",color:"bg-[var(--action-photo)]",action:()=>{}},{icon:ee,label:"AI подсказка",color:"bg-[var(--action-ai)]",action:()=>{}},{icon:pt,label:"История записей",color:"bg-[var(--action-history)]",action:()=>{}},{icon:Gt,label:"Настройки",color:"bg-[var(--action-settings)]",action:()=>{}}];return e.jsx(L,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"fixed inset-0 bg-black/40 z-modal-backdrop backdrop-blur-sm"}),e.jsxs(u.div,{initial:{opacity:0,scale:.9,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{type:"spring",damping:25,stiffness:300},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-modal bg-card rounded-[24px] shadow-2xl p-modal w-[280px] border border-border transition-colors duration-300",style:{boxShadow:"0 20px 60px rgba(0,0,0,0.2)"},children:[e.jsx("div",{className:"mb-responsive-sm",children:e.jsx("h3",{className:"text-headline text-foreground",children:"Быстрые действия"})}),e.jsx("div",{className:"space-y-2",children:r.map((a,i)=>e.jsxs(u.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},onClick:()=>{a.action(),s()},className:"w-full flex items-center gap-responsive-sm p-row rounded-[12px] hover:bg-muted transition-colors active:scale-95",children:[e.jsx("div",{className:`${a.color} w-10 h-10 rounded-[10px] flex items-center justify-center`,children:e.jsx(a.icon,{className:"h-5 w-5 text-white",strokeWidth:2})}),e.jsx("span",{className:"text-subhead text-foreground",children:a.label})]},i))})]})]})})}function Et({userName:t="Пользователь",daysInApp:s=1,userEmail:r,avatarUrl:a}){const[i,o]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative p-section bg-card transition-colors duration-300",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[e.jsx(Vi,{userName:t,userEmail:r,avatarUrl:a}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h1",{className:"!text-[24px] !font-semibold text-foreground tracking-[-0.5px] leading-[1.2] flex items-center gap-1",children:[e.jsx("span",{className:"text-[24px]",children:"🙌"}),e.jsxs("span",{className:"!text-[24px]",children:["Привет ",t.charAt(0).toUpperCase()+t.slice(1),","]})]}),e.jsx("p",{className:"text-muted-foreground !text-[15px] !leading-[1.3] mt-0.5",children:"Какие твои победы сегодня?"})]})]}),e.jsxs("div",{className:"relative w-[72px] h-[72px] flex-shrink-0",children:[e.jsx("svg",{className:"block size-full",fill:"none",preserveAspectRatio:"none",viewBox:"0 0 72 72",children:e.jsx("circle",{cx:"36",cy:"36",r:"35.5",stroke:"var(--border)"})}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("p",{className:"!text-[24px] !font-semibold text-[var(--ios-green)] leading-[1]",children:s}),e.jsx("p",{className:"text-caption-2 text-foreground mt-0.5",children:"День"})]})]})]})}),e.jsx(u.button,{onClick:()=>o(!0),className:"fixed bottom-24 right-6 z-50 w-14 h-14 bg-accent rounded-full shadow-lg flex items-center justify-center active:scale-95 transition-transform",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(xt,{className:"h-6 w-6 text-white",strokeWidth:2.5})}),e.jsx(qi,{isOpen:i,onClose:()=>o(!1)})]})}function Ji({media:t,initialIndex:s=0,isOpen:r,onClose:a}){const[i,o]=l.useState(s),m=()=>{o(x=>(x-1+t.length)%t.length)},d=()=>{o(x=>(x+1)%t.length)},h=t[i];return e.jsx(L,{children:r&&e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black z-50 flex items-center justify-center scrollbar-hide",onClick:a,children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 z-10 w-10 h-10 bg-card/10 hover:bg-card/20 rounded-full flex items-center justify-center transition-colors",children:e.jsx($,{className:"w-6 h-6 text-white"})}),t.length>1&&e.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-10 px-4 py-2 bg-card/10 rounded-full",children:e.jsxs("span",{className:"!text-[14px] text-white !font-semibold",children:[i+1," / ",t.length]})}),e.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",onClick:x=>x.stopPropagation(),children:e.jsx(L,{mode:"wait",children:e.jsx(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},className:"max-w-full max-h-full flex items-center justify-center",children:h?.type==="image"?e.jsx("img",{src:h.url,alt:"",className:"max-w-full max-h-full object-contain rounded-[12px]"}):h?.type==="video"?e.jsx("video",{src:h.url,controls:!0,autoPlay:!0,className:"max-w-full max-h-full rounded-[12px]"}):null},i)})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:x=>{x.stopPropagation(),m()},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-card/10 hover:bg-card/20 rounded-full flex items-center justify-center transition-colors",children:e.jsx(Ht,{className:"w-8 h-8 text-white"})}),e.jsx("button",{onClick:x=>{x.stopPropagation(),d()},className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-card/10 hover:bg-card/20 rounded-full flex items-center justify-center transition-colors",children:e.jsx(ht,{className:"w-8 h-8 text-white"})})]}),t.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 max-w-full overflow-x-auto scrollbar-hide px-4",children:t.map((x,g)=>e.jsx("button",{onClick:p=>{p.stopPropagation(),o(g)},className:`flex-shrink-0 w-16 h-16 rounded-[8px] overflow-hidden border-2 transition-all ${g===i?"border-white scale-110":"border-white/30 opacity-60 hover:opacity-100"}`,children:x.type==="image"?e.jsx("img",{src:x.url,alt:"",className:"w-full h-full object-cover"}):e.jsx("video",{src:x.url,className:"w-full h-full object-cover",muted:!0})},x.path))})]})})}function Le({media:t,onRemove:s,onImageClick:r,editable:a=!0,isUploading:i=!1,uploadProgress:o=0,layout:m="grid"}){const[d,h]=l.useState(null),[x,g]=l.useState(!1);if(t.length===0&&!i)return null;const p=(w,y)=>{r?.(y),h(w),g(!0)},n=()=>{g(!1),h(null)},c=m==="row"?"flex gap-2 overflow-x-auto pb-2":"grid grid-cols-3 gap-2",f=m==="row"?"flex-shrink-0 w-32 h-32":"aspect-square";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:c,children:e.jsxs(L,{mode:"popLayout",children:[i&&e.jsxs(u.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:`relative ${f} rounded-[12px] overflow-hidden bg-muted`,children:[e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-muted",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-accent border-t-transparent rounded-full animate-spin mb-2"}),e.jsxs("span",{className:"text-xs text-muted-foreground font-medium",children:[Math.round(o),"%"]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-border",children:e.jsx("div",{className:"h-full bg-accent transition-all duration-300",style:{width:`${o}%`}})})]},"uploading"),t.map((w,y)=>e.jsxs(u.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:`relative ${f} rounded-[12px] overflow-hidden bg-muted group`,onClick:()=>p(w,y),children:[w.type==="image"?e.jsx(Cs,{src:w.url,alt:w.fileName||"",className:"w-full h-full cursor-pointer"}):e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("video",{src:w.url,className:"w-full h-full object-cover",muted:!0,preload:"metadata"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsx("div",{className:"w-12 h-12 bg-card/90 rounded-full flex items-center justify-center",children:e.jsx($e,{className:"w-6 h-6 text-foreground ml-1"})})})]}),e.jsx("div",{className:"absolute top-1 left-1 px-1.5 py-0.5 bg-black/70 backdrop-blur-sm rounded text-white text-[10px] flex items-center gap-0.5",children:w.type==="image"?e.jsxs(e.Fragment,{children:[e.jsx(ft,{className:"w-2.5 h-2.5"}),e.jsx("span",{children:"Фото"})]}):e.jsxs(e.Fragment,{children:[e.jsx($e,{className:"w-2.5 h-2.5"}),e.jsx("span",{children:"Видео"})]})}),a&&s&&e.jsx(u.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"absolute top-1 right-1 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center shadow-lg hover:bg-red-600 active:scale-90 transition-all",onClick:v=>{v.stopPropagation(),s(y)},children:e.jsx($,{className:"w-4 h-4 text-white"})}),y===0&&t.length>1&&e.jsx("div",{className:"absolute bottom-1 right-1 px-2 py-0.5 bg-black/70 rounded-full",children:e.jsxs("span",{className:"!text-[11px] text-white !font-semibold",children:["+",t.length-1]})})]},w.path))]})}),d&&d.type==="image"&&e.jsx(ks,{imageUrl:d.url,fileName:d.fileName,isOpen:x,onClose:n}),d&&d.type==="video"&&e.jsx(Es,{videoUrl:d.url,fileName:d.fileName,isOpen:x,onClose:n})]})}function Yi({type:t,isOpen:s,onClose:r}){const a=t==="microphone",i=a?Se:ge,o=a?"Доступ к микрофону":"Доступ к камере",m=a?"Для записи голосовых сообщений необходимо разрешить доступ к микрофону":"Для загрузки фото и видео необходимо разрешить доступ к камере";return s?e.jsx(L,{children:e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 pb-24 scrollbar-hide",onClick:r,children:e.jsxs(u.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card rounded-[20px] p-6 max-w-md w-full relative",onClick:d=>d.stopPropagation(),children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-full hover:bg-accent/10 transition-colors",children:e.jsx($,{className:"w-5 h-5 text-muted-foreground"})}),e.jsx("div",{className:"w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(i,{className:"w-8 h-8 text-accent"})}),e.jsx("h3",{className:"text-center mb-2",children:o}),e.jsx("p",{className:"text-center text-muted-foreground mb-6",children:m}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-accent/10 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"!text-[13px] text-accent !font-semibold",children:"1"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"!text-[14px] !font-normal text-foreground",children:["Найдите иконку ",a?"🎤":"📷"," в адресной строке браузера"]})})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-accent/10 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"!text-[13px] text-accent !font-semibold",children:"2"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("p",{className:"!text-[14px] !font-normal text-foreground",children:["Нажмите на неё и выберите ",e.jsx("strong",{children:'"Разрешить"'})]})})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-accent/10 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"!text-[13px] text-accent !font-semibold",children:"3"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"!text-[14px] !font-normal text-foreground",children:"Обновите страницу и попробуйте снова"})})]})]}),e.jsxs("div",{className:"bg-muted rounded-[12px] p-4 mb-4",children:[e.jsx("p",{className:"!text-[12px] !font-semibold text-foreground mb-2",children:"💡 Подсказка:"}),e.jsx("p",{className:"!text-[12px] !font-normal text-muted-foreground",children:"В Chrome и Safari иконка разрешений находится слева от адреса сайта. В Firefox - справа от адресной строки."})]}),e.jsx("div",{className:"bg-primary/10 border border-primary/20 rounded-[12px] p-3 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Vt,{className:"w-4 h-4 text-accent flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"!text-[13px] !font-normal text-accent",children:["Ваши данные в безопасности. Мы используем ",a?"микрофон":"камеру"," только для указанных функций и не храним записи на серверах."]})]})}),e.jsx("button",{onClick:r,className:"w-full bg-accent text-white py-3 rounded-[12px] hover:bg-accent/90 transition-colors",children:"Понятно"})]})})}):null}function Zi(){const[t,s]=l.useState(!1),[r,a]=l.useState(0),[i,o]=l.useState(0),m=l.useRef(null),d=l.useRef([]),h=l.useRef(null),x=l.useRef(null),g=l.useRef(null),p=l.useRef(null),n=l.useRef(null),c=typeof window<"u"&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,f=l.useCallback(()=>{if(!x.current)return;const j=new Uint8Array(x.current.frequencyBinCount);x.current.getByteFrequencyData(j);const _=j.reduce((B,S)=>B+S)/j.length,k=Math.min(_/128,1);a(k),p.current=requestAnimationFrame(f)},[]),w=l.useCallback(async()=>{if(!c)throw new Error("Запись голоса не поддерживается в вашем браузере");try{const j=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});g.current=j,h.current=new(window.AudioContext||window.webkitAudioContext),x.current=h.current.createAnalyser(),h.current.createMediaStreamSource(j).connect(x.current),f();const k=MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/mp4",B=new MediaRecorder(j,{mimeType:k});m.current=B,d.current=[],B.ondataavailable=S=>{S.data.size>0&&d.current.push(S.data)},B.start(),s(!0),o(0),n.current=window.setInterval(()=>{o(S=>S+1)},1e3)}catch(j){throw j.name==="NotAllowedError"||j.name==="PermissionDeniedError"?new Error("Доступ к микрофону запрещен. Разрешите доступ в настройках браузера."):j.name==="NotFoundError"||j.name==="DevicesNotFoundError"?new Error("Микрофон не найден. Подключите микрофон и попробуйте снова."):j.name==="NotReadableError"||j.name==="TrackStartError"?new Error("Микрофон используется другим приложением."):j.name==="OverconstrainedError"?new Error("Настройки микрофона не поддерживаются."):new Error("Не удалось начать запись: "+(j.message||"Неизвестная ошибка"))}},[c,f]),y=l.useCallback(async()=>new Promise(j=>{if(!m.current||!t){j(null);return}m.current.onstop=()=>{const _=new Blob(d.current,{type:m.current?.mimeType||"audio/webm"});C(),j(_)},m.current.stop()}),[t]),v=l.useCallback(()=>{m.current&&t&&m.current.stop(),C()},[t]),C=()=>{s(!1),a(0),o(0),p.current&&(cancelAnimationFrame(p.current),p.current=null),n.current&&(clearInterval(n.current),n.current=null),h.current&&(h.current.close(),h.current=null),g.current&&(g.current.getTracks().forEach(j=>j.stop()),g.current=null),m.current=null,d.current=[],x.current=null};return{isRecording:t,audioLevel:r,recordingTime:i,startRecording:w,stopRecording:y,cancelRecording:v,isSupported:c}}async function At(t,s=1920,r=1920,a=.8){if(!t.type.startsWith("image/"))throw new Error("Файл не является изображением");try{return await yt(t,{maxSizeMB:.5,maxWidthOrHeight:s,useWebWorker:!0,quality:a,fileType:"image/jpeg",initialQuality:a,alwaysKeepResolution:!1})}catch(i){throw new Error("Ошибка при сжатии изображения: "+i.message)}}async function Qi(t){try{return await yt(t,{maxSizeMB:.05,maxWidthOrHeight:200,useWebWorker:!0,quality:.7,fileType:"image/jpeg"})}catch(s){throw new Error("Ошибка при создании thumbnail: "+s.message)}}async function Xi(t){return Dt.getImageDimensions(t)}function rt(t){return t.type.startsWith("image/")}function Ce(t){return t.type.startsWith("video/")}let ke=null,nt=!1;async function Ft(){if(ke&&nt)return ke;const t=new ws,s="https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd";return await t.load({coreURL:await qe(`${s}/ffmpeg-core.js`,"text/javascript"),wasmURL:await qe(`${s}/ffmpeg-core.wasm`,"application/wasm")}),ke=t,nt=!0,t}async function Ki(t,s=30,r=1280,a=720){try{const i=await Ft();await i.writeFile("input.mp4",await jt(t)),await i.exec(["-i","input.mp4","-t",s.toString(),"-vf",`scale=${r}:${a}:force_original_aspect_ratio=decrease`,"-c:v","libx264","-crf","28","-preset","fast","-c:a","aac","-b:a","128k","output.mp4"]);const o=await i.readFile("output.mp4"),m=new Blob([o],{type:"video/mp4"}),d=new File([m],t.name,{type:"video/mp4",lastModified:Date.now()});return await i.deleteFile("input.mp4"),await i.deleteFile("output.mp4"),d}catch(i){throw new Error("Ошибка при сжатии видео: "+i.message)}}async function ea(t){try{const s=await Ft();await s.writeFile("input.mp4",await jt(t)),await s.exec(["-i","input.mp4","-ss","00:00:01","-vframes","1","-vf","scale=200:200:force_original_aspect_ratio=decrease","thumbnail.jpg"]);const r=await s.readFile("thumbnail.jpg"),a=new Blob([r],{type:"image/jpeg"}),i=new File([a],"thumbnail.jpg",{type:"image/jpeg",lastModified:Date.now()});return await s.deleteFile("input.mp4"),await s.deleteFile("thumbnail.jpg"),i}catch(s){throw new Error("Ошибка при создании thumbnail: "+s.message)}}async function Fe(t){return Dt.getVideoMetadata(t)}async function ta(t){if(!t.type.startsWith("video/"))return{valid:!1,error:"Файл не является видео"};const s=t.size/1024/1024;if(s>100)return{valid:!1,error:"Видео слишком большое (макс 100MB)"};try{return{valid:!0,metadata:{...await Fe(t),sizeMB:s}}}catch{return{valid:!1,error:"Не удалось прочитать метаданные видео"}}}function sa(){const[t,s]=l.useState([]),[r,a]=l.useState(!1),[i,o]=l.useState(0),m=l.useCallback(async x=>{const g=document.createElement("input");g.type="file",g.accept="image/*,video/*",g.multiple=!0,g.onchange=async p=>{const n=Array.from(p.target.files||[]);if(n.length===0)return;a(!0),o(0);const c=[];try{const f=[];for(let w=0;w<n.length;w++){const y=n[w];try{if(y.size>52428800){c.push(`${y.name}: Файл слишком большой (макс 50MB)`);continue}if(!rt(y)&&!Ce(y)){c.push(`${y.name}: Неподдерживаемый формат файла`);continue}let C=y,j,_;if(rt(y))try{C=await At(y),j=await Qi(y),_=await Xi(y)}catch{c.push(`${y.name}: Ошибка обработки изображения`);continue}if(Ce(y))try{const S=await ta(y);if(!S.valid){c.push(`${y.name}: ${S.error}`);continue}C=await Ki(y,30,1280,720),j=await ea(y);const I=await Fe(C);_={width:I.width,height:I.height}}catch{c.push(`${y.name}: Ошибка обработки видео`);continue}let k;Ce(C)&&(k=(await Fe(C)).duration);const B=await Ct(C,x,{thumbnail:j,width:_?.width,height:_?.height,duration:k});f.push(B)}catch(v){c.push(`${y.name}: ${v.message}`)}o((w+1)/n.length*100)}if(f.length>0&&s(w=>[...w,...f]),c.length>0&&f.length===0)throw new Error(c.join(`
`));c.length>0}catch(f){throw f}finally{a(!1),o(0)}},g.click()},[]),d=l.useCallback(x=>{s(g=>g.filter((p,n)=>n!==x))},[]),h=l.useCallback(()=>{s([])},[]);return{uploadedMedia:t,isUploading:r,uploadProgress:i,selectAndUploadMedia:m,removeMedia:d,clearMedia:h}}const ia=[{id:"Семья",label:"Семья",icon:"👨‍👩‍👧",color:"var(--gradient-neutral-1-start)"},{id:"Работа",label:"Работа",icon:"💼",color:"var(--gradient-neutral-1-start)"},{id:"Финансы",label:"финансы",icon:"💰",color:"var(--gradient-neutral-1-start)"},{id:"Благодарность",label:"Благодарность",icon:"🙏",color:"var(--gradient-neutral-1-start)"}];function St({onMessageSent:t,onEntrySaved:s,userName:r="Анна",userId:a="anonymous"}){const[i,o]=l.useState(""),[m,d]=l.useState([]),[h,x]=l.useState(null),[g,p]=l.useState(!1),[n,c]=l.useState(!1),[f,w]=l.useState(!1),[y,v]=l.useState(0),[C,j]=l.useState(null),[_,k]=l.useState(!1),[B,S]=l.useState(!0),I=l.useRef(null),G=l.useRef(null),{isRecording:A,audioLevel:N,recordingTime:z,startRecording:q,stopRecording:Z,cancelRecording:O,isSupported:F}=Zi(),{uploadedMedia:E,isUploading:M,uploadProgress:U,selectAndUploadMedia:D,removeMedia:R,clearMedia:Q}=sa();l.useEffect(()=>{G.current?.scrollIntoView({behavior:"smooth"})},[m]),l.useEffect(()=>{I.current&&(I.current.style.height="auto",I.current.style.height=I.current.scrollHeight+"px")},[i]);const J=async()=>{if(!i.trim()&&E.length===0)return;const T=i.trim(),P={id:Date.now().toString(),type:"user",text:T||"📷 Медиа",timestamp:new Date,category:h||void 0};k(!0),o(""),p(!0),navigator.vibrate&&navigator.vibrate(50);try{const H=await Ms(T,r,a),Ue={userId:a,text:T,sentiment:H.sentiment,category:h||H.category,tags:H.tags,aiReply:H.reply,aiResponse:H.reply,aiSummary:H.summary,aiInsight:H.insight,isAchievement:H.isAchievement,mood:H.mood,media:E.length>0?E:void 0,streakDay:1,focusArea:H.category},We=await Ps(Ue);P.entryId=We.id,t?.(P),s?.(We),setTimeout(()=>{k(!1)},2e3)}catch{b.error("Ошибка обработки",{description:"Не удалось сохранить запись. Попробуйте снова.",duration:4e3})}finally{p(!1),Q()}},ye=async()=>{try{if(navigator.permissions&&navigator.permissions.query)return(await navigator.permissions.query({name:"microphone"})).state}catch{}return"prompt"},xe=async()=>{if(!F){b.error("Голосовой ввод недоступен",{description:"Ваш браузер не поддерживает запись голоса"});return}if(A){c(!0);try{const T=await Z();if(!T){b.error("Не удалось записать аудио");return}b.loading("Распознаю речь...",{id:"transcribing"});const P=await zs(T);b.success("Готово! ✨",{id:"transcribing"}),o(H=>H?`${H} ${P}`:P),navigator.vibrate&&navigator.vibrate([50,100,50])}catch(T){b.error("Ошибка распознавания",{id:"transcribing",description:T.message})}finally{c(!1)}}else{const T=await ye();if(T==="denied"){b.info("Доступ к микрофону заблокирован",{description:"Нажмите для получения инструкций",duration:6e3,action:{label:"Помощь",onClick:()=>j("microphone")}});return}T==="prompt"&&b.info("🎤 Разрешите доступ к микрофону",{description:"Нажмите 'Разрешить' в диалоге браузера",duration:3e3});try{await q(),b.success("Говорите...",{duration:1e3}),navigator.vibrate&&navigator.vibrate(50)}catch(P){P.message.includes("Доступ к микрофону запрещен")?(j("microphone"),b.info("Доступ к микрофону необходим",{description:"Следуйте инструкциям для настройки",duration:5e3})):P.message.includes("Микрофон не найден")?b.error("Микрофон не найден",{description:"Подключите микрофон и попробуйте снова",duration:5e3}):P.message.includes("используется другим приложением")?b.error("Микрофон занят",{description:"Закройте другие приложения, использующие микрофон",duration:5e3}):b.error("Не удалось начать запись",{description:P.message,duration:5e3})}}},Rt=()=>{O(),b.info("Запись отменена")},zt=async()=>{if(!a||a==="anonymous"){b.error("Необходимо авторизоваться",{description:"Войдите в аккаунт для загрузки медиа"});return}try{await D(a),E.length>0&&(b.success("Медиа загружено!"),navigator.vibrate&&navigator.vibrate(50))}catch(T){const P=T.message||"Неизвестная ошибка";P.includes("Файл слишком большой")?b.error("Файл слишком большой",{description:"Максимальный размер файла - 10 MB",duration:5e3}):P.includes("Неподдерживаемый формат")?b.error("Неподдерживаемый формат",{description:"Поддерживаются только изображения и видео",duration:5e3}):P.includes("Failed to load image")||P.includes("Не удалось загрузить")?b.error("Ошибка загрузки изображения",{description:"Файл может быть поврежден. Попробуйте другой файл.",duration:5e3}):b.error("Ошибка загрузки",{description:P,duration:5e3})}},Mt=async T=>{if(!a||a==="anonymous"){b.error("Необходимо авторизоваться",{description:"Войдите в аккаунт для загрузки медиа"});return}try{b.info("Drag & drop загрузка в разработке"),navigator.vibrate&&navigator.vibrate(50)}catch(P){b.error("Ошибка загрузки",{description:P.message||"Попробуйте еще раз"})}},Pt=T=>{v(T),w(!0)},Lt=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),J())},Ot=T=>{x(P=>P===T?null:T)};return e.jsxs("div",{className:"p-section pb-24",children:[e.jsx("div",{className:"mb-responsive-md",children:e.jsxs("h2",{className:"text-center !text-[20px] !font-semibold text-black leading-[26px]",children:["Что сегодня получилось",e.jsx("br",{}),"лучше всего?"]})}),!1,e.jsxs("div",{className:"relative",children:[e.jsx(L,{children:A&&e.jsx(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute -top-16 left-0 right-0 bg-gradient-to-r from-red-500 to-pink-500 rounded-[16px] p-3 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1},className:"w-3 h-3 bg-card rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"!text-[13px] text-white !font-semibold",children:"Идет запись..."}),e.jsxs("p",{className:"!text-[11px] text-white/80",children:[Math.floor(z/60),":",(z%60).toString().padStart(2,"0")]})]})]}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((T,P)=>e.jsx(u.div,{className:"w-1 bg-card rounded-full",animate:{height:N*20*(1+P*.2)},transition:{duration:.1},style:{minHeight:"4px"}},P))}),e.jsx("button",{onClick:Rt,className:"p-1 hover:bg-card/20 rounded-full transition-colors",children:e.jsx($,{className:"w-4 h-4 text-white"})})]})})}),e.jsx(As,{onFilesSelected:Mt,disabled:M||!a||a==="anonymous",children:e.jsxs("div",{className:"relative bg-card/80 rounded-[16px] border border-border backdrop-blur-sm transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-end gap-responsive-xs p-2",children:[e.jsx("button",{onClick:xe,disabled:n,className:`flex-shrink-0 w-[28px] h-[28px] rounded-[16px] flex items-center justify-center transition-all ${A?"bg-red-500":n?"bg-blue-500":"hover:bg-muted active:scale-95"} ${n?"opacity-50":""}`,children:n?e.jsx(u.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):e.jsx(Se,{className:"w-4 h-4",style:{color:A?"white":"var(--icon-primary)"}})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("textarea",{ref:I,value:i,onChange:T=>o(T.target.value),onKeyPress:Lt,placeholder:"Опиши главную мысль, момент, благодарность",rows:1,className:"w-full resize-none border-none outline-none bg-transparent !text-[14px] !font-normal leading-[20px] text-foreground placeholder:text-muted-foreground/40 max-h-[100px]",style:{fontFamily:"Inter, sans-serif"}})}),e.jsx("button",{onClick:zt,disabled:M,className:`flex-shrink-0 w-[28px] h-[28px] rounded-[16px] flex items-center justify-center transition-all ${M?"opacity-50 cursor-not-allowed":"hover:bg-muted active:scale-95"}`,children:M?e.jsx(u.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},className:"w-4 h-4 border-2 border-muted-foreground border-t-transparent rounded-full"}):e.jsx(ft,{className:"w-4 h-4",color:"rgba(0,0,0,0.4)"})}),e.jsx("button",{onClick:J,disabled:!i.trim()&&E.length===0,className:`flex-shrink-0 w-[28px] h-[28px] rounded-[16px] flex items-center justify-center transition-all ${i.trim()||E.length>0?"hover:bg-muted active:scale-95":"opacity-40 cursor-not-allowed"}`,children:e.jsx(qt,{className:"w-4 h-4",color:"rgba(0,0,0,0.4)"})})]}),(E.length>0||M)&&e.jsx("div",{className:"mt-2 px-2",children:e.jsx(Le,{media:E,onRemove:R,onImageClick:Pt,isUploading:M,uploadProgress:U})})]})}),e.jsx("div",{className:"flex gap-responsive-xs mt-3 flex-wrap",children:ia.map(T=>e.jsxs("button",{onClick:()=>Ot(T.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-[10px] border transition-all ${h===T.id?"bg-accent/10 border-accent":"bg-transparent border-border hover:bg-accent/5 active:scale-95"}`,children:[e.jsx("span",{className:"text-[10px]",children:T.icon}),e.jsx("span",{className:"!text-[12px] !font-light text-foreground",style:{fontVariationSettings:"'wdth' 100"},children:T.label})]},T.id))})]}),e.jsx(L,{children:m.length===0&&B&&e.jsx(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},transition:{delay:.5},className:"mt-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-[16px] p-card border border-blue-100 relative",children:[e.jsx("button",{onClick:()=>S(!1),className:"absolute top-3 right-3 w-7 h-7 flex items-center justify-center rounded-full bg-card/50 hover:bg-card transition-colors","aria-label":"Закрыть",children:e.jsx($,{className:"w-3.5 h-3.5 text-muted-foreground"})}),e.jsxs("div",{className:"flex items-start gap-responsive-sm pr-8",children:[e.jsx(ee,{className:"w-5 h-5 text-accent flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"!text-[14px] !font-semibold text-black mb-1",children:"AI подскажет"}),e.jsx("p",{className:"!text-[13px] !font-normal text-muted-foreground leading-[18px]",children:"Опиши своё достижение, и я помогу структурировать запись, выбрать категорию и отметить прогресс"})]})]})]})})}),e.jsx(Ji,{media:E,initialIndex:y,isOpen:f,onClose:()=>w(!1)}),e.jsx(L,{children:C&&e.jsx(Yi,{type:C,isOpen:!!C,onClose:()=>j(null)})}),e.jsx(L,{children:_&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 z-modal-backdrop backdrop-blur-sm"}),e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-modal bg-card rounded-[24px] p-modal shadow-2xl border border-border transition-colors duration-300",style:{width:"300px",minHeight:"230px"},children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-responsive-md",children:e.jsx(u.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:e.jsx("svg",{className:"w-8 h-8 text-[var(--ios-green)]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),e.jsxs("h3",{className:"text-center !text-[18px] !font-semibold text-foreground mb-2",children:["Отлично ",r,"!",e.jsx("br",{}),"Ваша запись сохранена! 🎉"]}),e.jsx("p",{className:"text-center !text-[14px] text-muted-foreground",children:"AI обрабатывает запись и создает мотивационную карточку..."})]})]})})]})}function _t({userData:t,language:s="ru",onEntryClick:r,onViewAllClick:a}){const[i,o]=l.useState([]),[m,d]=l.useState(!0),[h]=Jt({align:"start",containScroll:"trimSnaps",dragFree:!0});l.useEffect(()=>{x()},[t?.id]);const x=async()=>{try{d(!0);const c=t?.user?.id||t?.id||"anonymous",f=await be(c,3);o(f)}catch{}finally{d(!1)}},g=c=>{const f=new Date(c),y=new Date().getTime()-f.getTime(),v=Math.floor(y/(1e3*60)),C=Math.floor(y/(1e3*60*60)),j=Math.floor(y/(1e3*60*60*24));return v<1?"Только что":v<60?`${v} мин назад`:C<24?`${C} ч назад`:j===0?"Сегодня":j===1?"Вчера":j<7?`${j} дн назад`:f.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})},p=c=>({Работа:"💼",Спорт:"⚽",Здоровье:"🏃",Семья:"👨‍👩‍👧",Друзья:"👥",Путешествия:"✈️",Хобби:"🎨",Чтение:"📚",Обучение:"📖","Личное развитие":"🌱",Финансы:"💰",Творчество:"🎭",Другое:"📝"})[c]||"📝",n=c=>{switch(c){case"positive":return"bg-[var(--ios-green)]/10 text-[var(--ios-green)] border-[var(--ios-green)]/20";case"neutral":return"bg-[var(--ios-blue)]/10 text-[var(--ios-blue)] border-[var(--ios-blue)]/20";case"negative":return"bg-[var(--ios-red)]/10 text-[var(--ios-red)] border-[var(--ios-red)]/20";default:return"bg-muted text-foreground border-border"}};return m?e.jsxs("div",{className:"px-4 mb-6 mt-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Лента последних записей"})}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(c=>e.jsxs("div",{className:"bg-card rounded-2xl p-4 animate-pulse transition-colors duration-300",children:[e.jsx("div",{className:"h-3 bg-muted rounded w-20 mb-3"}),e.jsx("div",{className:"h-5 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-muted rounded w-full mb-1"}),e.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]},c))})]}):i.length===0?null:e.jsxs("div",{className:"mb-6 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-4",children:[e.jsx("h2",{className:"!text-[20px] !font-semibold text-foreground",children:"Лента последних записей"}),e.jsxs("button",{onClick:a,className:"flex items-center gap-1 text-accent hover:text-accent/80 transition-colors !text-[15px] !font-medium",children:["Смотреть все",e.jsx(Ge,{className:"h-4 w-4",strokeWidth:2})]})]}),e.jsx("div",{className:"overflow-hidden",ref:h,children:e.jsxs("div",{className:"flex gap-3 px-4",children:[i.map(c=>e.jsxs("div",{className:"flex-[0_0_85%] min-w-0 bg-card rounded-[16px] p-4 cursor-pointer hover:shadow-sm transition-shadow border border-border",onClick:()=>r?.(c),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"!text-[13px] text-muted-foreground",children:g(c.createdAt)}),e.jsxs(ue,{className:`!text-[13px] px-2.5 py-0.5 rounded-full ${n(c.sentiment)}`,children:[p(c.category)," ",Nt(c.category,s)]})]}),c.media&&c.media.length>0&&e.jsx("div",{className:"mb-3",children:e.jsx(Le,{media:c.media,editable:!1,layout:c.media.length>1?"row":"grid",onImageClick:f=>{}})}),e.jsx("h3",{className:"!font-semibold text-foreground mb-1.5 !text-[15px] line-clamp-1",children:c.text.split(`
`)[0].substring(0,50)}),e.jsx("p",{className:"!text-[13px] text-muted-foreground line-clamp-2 leading-relaxed",children:c.text})]},c.id)),e.jsxs("div",{onClick:a,className:"flex-[0_0_40%] min-w-0 bg-gradient-to-br from-accent/10 to-accent/5 rounded-[16px] p-4 cursor-pointer hover:shadow-sm transition-all border border-accent/20 flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-accent/10 flex items-center justify-center",children:e.jsx(Ge,{className:"h-6 w-6 text-accent",strokeWidth:2})}),e.jsx("p",{className:"!text-[15px] !font-medium text-accent text-center",children:"Смотреть все"})]})]})})]})}const lt={positive:["from-[var(--gradient-positive-1-start)] to-[var(--gradient-positive-1-end)]","from-[var(--gradient-positive-2-start)] to-[var(--gradient-positive-2-end)]","from-[var(--gradient-positive-3-start)] to-[var(--gradient-positive-3-end)]","from-[var(--gradient-positive-4-start)] to-[var(--gradient-positive-4-end)]"],neutral:["from-[var(--gradient-neutral-1-start)] to-[var(--gradient-neutral-1-end)]","from-[var(--gradient-neutral-2-start)] to-[var(--gradient-neutral-2-end)]"],negative:["from-[var(--gradient-negative-1-start)] to-[var(--gradient-negative-1-end)]","from-[var(--gradient-negative-2-start)] to-[var(--gradient-negative-2-end)]"]},ot={ru:[{id:"default_1",date:"Начни сегодня",title:"Сегодня отличное время",description:"Запиши маленькую победу — это первый шаг к осознанию своих достижений.",gradient:"from-[var(--gradient-positive-1-start)] to-[var(--gradient-positive-1-end)]",isMarked:!1},{id:"default_2",date:"Совет дня",title:"Даже одна мысль делает день осмысленным",description:"Не обязательно писать много — одна фраза может изменить твой взгляд на прожитый день.",gradient:"from-[var(--gradient-positive-3-start)] to-[var(--gradient-positive-3-end)]",isMarked:!1},{id:"default_3",date:"Мотивация",title:"Запиши момент благодарности",description:"Почувствуй лёгкость, когда замечаешь хорошее в своей жизни. Это путь к счастью.",gradient:"from-[var(--gradient-positive-4-start)] to-[var(--gradient-positive-4-end)]",isMarked:!1}],en:[{id:"default_1",date:"Start today",title:"Today is a great time",description:"Write down a small victory — it's the first step to recognizing your achievements.",gradient:"from-[var(--gradient-positive-1-start)] to-[var(--gradient-positive-1-end)]",isMarked:!1},{id:"default_2",date:"Daily tip",title:"Even one thought makes the day meaningful",description:"You don't have to write a lot — one phrase can change your perspective on the day.",gradient:"from-[var(--gradient-positive-3-start)] to-[var(--gradient-positive-3-end)]",isMarked:!1},{id:"default_3",date:"Motivation",title:"Write down a moment of gratitude",description:"Feel the lightness when you notice the good in your life. This is the path to happiness.",gradient:"from-[var(--gradient-positive-4-start)] to-[var(--gradient-positive-4-end)]",isMarked:!1}],es:[{id:"default_1",date:"Empieza hoy",title:"Hoy es un gran momento",description:"Escribe una pequeña victoria — es el primer paso para reconocer tus logros.",gradient:"from-[var(--gradient-positive-1-start)] to-[var(--gradient-positive-1-end)]",isMarked:!1},{id:"default_2",date:"Consejo del día",title:"Incluso un pensamiento hace el día significativo",description:"No tienes que escribir mucho — una frase puede cambiar tu perspectiva del día.",gradient:"from-[var(--gradient-positive-3-start)] to-[var(--gradient-positive-3-end)]",isMarked:!1},{id:"default_3",date:"Motivación",title:"Escribe un momento de gratitud",description:"Siente la ligereza cuando notas lo bueno en tu vida. Este es el camino a la felicidad.",gradient:"from-[var(--gradient-positive-4-start)] to-[var(--gradient-positive-4-end)]",isMarked:!1}],de:[{id:"default_1",date:"Fang heute an",title:"Heute ist eine gute Zeit",description:"Schreibe einen kleinen Sieg auf — es ist der erste Schritt, um deine Erfolge zu erkennen.",gradient:"from-[var(--gradient-positive-1-start)] to-[var(--gradient-positive-1-end)]",isMarked:!1},{id:"default_2",date:"Tipp des Tages",title:"Selbst ein Gedanke macht den Tag bedeutsam",description:"Du musst nicht viel schreiben — ein Satz kann deine Perspektive auf den Tag ändern.",gradient:"from-[var(--gradient-positive-3-start)] to-[var(--gradient-positive-3-end)]",isMarked:!1},{id:"default_3",date:"Motivation",title:"Schreibe einen Moment der Dankbarkeit auf",description:"Fühl die Leichtigkeit, wenn du das Gute in deinem Leben bemerkst. Das ist der Weg zum Glück.",gradient:"from-[var(--gradient-positive-4-start)] to-[var(--gradient-positive-4-end)]",isMarked:!1}],fr:[{id:"default_1",date:"Commencez aujourd'hui",title:"Aujourd'hui est un bon moment",description:"Écrivez une petite victoire — c'est le premier pas pour reconnaître vos réalisations.",gradient:"from-[var(--gradient-positive-1-start)] to-[var(--gradient-positive-1-end)]",isMarked:!1},{id:"default_2",date:"Conseil du jour",title:"Même une pensée rend la journée significative",description:"Vous n'avez pas besoin d'écrire beaucoup — une phrase peut changer votre regard sur la journée.",gradient:"from-[var(--gradient-positive-3-start)] to-[var(--gradient-positive-3-end)]",isMarked:!1},{id:"default_3",date:"Motivation",title:"Écrivez un moment de gratitude",description:"Ressentez la légèreté lorsque vous remarquez le bien dans votre vie. C'est le chemin vers le bonheur.",gradient:"from-[var(--gradient-positive-4-start)] to-[var(--gradient-positive-4-end)]",isMarked:!1}],zh:[{id:"default_1",date:"今天开始",title:"今天是个好时机",description:"写下一个小胜利——这是认识自己成就的第一步。",gradient:"from-[var(--gradient-positive-1-start)] to-[var(--gradient-positive-1-end)]",isMarked:!1},{id:"default_2",date:"每日提示",title:"即使一个想法也能让这一天有意义",description:"不需要写很多——一句话就能改变你对这一天的看法。",gradient:"from-[var(--gradient-positive-3-start)] to-[var(--gradient-positive-3-end)]",isMarked:!1},{id:"default_3",date:"动力",title:"写下感恩的时刻",description:"当你注意到生活中的美好时，感受那份轻松。这是通往幸福的道路。",gradient:"from-[var(--gradient-positive-4-start)] to-[var(--gradient-positive-4-end)]",isMarked:!1}],ja:[{id:"default_1",date:"今日から始めよう",title:"今日は良い時です",description:"小さな勝利を書き留めましょう——それはあなたの成果を認識する第一歩です。",gradient:"from-[var(--gradient-positive-1-start)] to-[var(--gradient-positive-1-end)]",isMarked:!1},{id:"default_2",date:"今日のヒント",title:"一つの考えでも一日を意味のあるものにします",description:"たくさん書く必要はありません——一つのフレーズがあなたの一日への見方を変えることができます。",gradient:"from-[var(--gradient-positive-3-start)] to-[var(--gradient-positive-3-end)]",isMarked:!1},{id:"default_3",date:"モチベーション",title:"感謝の瞬間を書き留めましょう",description:"人生の良いことに気づいたとき、その軽さを感じましょう。それが幸せへの道です。",gradient:"from-[var(--gradient-positive-4-start)] to-[var(--gradient-positive-4-end)]",isMarked:!1}]};function aa(t){return ot[t]||ot.ru}function ra(t,s,r="ru"){const a=lt[t.sentiment]||lt.positive,i=a[s%a.length],o=new Date(t.createdAt),m={ru:"ru-RU",en:"en-US",es:"es-ES",de:"de-DE",fr:"fr-FR",zh:"zh-CN",ja:"ja-JP"},d=new Intl.DateTimeFormat(m[r]||"ru-RU",{day:"numeric",month:"long",year:"numeric"}),h=t.aiSummary||Nt(t.category||"Achievement",r),x=t.aiInsight||t.text;return{id:t.id,date:d.format(o),title:h,description:x,gradient:i,isMarked:!1,category:t.category,sentiment:t.sentiment}}function na({card:t,index:s,totalCards:r,onSwipe:a,isTop:i}){const o=He(0),m=He(0),d=pe(o,[-300,0,300],[-25,0,25]),h=pe(o,[-200,-100,0,100,200],[.5,1,1,1,.5]),x=pe(o,[0,100],[0,1]),g=l.useRef(null),n=(()=>{switch(s){case 0:return{scale:1,y:0,rotate:0,opacity:1,blur:0,zIndex:40};case 1:return{scale:.96,y:-16,rotate:-3,opacity:.95,blur:1,zIndex:30};case 2:return{scale:.92,y:-32,rotate:3,opacity:.85,blur:2,zIndex:20};default:return{scale:.88,y:-48,rotate:0,opacity:.7,blur:3,zIndex:10}}})(),c=(f,w)=>{const y=w.offset.x,v=w.velocity.x;Math.abs(v)>500||Math.abs(y)>100?(navigator.vibrate&&navigator.vibrate(50),a(y>0?"right":"left")):(o.set(0),m.set(0))};return e.jsx(u.div,{ref:g,drag:i,dragConstraints:{left:0,right:0,top:0,bottom:0},dragElastic:.7,onDragEnd:c,style:{x:i?o:0,y:i?m:n.y,rotate:i?d:n.rotate,scale:i?h.get()>.8?n.scale:pe(h,[.5,1],[.9,n.scale]):n.scale,zIndex:n.zIndex},initial:{scale:n.scale,y:n.y,rotate:n.rotate,opacity:n.opacity},animate:{scale:n.scale,y:n.y,rotate:n.rotate,opacity:n.opacity,filter:`blur(${n.blur}px)`,transition:{duration:.3,ease:"easeOut"}},exit:{x:o.get()>0?400:-400,opacity:0,rotate:o.get()>0?30:-30,transition:{duration:.3,ease:"easeIn"}},className:`${s===0?"relative":"absolute"} w-full cursor-grab active:cursor-grabbing`,whileTap:{cursor:"grabbing",scale:i?1.02:n.scale},children:e.jsxs("div",{className:`bg-gradient-to-br ${t.gradient} rounded-[36px] overflow-hidden relative`,style:{boxShadow:s===0?"0 20px 60px rgba(0,0,0,0.3)":"0 10px 30px rgba(0,0,0,0.2)",backgroundColor:"#FE7669"},children:[i&&e.jsx(u.div,{style:{opacity:x},className:"absolute inset-0 bg-gradient-to-r from-transparent via-green-500/20 to-green-500/40 pointer-events-none z-10 flex items-center justify-center",children:e.jsx("div",{className:"bg-green-500 text-white px-8 py-4 rounded-2xl rotate-12 border-4 border-white shadow-xl",children:e.jsx(de,{className:"w-12 h-12",fill:"currentColor"})})}),e.jsxs("div",{className:"p-card relative z-0",children:[e.jsx(u.div,{className:"text-white/90 mb-3",animate:{opacity:.9},children:e.jsx("p",{className:"text-caption-1 text-white/90",children:t.date})}),e.jsx(u.div,{className:"mb-3",children:e.jsx("h3",{className:"text-title-2 text-white tracking-[-0.5px] leading-tight",children:t.title})}),e.jsx(u.div,{className:"mb-0",children:e.jsx("p",{className:"text-callout text-white leading-[22px] opacity-95",children:t.description})})]})]})})}function la({diaryData:t={name:"Мой дневник",emoji:"🏆"},userData:s,onNavigateToHistory:r}){const[a,i]=l.useState([]),[o,m]=l.useState(0),[d,h]=l.useState(!1),[x,g]=l.useState(null),[p,n]=l.useState(!0),[c,f]=l.useState(0),[w,y]=l.useState(!0),[v,C]=l.useState(0),[j,_]=l.useState(!0),k=l.useRef(),B=new Date;new Intl.DateTimeFormat("ru",{weekday:"long",day:"numeric",month:"long"}).format(B),l.useEffect(()=>{I()},[]);const I=async()=>{try{n(!0);const E=s?.user?.id||s?.id||"anonymous",M=s?.profile?.language||s?.language||"ru",[U,D]=await Promise.all([Ye(E),Ze(E)]);i(U),m(0),f(D.currentStreak)}catch{b.error("Не удалось загрузить карточки",{description:"Проверьте подключение к интернету"});const M=s?.language||"ru",U=aa(M);i(U)}finally{n(!1),y(!1)}},G=E=>{const M=s?.language||"ru",U=ra(E,0,M);i(R=>[U,...R]),a.length===0&&m(0);const D=s?.id||"anonymous";Ze(D).then(R=>{f(R.currentStreak)}).catch(R=>{}),C(R=>R+1),_(!0),setTimeout(()=>{Ye(D).then(R=>{i(R),m(0)}).catch(R=>{})},3e3),b.success("Отлично! 🎉",{description:"Твоё достижение сохранено"})},A=async E=>{const M=a[o];if(E==="right"){if(g(M),h(!0),M.entryId&&s?.id)try{await Ls(s.id,M.entryId)}catch{}navigator.vibrate&&navigator.vibrate([50,100,50]),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{h(!1),g(null)},5e3)}m(U=>U+1)},N=a.slice(o,o+4),z=o<a.length,q=s?.profile?.name||s?.name||"Пользователь",Z=s?.profile?.email||s?.email,O=s?.profile?.avatar||s?.avatar,F=c>0?c:1;return e.jsxs("div",{className:"min-h-screen bg-background pb-20 overflow-x-hidden scrollbar-hide",children:[e.jsx(Et,{userName:q,daysInApp:F,userEmail:Z,avatarUrl:O}),p&&e.jsx("div",{className:"p-section flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-responsive-sm",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-accent border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-footnote text-muted-foreground",children:"Загрузка записей..."})]})}),!p&&z&&e.jsx("div",{className:"p-section",children:e.jsx("div",{className:"relative w-full min-h-[280px] mb-responsive-md",children:e.jsx(L,{initial:!1,children:N.reverse().map((E,M)=>{const U=N.length-1-M;return e.jsx(na,{card:E,index:U,totalCards:N.length,onSwipe:A,isTop:U===0},E.id)})})})}),!p&&!z&&j&&e.jsx("div",{className:"px-6 pt-0 pb-3",children:e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:"bg-card rounded-[var(--radius-xl)] p-5 border border-border text-center relative",children:[e.jsx("button",{onClick:()=>_(!1),className:"absolute top-3 right-3 w-8 h-8 flex items-center justify-center rounded-full bg-muted/50 hover:bg-muted transition-colors","aria-label":"Закрыть",children:e.jsx($,{className:"w-4 h-4 text-muted-foreground"})}),e.jsx("div",{className:"w-12 h-12 bg-accent/10 rounded-full flex items-center justify-center mx-auto mb-2",children:e.jsx("span",{className:"text-[24px]",children:"🎉"})}),e.jsx("h3",{className:"text-foreground mb-1.5 !text-[16px]",children:"Все прочитано!"}),e.jsx("p",{className:"text-muted-foreground !text-[13px] leading-[1.4]",children:"Вы просмотрели все карточки. Создайте новую запись, чтобы добавить больше достижений."})]})}),!p&&e.jsx("div",{className:"relative w-full",children:e.jsx(St,{userName:q,userId:s?.user?.id||s?.id||"anonymous",onMessageSent:E=>{},onEntrySaved:G})}),!p&&e.jsx(_t,{userData:s,language:s?.language||"ru",onEntryClick:E=>{},onViewAllClick:()=>{r?.()}},v)]})}const Ia=Object.freeze(Object.defineProperty({__proto__:null,AchievementHeader:Et,AchievementHomeScreen:la,ChatInputSection:St,RecentEntriesFeed:_t},Symbol.toStringTag,{value:"Module"})),oa={Семья:Kt,Работа:Xt,Финансы:Qt,Благодарность:de,Здоровье:ee,"Личное развитие":ee,Творчество:ee,Отношения:de},ca={positive:"bg-[var(--ios-green)]/10 text-[var(--ios-green)]",neutral:"bg-[var(--ios-blue)]/10 text-[var(--ios-blue)]",negative:"bg-[var(--ios-orange)]/10 text-[var(--ios-orange)]"};function da({userData:t}){const[s,r]=l.useState([]),[a,i]=l.useState([]),[o,m]=l.useState(!0),[d,h]=l.useState(""),[x,g]=l.useState(null),[p,n]=l.useState(null),[c,f]=l.useState(!1),[w,y]=l.useState(null),[v,C]=l.useState(null),[j,_]=l.useState(""),[k,B]=l.useState(""),[S,I]=l.useState(!1),[G,A]=l.useState(!1),[N,z]=l.useState(""),q=ve(t?.language||"ru");l.useEffect(()=>{Z()},[]),l.useEffect(()=>{O()},[d,x,p,s]);const Z=async()=>{try{m(!0);const D=t?.user?.id||t?.id||"anonymous",R=await be(D,100);r(R),i(R)}catch{b.error("Не удалось загрузить записи")}finally{m(!1)}},O=()=>{let D=[...s];d.trim()&&(D=D.filter(R=>R.text.toLowerCase().includes(d.toLowerCase())||R.category.toLowerCase().includes(d.toLowerCase())||(R.tags||[]).some(Q=>Q.toLowerCase().includes(d.toLowerCase())))),x&&(D=D.filter(R=>R.category===x)),p&&(D=D.filter(R=>R.sentiment===p)),i(D)},F=D=>{C(D),_(D.text),B(D.category),y(null)},E=async()=>{if(!v||!j.trim()){b.error("Текст записи не может быть пустым");return}try{I(!0);const D={text:j.trim(),category:k},R=await Us(v.id,D);r(Q=>Q.map(J=>J.id===v.id?{...J,...R}:J)),C(null),_(""),B(""),z("Запись успешно обновлена!"),A(!0),setTimeout(()=>{A(!1)},2e3)}catch{b.error("Не удалось обновить запись")}finally{I(!1)}},M=async D=>{if(confirm("Удалить эту запись?"))try{const R=t?.user?.id||t?.id||"anonymous";await Os(D,R),r(Q=>Q.filter(J=>J.id!==D)),y(null),z("Запись успешно удалена!"),A(!0),setTimeout(()=>{A(!1)},2e3)}catch{b.error("Не удалось удалить запись")}},U=Array.from(new Set((s||[]).map(D=>D.category)));return e.jsxs("div",{className:"min-h-screen bg-background pb-24 overflow-x-hidden scrollbar-hide",children:[e.jsxs("div",{className:"bg-card border-b border-border px-6 pt-16 pb-4 transition-colors duration-300",children:[e.jsx("h1",{className:"!text-[28px] !font-semibold text-foreground mb-4",children:q.historyTitle}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Yt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx("input",{type:"text",value:d,onChange:D=>h(D.target.value),placeholder:"Поиск по записям...",className:"w-full pl-11 pr-4 py-3 bg-muted border border-border rounded-[12px] !text-[15px] text-foreground placeholder:text-muted-foreground outline-none focus:border-accent transition-colors"})]}),e.jsxs("button",{onClick:()=>f(!c),className:"flex items-center gap-2 px-4 py-2 bg-accent/10 text-accent rounded-[10px] !text-[14px] !font-medium",children:[e.jsx(Zt,{className:"h-5 w-5",strokeWidth:2}),q.filters,(x||p)&&e.jsx("span",{className:"bg-accent text-white px-2 py-0.5 rounded-full !text-[12px]",children:(x?1:0)+(p?1:0)})]})]}),e.jsx(L,{children:c&&e.jsx(u.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-card border-b border-border overflow-hidden transition-colors duration-300",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"!text-[13px] !font-medium text-muted-foreground mb-2",children:"Категория"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>g(null),className:`px-3 py-1.5 rounded-[8px] !text-[13px] transition-colors ${x?"bg-muted text-foreground hover:bg-accent/10":"bg-accent text-white"}`,children:"Все"}),U.map(D=>e.jsx("button",{onClick:()=>g(D),className:`px-3 py-1.5 rounded-[8px] !text-[13px] transition-colors ${x===D?"bg-accent text-white":"bg-muted text-foreground hover:bg-accent/10"}`,children:D},D))]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"!text-[13px] !font-medium text-muted-foreground mb-2",children:"Настроение"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>n(null),className:`px-3 py-1.5 rounded-[8px] !text-[13px] transition-colors ${p?"bg-muted text-foreground hover:bg-accent/10":"bg-accent text-white"}`,children:"Все"}),e.jsx("button",{onClick:()=>n("positive"),className:`px-3 py-1.5 rounded-[8px] !text-[13px] transition-colors ${p==="positive"?"bg-green-500 text-white":"bg-green-500/10 text-green-700 dark:text-green-400 hover:bg-green-500/20"}`,children:"Позитив"}),e.jsx("button",{onClick:()=>n("neutral"),className:`px-3 py-1.5 rounded-[8px] !text-[13px] transition-colors ${p==="neutral"?"bg-primary text-white":"bg-primary/10 text-primary hover:bg-primary/20"}`,children:"Нейтрал"})]})]})]})})}),e.jsxs("div",{className:"bg-accent/5 px-6 py-3 flex items-center justify-between",children:[e.jsxs("p",{className:"!text-[13px] text-muted-foreground",children:[q.foundEntries,": ",e.jsx("span",{className:"!font-semibold text-foreground",children:a.length})]}),(x||p||d)&&e.jsx("button",{onClick:()=>{h(""),g(null),n(null)},className:"!text-[13px] text-accent !font-medium",children:"Сбросить"})]}),e.jsx("div",{className:"px-6 py-4",children:o?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-accent border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"!text-[14px] text-muted-foreground",children:"Загрузка..."})]})}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ae,{className:"h-8 w-8 text-accent",strokeWidth:2})}),e.jsx("h3",{className:"!text-[18px] !font-semibold text-foreground mb-2",children:"Записей не найдено"}),e.jsx("p",{className:"!text-[14px] text-muted-foreground",children:d||x||p?"Попробуйте изменить фильтры":"Создайте первую запись"})]}):e.jsx("div",{className:"space-y-3",children:e.jsx(L,{children:a.map((D,R)=>{const Q=oa[D.category]||ee,J=new Date(D.createdAt),ye=new Intl.DateTimeFormat("ru",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"}).format(J);return e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},transition:{delay:R*.05},className:"bg-card rounded-[16px] p-4 border border-border hover:shadow-md transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-accent/10 rounded-[8px] flex items-center justify-center",children:e.jsx(Q,{className:"h-5 w-5 text-accent",strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("p",{className:"!text-[14px] !font-semibold text-foreground",children:D.category}),e.jsx("p",{className:"!text-[12px] text-muted-foreground",children:ye})]})]}),e.jsx("button",{onClick:()=>y(D),className:"p-1 hover:bg-accent/10 rounded-[6px] transition-colors",children:e.jsx(es,{className:"h-5 w-5 text-muted-foreground",strokeWidth:2})})]}),D.media&&D.media.length>0&&e.jsx("div",{className:"mb-3",children:e.jsx(Le,{media:D.media,editable:!1,layout:D.media.length>1?"row":"grid"})}),e.jsx("p",{className:"!text-[15px] text-foreground leading-[22px] mb-3",children:D.text}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:`px-2 py-1 rounded-[6px] !text-[11px] !font-medium ${ca[D.sentiment]}`,children:D.sentiment==="positive"?"😊 Позитив":D.sentiment==="neutral"?"😐 Нейтрал":"😔 Грусть"}),(D.tags||[]).map(xe=>e.jsxs("span",{className:"px-2 py-1 bg-muted text-muted-foreground rounded-[6px] !text-[11px]",children:["#",xe]},xe))]})]},D.id)})})})}),e.jsx(L,{children:w&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>y(null),className:"fixed inset-0 bg-black/40 z-modal-backdrop backdrop-blur-sm"}),e.jsxs(u.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"modal-bottom-sheet z-modal bg-card p-modal max-w-md mx-auto overflow-y-auto border-t border-border transition-colors duration-300 max-h-[85vh]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"!text-[18px] !font-semibold text-foreground",children:"Действия"}),e.jsx("button",{onClick:()=>y(null),className:"p-1 hover:bg-accent/10 rounded-full transition-colors",children:e.jsx($,{className:"h-5 w-5 text-foreground",strokeWidth:2})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>F(w),className:"w-full flex items-center gap-3 p-3 text-foreground hover:bg-accent/10 rounded-[12px] transition-colors",children:[e.jsx(ts,{className:"h-5 w-5",strokeWidth:2}),e.jsx("span",{className:"!text-[15px] !font-medium",children:"Редактировать"})]}),e.jsxs("button",{onClick:()=>M(w.id),className:"w-full flex items-center gap-3 p-3 text-red-600 dark:text-red-400 hover:bg-red-500/10 rounded-[12px] transition-colors",children:[e.jsx(gt,{className:"h-5 w-5",strokeWidth:2}),e.jsx("span",{className:"!text-[15px] !font-medium",children:"Удалить запись"})]})]})]})]})}),e.jsx(L,{children:v&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:S?void 0:()=>C(null),className:"fixed inset-0 bg-black/40 z-modal-backdrop backdrop-blur-sm"}),e.jsxs(u.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"modal-bottom-sheet z-modal bg-card p-modal max-w-md mx-auto overflow-y-auto border-t border-border transition-colors duration-300 max-h-[85vh]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"!text-[18px] !font-semibold text-foreground",children:"Редактировать запись"}),e.jsx("button",{onClick:()=>!S&&C(null),disabled:S,className:"p-1 hover:bg-accent/10 rounded-full transition-colors disabled:opacity-50",children:e.jsx($,{className:"h-5 w-5 text-foreground",strokeWidth:2})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block !text-[13px] !font-medium text-muted-foreground mb-2",children:"Текст записи"}),e.jsx("textarea",{value:j,onChange:D=>_(D.target.value),disabled:S,rows:6,className:"w-full px-4 py-3 bg-muted border border-border rounded-[12px] !text-[15px] text-foreground placeholder:text-muted-foreground outline-none focus:border-accent transition-colors resize-none disabled:opacity-50",placeholder:"Опишите ваше достижение..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block !text-[13px] !font-medium text-muted-foreground mb-2",children:"Категория"}),e.jsxs("select",{value:k,onChange:D=>B(D.target.value),disabled:S,className:"w-full px-4 py-3 bg-muted border border-border rounded-[12px] !text-[15px] text-foreground outline-none focus:border-accent transition-colors disabled:opacity-50",children:[e.jsx("option",{value:"Другое",children:"Другое"}),e.jsx("option",{value:"Семья",children:"Семья"}),e.jsx("option",{value:"Работа",children:"Работа"}),e.jsx("option",{value:"Финансы",children:"Финансы"}),e.jsx("option",{value:"Благодарность",children:"Благодарность"}),e.jsx("option",{value:"Здоровье",children:"Здоровье"}),e.jsx("option",{value:"Личное развитие",children:"Личное развитие"}),e.jsx("option",{value:"Творчество",children:"Творчество"}),e.jsx("option",{value:"Отношения",children:"Отношения"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>!S&&C(null),disabled:S,className:"flex-1 px-4 py-3 bg-muted text-foreground rounded-[12px] !text-[15px] !font-medium hover:bg-muted/80 transition-colors disabled:opacity-50",children:"Отмена"}),e.jsx("button",{onClick:E,disabled:S||!j.trim(),className:"flex-1 px-4 py-3 bg-accent text-white rounded-[12px] !text-[15px] !font-medium hover:bg-accent/90 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:S?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Сохранение..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ss,{className:"h-4 w-4",strokeWidth:2}),"Сохранить"]})})]})]})]})]})}),e.jsx(L,{children:G&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 z-modal-backdrop backdrop-blur-sm"}),e.jsx(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-modal bg-card p-8 rounded-[24px] max-w-[320px] w-[90%] mx-auto shadow-xl border border-border transition-colors duration-300",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[var(--ios-green)]/10 flex items-center justify-center",children:e.jsx(ut,{className:"h-8 w-8 text-[var(--ios-green)]",strokeWidth:2})}),e.jsx("h3",{className:"!text-[20px] !font-semibold text-foreground",children:"Успешно!"}),e.jsx("p",{className:"!text-[15px] text-muted-foreground",children:N})]})})]})})]})}const Ta=Object.freeze(Object.defineProperty({__proto__:null,HistoryScreen:da},Symbol.toStringTag,{value:"Module"}));function Oe(t){if(!t||t.length===0)return{current:0,longest:0};const s=[...t].sort((x,g)=>new Date(g.createdAt).getTime()-new Date(x.createdAt).getTime());let r=0,a=0,i=1,o=new Date(s[0].createdAt);const m=new Date;m.setHours(0,0,0,0);const d=new Date(s[0].createdAt);if(d.setHours(0,0,0,0),Math.floor((m.getTime()-d.getTime())/(1e3*60*60*24))<=1){r=1;for(let x=1;x<s.length;x++){const g=new Date(s[x].createdAt);g.setHours(0,0,0,0);const p=Math.floor((o.getTime()-g.getTime())/(1e3*60*60*24));if(p===1)r++,i++;else if(p>1)break;o=g}}i=1,o=new Date(s[0].createdAt);for(let x=1;x<s.length;x++){const g=new Date(s[x].createdAt);g.setHours(0,0,0,0),o.setHours(0,0,0,0);const p=Math.floor((o.getTime()-g.getTime())/(1e3*60*60*24));p===1?(i++,a=Math.max(a,i)):p>1&&(i=1),o=g}return a=Math.max(a,r,i),{current:r,longest:a}}function ma(t){return{радость:"😊",восторг:"😍",уверенность:"💪",благодарность:"🙏",энтузиазм:"🤓",удовлетворение:"😌",хорошее:"😊",спокойствие:"😌",мотивация:"🔥",гордость:"🏆",вдохновение:"✨",энергия:"⚡"}[t?.toLowerCase()]||"😊"}function Bt(t){const s={};t.forEach(a=>{const i=a.mood||"хорошее";s[i]=(s[i]||0)+1});const r=t.length;return Object.entries(s).map(([a,i])=>({mood:ma(a),label:a,count:i,percentage:Math.round(i/r*100)})).sort((a,i)=>i.count-a.count)}function It(t){const s={};return t.forEach(r=>{const a=r.category||"Другое";s[a]=(s[a]||0)+1}),Object.entries(s).map(([r,a])=>({name:r,count:a,trend:"+0"})).sort((r,a)=>a.count-r.count).slice(0,5)}function ua(t){return t.filter(s=>s.isAchievement).map(s=>s.aiSummary||s.text.substring(0,100)).slice(0,3)}function xa(t){const s=[];t.filter(m=>new Date(m.createdAt)>new Date(Date.now()-6048e5)).length>5&&s.push("Вы очень активны на этой неделе! Продолжайте в том же духе.");const a=Bt(t);a.length>0&&a[0].percentage>50&&s.push(`Ваше преобладающее настроение - ${a[0].label}. Это отлично!`);const i=It(t);i.length>0&&s.push(`Вы больше всего фокусируетесь на категории "${i[0].name}".`);const o=Oe(t);return o.current>3&&s.push(`Отличная серия! ${o.current} дней подряд.`),s.slice(0,3)}function Tt(t){const s=Oe(t),r=Bt(t),a=It(t),i=ua(t),o=xa(t),m=t.length*10,d=Math.floor(m/100)+1,h=m%100,x=t.filter(g=>new Date(g.createdAt)>new Date(Date.now()-10080*60*1e3)).length;return{totalEntries:t.length,currentStreak:s.current,longestStreak:s.longest,level:d,nextLevelProgress:h,moodDistribution:r,topCategories:a,lastEntryDate:t[0]?.createdAt,thisWeekEntries:x,keyAchievements:i,personalInsights:o}}function pa(t){const s=Oe(t);return[{id:1,name:"Первые шаги",description:"Создать первую запись",icon:"Star",earned:t.length>=1,rarity:"common",earnedDate:t.length>=1?"Получено":null,progress:t.length>=1?100:0},{id:2,name:"Неделя силы",description:"7 дней записей подряд",icon:"Flame",earned:s.current>=7,rarity:"rare",earnedDate:s.current>=7?"Получено":null,progress:Math.min(100,s.current/7*100)},{id:3,name:"Спортивный дух",description:"10 записей о спорте",icon:"Dumbbell",earned:t.filter(a=>a.category==="Спорт"||a.category==="Здоровье").length>=10,rarity:"common",earnedDate:null,progress:Math.min(100,t.filter(a=>a.category==="Спорт"||a.category==="Здоровье").length/10*100)},{id:4,name:"Книжный червь",description:"Прочитать 5 книг",icon:"BookOpen",earned:t.filter(a=>a.category==="Чтение"||a.category==="Обучение").length>=5,rarity:"uncommon",earnedDate:t.filter(a=>a.category==="Чтение"||a.category==="Обучение").length>=5?"Получено":null,progress:Math.min(100,t.filter(a=>a.category==="Чтение"||a.category==="Обучение").length/5*100)},{id:5,name:"Месяц достижений",description:"30 дней записей подряд",icon:"Trophy",earned:s.longest>=30,rarity:"legendary",earnedDate:null,progress:Math.min(100,s.longest/30*100)},{id:6,name:"Продуктивный",description:"50 записей всего",icon:"Target",earned:t.length>=50,rarity:"uncommon",earnedDate:t.length>=50?"Получено":null,progress:Math.min(100,t.length/50*100)}]}const ha={Star:te,Flame:rs,Dumbbell:as,BookOpen:pt,Trophy:vt,Target:_e,Camera:ge,Heart:de,Zap:is};function fa({userData:t}){ve(t?.language||"ru");const[s,r]=l.useState(!0),[a,i]=l.useState([]),[o,m]=l.useState([]),[d,h]=l.useState({totalEntries:0,currentStreak:0,longestStreak:0,totalBadges:0,level:1,nextLevelProgress:0});l.useEffect(()=>{x()},[t?.id]);const x=async()=>{try{r(!0);const n=t?.user?.id||t?.id||"anonymous",c=await be(n,100);i(c);const f=pa(c);m(f);const w=Tt(c);h({totalEntries:w.totalEntries,currentStreak:w.currentStreak,longestStreak:w.longestStreak,totalBadges:f.filter(y=>y.earned).length,level:w.level,nextLevelProgress:w.nextLevelProgress})}catch{b.error("Не удалось загрузить достижения")}finally{r(!1)}},g=o.map(n=>({id:n.id,name:n.name,description:n.description,icon:ha[n.icon]||te,earned:n.earned,rarity:n.rarity,earnedDate:n.earnedDate,progress:n.progress})),p=[{id:1,title:"10 записей",completed:d.totalEntries>=10,reward:"Бейдж 'Начинающий'"},{id:2,title:"Неделя подряд",completed:d.currentStreak>=7,reward:"Бейдж 'Постоянство'"},{id:3,title:"50 записей",completed:d.totalEntries>=50,progress:d.totalEntries,total:50,reward:"Премиум тема"},{id:4,title:"Месяц подряд",completed:d.longestStreak>=30,progress:d.longestStreak,total:30,reward:"Бейдж 'Легенда'"}];return s?e.jsx("div",{className:"pb-20 min-h-screen flex items-center justify-center",style:{backgroundColor:"#f8f7ff"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(Be,{className:"h-8 w-8 animate-spin text-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Загрузка достижений..."})]})}):e.jsxs("div",{className:"pb-20 min-h-screen overflow-x-hidden scrollbar-hide bg-background",children:[e.jsxs("div",{className:"p-4 bg-card transition-colors duration-300",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-primary to-primary/80 rounded-full mx-auto mb-3 flex items-center justify-center shadow-lg",children:e.jsx(me,{className:"h-10 w-10 text-primary-foreground"})}),e.jsxs("h1",{className:"text-2xl mb-1 text-foreground font-semibold",children:["Уровень ",d.level]}),e.jsx("p",{className:"text-muted-foreground",children:"Мастер достижений"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-1 text-foreground font-semibold",children:d.totalEntries}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Записей"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-1 text-foreground font-semibold",children:d.totalBadges}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Наград"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-1 text-foreground font-semibold",children:d.currentStreak}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Дней подряд"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl mb-1 text-foreground font-semibold",children:d.longestStreak}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Рекорд"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:"До следующего уровня"}),e.jsxs("span",{children:[d.nextLevelProgress,"%"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-primary to-primary/80 h-2 rounded-full transition-all duration-300",style:{width:`${d.nextLevelProgress}%`}})})]})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:g.map(n=>{const c=n.icon;return e.jsx(X,{className:`bg-card border-0 shadow-sm hover:shadow-md transition-all cursor-pointer ${n.earned?"":"opacity-60"}`,children:e.jsxs(K,{className:"p-4 text-center",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("div",{className:`w-16 h-16 mx-auto rounded-full flex items-center justify-center ${n.earned?n.rarity==="legendary"?"bg-gradient-to-br from-purple-400 to-purple-600":n.rarity==="rare"?"bg-gradient-to-br from-blue-400 to-blue-600":n.rarity==="uncommon"?"bg-gradient-to-br from-green-400 to-green-600":"bg-gradient-to-br from-gray-400 to-gray-600":"bg-muted"}`,children:e.jsx(c,{className:`h-8 w-8 ${n.earned?"text-white":"text-muted-foreground"}`})}),n.earned&&e.jsx("div",{className:"absolute -top-2 -right-2",children:e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(te,{className:"h-3 w-3 text-white fill-white"})})})]}),e.jsx("h4",{className:"text-[#0d062d] mb-1",children:n.name}),e.jsx("p",{className:"text-xs text-[#787486] mb-2",children:n.description}),n.earned?e.jsx(ue,{className:`text-xs ${n.rarity==="legendary"?"bg-purple-100 text-purple-600":n.rarity==="rare"?"bg-blue-100 text-blue-600":n.rarity==="uncommon"?"bg-green-100 text-green-600":"bg-muted text-muted-foreground"}`,children:n.earnedDate}):e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-[#5030e5] h-2 rounded-full transition-all duration-300",style:{width:`${(n.progress||0)/(n.rarity==="legendary"?30:20)*100}%`}})}),e.jsxs("p",{className:"text-xs text-[#787486]",children:[n.progress,"/",n.rarity==="legendary"?30:20]})]})]})},n.id)})})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-[#0d062d] mb-4",children:"Основные этапы"}),e.jsx("div",{className:"space-y-3",children:p.map(n=>e.jsx(X,{className:"bg-card border-0 shadow-sm transition-colors duration-300",children:e.jsx(K,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${n.completed?"bg-green-100 text-green-600":"bg-[#5030e5]/10 text-[#5030e5]"}`,children:n.completed?e.jsx(vt,{className:"h-5 w-5",strokeWidth:2}):e.jsx(_e,{className:"h-5 w-5",strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[#0d062d]",children:n.title}),e.jsx("p",{className:"text-sm text-[#787486]",children:n.reward})]})]}),n.completed?e.jsx(ue,{className:"bg-green-100 text-green-600",children:"Выполнено"}):e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-[#787486] mb-1",children:[n.progress,"/",n.total]}),e.jsx("div",{className:"w-20 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-[#5030e5] h-2 rounded-full transition-all duration-300",style:{width:`${n.progress/n.total*100}%`}})})]})]})})},n.id))})]})]})}const Ra=Object.freeze(Object.defineProperty({__proto__:null,AchievementsScreen:fa},Symbol.toStringTag,{value:"Module"}));function ga({userData:t}){ve(t?.language||"ru");const[s,r]=l.useState("month"),[a,i]=l.useState(!0),[o,m]=l.useState([]),[d,h]=l.useState(null);l.useEffect(()=>{x()},[t?.id]);const x=async()=>{try{i(!0);const c=t?.user?.id||t?.id||"anonymous",f=await be(c,100);m(f);const w=Tt(f);h(w)}catch{b.error("Не удалось загрузить данные")}finally{i(!1)}},g=new Date().toLocaleDateString("ru-RU",{year:"numeric",month:"long"}),p=d?{period:g,totalEntries:d.totalEntries,streakDays:d.currentStreak,topMood:d.moodDistribution[0]?.mood||"😊",keyAchievements:d.keyAchievements,moodDistribution:d.moodDistribution,topCategories:d.topCategories,personalInsights:d.personalInsights}:{period:g,totalEntries:0,streakDays:0,moodDistribution:[],topCategories:[],personalInsights:[]},n=["Твой путь к цели в 10км начался с первого шага. И ты его сделал! 🏃‍♂️","Каждая прочитанная книга - это новый мир, который ты открыл для себя 📚","Твоя благодарность семье показывает, что ты ценишь близких людей ❤️"];return a?e.jsx("div",{className:"pb-20 min-h-screen bg-background flex items-center justify-center transition-colors duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Be,{className:"h-8 w-8 animate-spin text-[var(--ios-purple)] mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Загрузка статистики..."})]})}):e.jsxs("div",{className:"pb-20 min-h-screen bg-background overflow-x-hidden scrollbar-hide",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-card/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:e.jsx(Ve,{className:"h-6 w-6",strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl",children:"AI Обзоры"}),e.jsx("p",{className:"text-muted-foreground opacity-90",children:"Анализ твоих достижений"})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide",children:["week","month","quarter"].map(c=>e.jsx(Y,{variant:s===c?"secondary":"outline",size:"sm",onClick:()=>r(c),className:s===c?"":"border-card/30 text-white hover:bg-card/10",children:c==="week"?"Неделя":c==="month"?"Месяц":"Квартал"},c))})]}),e.jsx("div",{className:"p-4",children:e.jsxs(X,{className:"border-purple-200",children:[e.jsx(se,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-[var(--action-ai)]",strokeWidth:2}),"Отчет за ",p.period]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Персональный анализ от AI"})]}),e.jsxs(ue,{className:"bg-[var(--ios-bg-secondary)] text-[var(--ios-purple)]",children:[e.jsx(me,{className:"h-3 w-3 mr-1",strokeWidth:2}),"Премиум"]})]})}),e.jsxs(K,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl text-[var(--ios-purple)] mb-1",children:p.totalEntries}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Записей"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl text-[var(--ios-green)] mb-1",children:p.streakDays}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Активных дней"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Y,{className:"w-full bg-[var(--ios-purple)] hover:bg-[var(--ios-purple)]/90",onClick:()=>b.info("Эта функция доступна в премиум версии"),children:[e.jsx(bt,{className:"h-5 w-5 mr-2",strokeWidth:2}),"Скачать PDF отчет"]}),e.jsxs(Y,{variant:"outline",className:"w-full",onClick:()=>b.info("Эта функция доступна в премиум версии"),children:[e.jsx(ns,{className:"h-5 w-5 mr-2",strokeWidth:2}),"Поделиться достижениями"]})]})]})]})}),e.jsx("div",{className:"px-4",children:e.jsxs(Fs,{defaultValue:"mood",children:[e.jsxs(Ss,{className:"grid w-full grid-cols-3",children:[e.jsx(we,{value:"mood",children:"Настроение"}),e.jsx(we,{value:"categories",children:"Категории"}),e.jsx(we,{value:"insights",children:"Инсайты"})]}),e.jsx(Ne,{value:"mood",className:"mt-4",children:e.jsxs(X,{children:[e.jsx(se,{children:e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-pink-500",strokeWidth:2}),"Анализ настроения"]})}),e.jsxs(K,{children:[e.jsx("div",{className:"space-y-4",children:p.moodDistribution.map((c,f)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:c.mood}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:c.label}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[c.count," записей"]})]}),e.jsx(_s,{value:c.percentage,className:"h-2"})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.percentage,"%"]})]},`${c.label}-${f}`))}),e.jsx("div",{className:"mt-6 p-4 bg-pink-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-pink-800",children:[e.jsx("strong",{children:"Вывод AI:"})," В этом месяце преобладали позитивные эмоции. Особенно заметен рост записей с восторгом - это говорит о том, что ты активнее достигаешь своих целей! 🎉"]})})]})]})}),e.jsx(Ne,{value:"categories",className:"mt-4",children:e.jsxs(X,{children:[e.jsx(se,{children:e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"h-5 w-5 text-blue-500",strokeWidth:2}),"Категории активности"]})}),e.jsxs(K,{children:[e.jsx("div",{className:"space-y-4",children:p.topCategories.map((c,f)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm",children:f+1})}),e.jsxs("div",{children:[e.jsx("h4",{children:c.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.count," записей"]})]})]}),e.jsxs(ue,{variant:c.trend.startsWith("+")?"default":c.trend.startsWith("-")?"destructive":"secondary",children:[c.trend.startsWith("+")&&e.jsx(os,{className:"h-3 w-3 mr-1",strokeWidth:2}),c.trend]})]},c.name))}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Наблюдение AI:"})," Твой фокус на спорте значительно усилился. Это отличная тенденция для здоровья и дисциплины! 💪"]})})]})]})}),e.jsx(Ne,{value:"insights",className:"mt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(X,{children:[e.jsx(se,{children:e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5 text-[var(--ios-purple)]",strokeWidth:2}),"Персональные инсайты"]})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-3",children:p.personalInsights.map((c,f)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-[var(--ios-bg-secondary)] rounded-lg",children:[e.jsx(te,{className:"h-5 w-5 text-[var(--ios-purple)] flex-shrink-0 mt-0.5",strokeWidth:2}),e.jsx("p",{className:"text-sm text-foreground",children:c})]},f))})})]}),e.jsxs(X,{children:[e.jsx(se,{children:e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5 text-yellow-500",strokeWidth:2}),"AI цитаты месяца"]})}),e.jsx(K,{children:e.jsx("div",{className:"space-y-3",children:n.map((c,f)=>e.jsx("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border-l-4 border-yellow-400",children:e.jsxs("p",{className:"text-sm text-foreground italic",children:['"',c,'"']})},f))})})]}),e.jsxs(X,{children:[e.jsx(se,{children:e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-5 w-5 text-[var(--ios-green)]",strokeWidth:2}),"Рекомендации на следующий месяц"]})}),e.jsx(K,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-[var(--ios-bg-secondary)] rounded-lg",children:[e.jsx("h4",{className:"text-[var(--ios-green)] mb-1",children:"Продолжай бегать"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ты на правильном пути к цели в 10км!"})]}),e.jsxs("div",{className:"p-3 bg-[var(--ios-bg-secondary)] rounded-lg",children:[e.jsx("h4",{className:"text-[var(--ios-blue)] mb-1",children:"Больше записей о работе"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Попробуй фиксировать небольшие рабочие победы"})]}),e.jsxs("div",{className:"p-3 bg-[var(--ios-bg-secondary)] rounded-lg",children:[e.jsx("h4",{className:"text-[var(--ios-purple)] mb-1",children:"Новая категория"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Как насчет добавить записи о творчестве?"})]})]})})]})]})})]})})]})}const za=Object.freeze(Object.defineProperty({__proto__:null,ReportsScreen:ga},Symbol.toStringTag,{value:"Module"})),W=({icon:t,iconColor:s="text-[var(--ios-blue)]",iconBgColor:r="bg-[var(--ios-blue)]/10",title:a,description:i,onClick:o,rightElement:m="chevron",switchChecked:d=!1,onSwitchChange:h,customRightElement:x,className:g,disabled:p=!1})=>{const n=f=>{if(m==="switch"&&h&&!p&&!f.target.closest('[role="switch"]')){h(!d);return}o&&o()},c=f=>{!p&&h&&h(f)};return e.jsxs("div",{onClick:n,className:he("flex items-center justify-between p-row transition-colors","min-h-[44px]",m==="switch"&&!p&&"cursor-pointer hover:bg-muted active:bg-accent/10",!p&&o&&m!=="switch"&&"cursor-pointer hover:bg-muted active:bg-accent/10",p&&o&&"cursor-pointer hover:bg-muted active:bg-accent/10",g),children:[e.jsxs("div",{className:"flex items-center gap-responsive-md flex-1 min-w-0",children:[e.jsx("div",{className:he("p-2.5 rounded-xl shrink-0",r),children:e.jsx(t,{className:he("h-5 w-5",s),strokeWidth:2})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-headline text-foreground leading-tight",children:a}),i&&e.jsx("p",{className:"text-footnote text-muted-foreground mt-0.5 leading-tight",children:i})]})]}),e.jsxs("div",{className:"shrink-0 ml-3",children:[m==="chevron"&&e.jsx(ht,{className:"h-5 w-5 text-muted-foreground",strokeWidth:2}),m==="switch"&&e.jsx(Bs,{checked:d,onCheckedChange:c,disabled:p}),m==="custom"&&x]})]})},oe=({title:t,children:s,className:r})=>e.jsxs("div",{className:he("px-4 pt-6 pb-2",r),children:[e.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider px-2 mb-3",children:t}),e.jsx("div",{className:"bg-card rounded-2xl shadow-sm border-0 overflow-hidden divide-y divide-border transition-colors duration-300",children:s})]});function va({open:t,onClose:s}){const r=[{title:"Премиум-темы",description:"Закат, Океан, Лес - эксклюзивные цветовые схемы",icon:"🎨"},{title:"Автоматическое резервирование",description:"Облачное сохранение данных каждый день",icon:"☁️"},{title:"Расширенный экспорт",description:"Экспорт в JSON, CSV и ZIP форматах",icon:"📦"},{title:"Приоритетная поддержка",description:"Ответ на ваши вопросы в течение 24 часов",icon:"⚡"},{title:"Расширенная аналитика",description:"Детальные отчеты и графики прогресса",icon:"📊"},{title:"Без рекламы",description:"Никаких отвлекающих баннеров и объявлений",icon:"🚫"}];return e.jsx(L,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"fixed inset-0 bg-black/40 z-modal-backdrop backdrop-blur-sm"}),e.jsxs(u.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"modal-bottom-sheet z-modal bg-card p-modal max-w-md mx-auto overflow-y-auto border-t border-border transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-responsive-sm",children:[e.jsx(me,{className:"h-6 w-6 text-yellow-500"}),e.jsx("h3",{className:"text-title-2 text-foreground",children:"UNITY Premium"})]}),e.jsx("button",{onClick:s,className:"p-1 hover:bg-accent/10 rounded-full transition-colors",children:e.jsx($,{className:"w-5 h-5 text-foreground"})})]}),e.jsx("p",{className:"text-footnote text-muted-foreground mb-6",children:"Получите максимум от вашего дневника достижений"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 p-modal rounded-lg border-2 border-yellow-500/20",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-large-title text-foreground",children:["$4.99",e.jsx("span",{className:"text-headline text-muted-foreground",children:"/месяц"})]}),e.jsx("p",{className:"text-footnote text-muted-foreground mt-2",children:"или $49.99/год (экономия 17%)"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-headline text-foreground",children:"Что входит в Premium:"}),r.map((a,i)=>e.jsxs("div",{className:"flex items-start gap-responsive-sm",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-500/10 rounded-full flex items-center justify-center",children:e.jsx(mt,{className:"h-4 w-4 text-green-700 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-responsive-sm",children:[e.jsx("span",{className:"text-headline",children:a.icon}),e.jsx("h5",{className:"text-footnote font-semibold",children:a.title})]}),e.jsx("p",{className:"text-caption-1 text-muted-foreground mt-1",children:a.description})]})]},i))]}),e.jsxs("div",{className:"space-y-3 pt-4",children:[e.jsxs(Y,{className:"w-full bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-600 hover:to-orange-600 text-white font-semibold",onClick:()=>{b.info("Функция покупки Premium будет доступна в следующей версии"),s()},children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Получить Premium"]}),e.jsx(Y,{variant:"outline",className:"w-full",onClick:s,children:"Может быть позже"})]}),e.jsxs("div",{className:"text-center text-caption-1 text-muted-foreground pt-2 border-t border-border",children:[e.jsx("p",{children:"✨ 7 дней бесплатно для новых пользователей"}),e.jsx("p",{className:"mt-1",children:"Отмена подписки в любое время"})]})]})]})]})})}const ct="https://cdn.shadcnstudio.com/ss-assets/avatar/avatar-5.png";function ba({isOpen:t,onClose:s,profile:r,onProfileUpdated:a}){const[i,o]=l.useState(r?.name||""),[m,d]=l.useState(r?.email||""),[h,x]=l.useState(r?.avatar||""),[g,p]=l.useState(null),[n,c]=l.useState(!1),[f,w]=l.useState(!1),y=l.useRef(null),v=async k=>{const B=k.target.files?.[0];if(B){if(!B.type.startsWith("image/")){b.error("Неверный формат файла",{description:"Пожалуйста, выберите изображение"});return}if(B.size>15*1024*1024){b.error("Файл слишком большой",{description:"Максимальный размер: 15 МБ"});return}try{c(!0);const S=await At(B,{maxWidth:512,maxHeight:512,quality:B.size>5*1024*1024?.7:.8}),I=URL.createObjectURL(S);x(I),p(S),b.success("Фото выбрано",{description:'Нажмите "Сохранить" для применения изменений'})}catch{b.error("Ошибка обработки фото",{description:"Попробуйте другое изображение"})}finally{c(!1)}}},C=async()=>{if(!r?.id){b.error("Ошибка",{description:"ID пользователя не найден"});return}if(!i.trim()){b.error("Введите имя",{description:"Имя не может быть пустым"});return}if(!m.trim()||!m.includes("@")){b.error("Неверный email",{description:"Введите корректный email адрес"});return}try{w(!0);let k=r.avatar;if(g)try{const I=await Ct(g,r.id);I&&I.url&&(k=I.url)}catch{b.error("Ошибка загрузки фото",{description:"Профиль будет сохранен без нового фото"})}const B=m.trim()!==r.email;if(B)try{const I=V(),{error:G}=await I.auth.updateUser({email:m.trim()});if(G)throw G;b.info("Подтвердите новый email",{description:"Мы отправили письмо для подтверждения на новый адрес"})}catch{b.error("Ошибка смены email",{description:"Не удалось изменить email. Попробуйте позже"})}const S=await ce(r.id,{name:i.trim(),avatar:k,email:m.trim()});b.success("Профиль обновлен",{description:B?"Изменения сохранены. Проверьте email для подтверждения":"Изменения успешно сохранены"}),a&&a(S),s()}catch{b.error("Ошибка сохранения",{description:"Попробуйте еще раз"})}finally{w(!1)}},j=async()=>{if(!r?.id){b.error("Ошибка",{description:"ID пользователя не найден"});return}try{w(!0);const k=await ce(r.id,{avatar:""});x(""),p(null),a&&a(k),b.success("Фото удалено",{description:"Изменения сохранены"})}catch{b.error("Ошибка удаления фото",{description:"Попробуйте еще раз"})}finally{w(!1)}},_=()=>{o(r?.name||""),d(r?.email||""),x(r?.avatar||""),p(null),s()};return e.jsx(L,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:f?void 0:_,className:"fixed inset-0 bg-black/40 z-modal-backdrop backdrop-blur-sm"}),e.jsxs(u.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"modal-bottom-sheet z-modal bg-card p-modal max-w-md mx-auto overflow-y-auto border-t border-border transition-colors duration-300 max-h-[85vh]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-title-3 text-foreground",children:"Редактировать профиль"}),e.jsx("button",{onClick:_,disabled:f,className:"p-1 hover:bg-accent/10 rounded-full transition-colors disabled:opacity-50",children:e.jsx($,{className:"w-5 h-5 text-foreground"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(L,{children:h&&!n&&e.jsx(u.button,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},onClick:j,className:"absolute -top-2 -right-2 z-10 p-2 bg-destructive text-destructive-foreground rounded-full shadow-lg hover:bg-destructive/90 active:scale-95 transition-all ring-4 ring-background","aria-label":"Remove photo",title:"Удалить фото",children:e.jsx($,{className:"h-4 w-4",strokeWidth:2.5})})}),e.jsxs("div",{className:"relative",children:[e.jsxs(Ie,{className:"h-32 w-32 border-4 border-border transition-all duration-300 group-hover:border-primary/50",children:[e.jsx(Te,{src:h||ct,alt:i,className:"object-cover"}),e.jsx(Re,{className:"bg-muted",children:e.jsx("img",{src:ct,alt:"Default avatar",className:"h-full w-full object-cover"})})]}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center cursor-pointer",onClick:()=>!n&&y.current?.click(),children:n?e.jsx(Be,{className:"h-8 w-8 text-white animate-spin",strokeWidth:2}):e.jsx(ge,{className:"h-8 w-8 text-white",strokeWidth:2})})]})]}),e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:h?"Изменить фото профиля":"Добавить фото профиля"}),e.jsx("p",{className:"text-xs font-normal text-muted-foreground",children:"JPG, PNG или GIF • Макс. 15 МБ"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-foreground",children:"Имя"}),e.jsx(fe,{type:"text",value:i,onChange:k=>o(k.target.value),placeholder:"Введите ваше имя",disabled:f,maxLength:50}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.length,"/50 символов"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-foreground",children:"Email"}),e.jsx(fe,{type:"email",value:m,onChange:k=>d(k.target.value),placeholder:"your@email.com",maxLength:100,disabled:f}),e.jsx("p",{className:"text-xs text-muted-foreground",children:m!==r?.email?"После смены email потребуется подтверждение":"Введите новый email для изменения"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-border",children:[e.jsx(Y,{variant:"outline",onClick:_,disabled:f,className:"flex-1",children:"Отмена"}),e.jsx(Y,{onClick:C,disabled:f||n||!i.trim(),className:"flex-1",children:f?"Сохранение...":"Сохранить"})]}),e.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:v,className:"hidden","aria-label":"Select avatar image"})]})]})})}const dt="https://cdn.shadcnstudio.com/ss-assets/avatar/avatar-5.png";function ya({userData:t,onLogout:s,onProfileUpdate:r}){const a=t?.profile||t,[i,o]=l.useState(a),m=ve(i?.language||"ru"),[d,h]=l.useState({dailyReminder:i?.notificationSettings?.dailyReminder||!1,weeklyReport:i?.notificationSettings?.weeklyReport||!1,achievements:i?.notificationSettings?.achievements||!1,motivational:i?.notificationSettings?.motivational||!1}),[x,g]=l.useState(i?.biometricEnabled||!1),[p,n]=l.useState(i?.backupEnabled||!1),[c,f]=l.useState(!1),[w,y]=l.useState(!1),[v,C]=l.useState(!1),[j,_]=l.useState(!1),[k,B]=l.useState(!1),[S,I]=l.useState(!1),[G,A]=l.useState(!1),[N,z]=l.useState(!1),q=[{code:"ru",name:"Russian",native_name:"Русский",flag:"🇷🇺",is_active:!0},{code:"en",name:"English",native_name:"English",flag:"🇺🇸",is_active:!0},{code:"es",name:"Spanish",native_name:"Español",flag:"🇪🇸",is_active:!0},{code:"de",name:"German",native_name:"Deutsch",flag:"🇩🇪",is_active:!0},{code:"fr",name:"French",native_name:"Français",flag:"🇫🇷",is_active:!0},{code:"zh",name:"Chinese",native_name:"中文",flag:"🇨🇳",is_active:!0},{code:"ja",name:"Japanese",native_name:"日本語",flag:"🇯🇵",is_active:!0}];l.useEffect(()=>{(async()=>{if(window.PublicKeyCredential)try{const E=await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();f(E)}catch{f(!1)}})()},[]),l.useEffect(()=>{const F=t?.profile||t;F&&F.id!==i?.id&&o(F)},[t]),l.useEffect(()=>{i?.notificationSettings&&h({dailyReminder:i.notificationSettings.dailyReminder||!1,weeklyReport:i.notificationSettings.weeklyReport||!1,achievements:i.notificationSettings.achievements||!1,motivational:i.notificationSettings.motivational||!1}),i?.biometricEnabled!==void 0&&g(i.biometricEnabled),i?.backupEnabled!==void 0&&n(i.backupEnabled)},[i?.id]),l.useEffect(()=>{const E=setTimeout(async()=>{const M=i?.id;if(M)try{await ce(M,{notificationSettings:{...i.notificationSettings,...d}})}catch{}},1e3);return()=>clearTimeout(E)},[d,i?.id]),l.useEffect(()=>{const E=setTimeout(async()=>{const M=i?.id;if(M)try{await ce(M,{biometricEnabled:x,backupEnabled:p})}catch{}},1e3);return()=>clearTimeout(E)},[x,p,i?.id]);const Z=()=>{s&&s()},O=async F=>{try{const E=i?.id;E&&await ce(E,{language:F}),b.success("Язык изменен! Перезагрузите страницу."),C(!1),setTimeout(()=>{window.location.reload()},1e3)}catch{b.error("Ошибка при изменении языка")}};return e.jsxs("div",{className:"pb-20 min-h-screen bg-background",children:[e.jsx("div",{className:"bg-card border-b border-border pt-12 pb-6 transition-colors duration-300",children:e.jsx("h1",{className:"text-center text-lg font-semibold text-foreground",children:i?.name||"Мой аккаунт"})}),e.jsx("div",{className:"bg-card px-6 py-8 border-b border-border transition-colors duration-300",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(Ie,{className:"h-24 w-24 ring-4 ring-primary/10",children:[e.jsx(Te,{src:i?.avatar||dt,alt:i?.name}),e.jsx(Re,{className:"bg-muted",children:e.jsx("img",{src:dt,alt:"Default avatar",className:"h-full w-full object-cover"})})]}),e.jsx("button",{onClick:()=>y(!0),className:"absolute bottom-0 right-0 p-2 bg-card rounded-full shadow-lg border border-border hover:bg-muted transition-colors","aria-label":"Edit profile",children:e.jsx(cs,{className:"h-5 w-5 text-foreground",strokeWidth:2})})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:i?.email})})]})}),e.jsxs(oe,{title:m.notifications||"Уведомления",children:[e.jsx(W,{icon:Ee,iconColor:"text-[var(--ios-blue)]",iconBgColor:"bg-[var(--ios-blue)]/10",title:m.dailyReminders||"Ежедневные напоминания",description:"Напоминания о записях",rightElement:"switch",switchChecked:d.dailyReminder,onSwitchChange:F=>h(E=>({...E,dailyReminder:F}))}),e.jsx(W,{icon:Ae,iconColor:"text-[var(--ios-purple)]",iconBgColor:"bg-[var(--ios-purple)]/10",title:m.weeklyReports||"Еженедельные отчеты",description:"Статистика за неделю",rightElement:"switch",switchChecked:d.weeklyReport,onSwitchChange:F=>h(E=>({...E,weeklyReport:F}))}),e.jsx(W,{icon:te,iconColor:"text-[var(--ios-green)]",iconBgColor:"bg-[var(--ios-green)]/10",title:m.newAchievements||"Новые достижения",description:"Уведомления о наградах",rightElement:"switch",switchChecked:d.achievements,onSwitchChange:F=>h(E=>({...E,achievements:F}))}),e.jsx(W,{icon:me,iconColor:"text-[var(--ios-orange)]",iconBgColor:"bg-[var(--ios-orange)]/10",title:m.motivationalMessages||"Мотивационные сообщения",description:"Мотивационные карточки",rightElement:"switch",switchChecked:d.motivational,onSwitchChange:F=>h(E=>({...E,motivational:F}))})]}),e.jsx(oe,{title:m.themes||"Темы оформления",children:e.jsx(W,{icon:ds,iconColor:"text-[var(--ios-purple)]",iconBgColor:"bg-[var(--ios-purple)]/10",title:m.appearance||"Внешний вид",description:m.appearanceDescription||"Переключение темы",rightElement:"custom",customRightElement:e.jsx(Is,{})})}),e.jsxs(oe,{title:m.security||"Безопасность",children:[e.jsx(W,{icon:ms,iconColor:"text-[var(--ios-blue)]",iconBgColor:"bg-[var(--ios-blue)]/10",title:m.biometricProtection||"Биометрическая защита",description:c?"Доступно":"Недоступно в браузере",rightElement:"switch",switchChecked:x,onSwitchChange:g,disabled:!c}),e.jsx(W,{icon:us,iconColor:"text-[var(--ios-green)]",iconBgColor:"bg-[var(--ios-green)]/10",title:m.autoBackup||"Автоматическое резервирование",description:t?.isPremium?"Премиум функция":"Требуется премиум",rightElement:"switch",switchChecked:p,onSwitchChange:F=>{!t?.isPremium&&F?A(!0):n(F)},onClick:()=>{t?.isPremium||A(!0)},disabled:!t?.isPremium})]}),e.jsxs(oe,{title:m.additional||"Дополнительно",children:[e.jsx(W,{icon:xs,iconColor:"text-[var(--ios-indigo)]",iconBgColor:"bg-[var(--ios-indigo)]/10",title:m.language||"Язык",description:i?.language==="ru"?"Русский":"English",onClick:()=>C(!0)}),e.jsx(W,{icon:Ae,iconColor:"text-[var(--ios-blue)]",iconBgColor:"bg-[var(--ios-blue)]/10",title:m.firstDayOfWeek||"Первый день недели",description:t?.firstDayOfWeek==="monday"?"Понедельник":"Воскресенье",onClick:()=>b.info("Feature coming soon")}),e.jsx(W,{icon:bt,iconColor:"text-[var(--ios-green)]",iconBgColor:"bg-[var(--ios-green)]/10",title:m.exportData||"Экспортировать данные",description:"JSON, CSV, ZIP",onClick:()=>b.info("Feature coming soon")}),e.jsx(W,{icon:ps,iconColor:"text-[var(--ios-purple)]",iconBgColor:"bg-[var(--ios-purple)]/10",title:m.importData||"Импортировать данные",description:"Восстановить из файла",onClick:()=>b.info("Feature coming soon")}),e.jsx(W,{icon:gt,iconColor:"text-[var(--ios-red)]",iconBgColor:"bg-[var(--ios-red)]/10",title:m.deleteAllData||"Удалить все данные",description:"Необратимое действие",onClick:()=>b.error("Требуется подтверждение")})]}),e.jsxs(oe,{title:m.support||"Поддержка",children:[e.jsx(W,{icon:hs,iconColor:"text-[var(--ios-blue)]",iconBgColor:"bg-[var(--ios-blue)]/10",title:m.contactSupport||"Связаться с поддержкой",description:"Напишите нам",onClick:()=>_(!0)}),e.jsx(W,{icon:te,iconColor:"text-[var(--ios-yellow)]",iconBgColor:"bg-[var(--ios-yellow)]/10",title:m.rateApp||"Оценить приложение",description:"Поделитесь отзывом",onClick:()=>B(!0)}),e.jsx(W,{icon:fs,iconColor:"text-[var(--ios-green)]",iconBgColor:"bg-[var(--ios-green)]/10",title:m.faq||"FAQ",description:"Часто задаваемые вопросы",onClick:()=>I(!0)}),e.jsx(W,{icon:gs,iconColor:"text-[var(--ios-purple)]",iconBgColor:"bg-[var(--ios-purple)]/10",title:m.installPWA||"Установить приложение",description:"PWA на главный экран",onClick:()=>z(!0)})]}),e.jsx("div",{className:"px-4 pt-6 pb-8",children:e.jsxs(Y,{onClick:Z,variant:"outline",className:"w-full h-14 text-red-600 border-red-200 hover:bg-red-50 hover:border-red-300 font-medium",children:[e.jsx(vs,{className:"h-5 w-5 mr-2",strokeWidth:2}),m.logout||"Выйти"]})}),e.jsx(L,{children:S&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>I(!1),className:"fixed inset-0 bg-black/40 z-modal-backdrop backdrop-blur-sm"}),e.jsxs(u.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"modal-bottom-sheet z-modal bg-card p-modal max-w-md mx-auto overflow-y-auto border-t border-border transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-title-3 text-foreground",children:m.faq||"FAQ"}),e.jsx("button",{onClick:()=>I(!1),className:"p-1 hover:bg-accent/10 rounded-full transition-colors",children:e.jsx($,{className:"w-5 h-5 text-foreground"})})]}),e.jsx("p",{className:"text-footnote text-muted-foreground mb-4",children:"Часто задаваемые вопросы"}),e.jsxs(Ts,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(re,{value:"item-1",children:[e.jsx(ne,{children:"Как создать запись в дневнике?"}),e.jsx(le,{children:'Нажмите кнопку "+" на главном экране, опишите ваше достижение или неудачу, и AI автоматически проанализирует запись.'})]}),e.jsxs(re,{value:"item-2",children:[e.jsx(ne,{children:"Как работает AI-анализ?"}),e.jsx(le,{children:"AI анализирует вашу запись, определяет тип события (достижение/неудача), эмоциональный тон и создает мотивационную карточку с советами."})]}),e.jsxs(re,{value:"item-3",children:[e.jsx(ne,{children:"Что такое мотивационные карточки?"}),e.jsx(le,{children:"Это персонализированные сообщения от AI, которые помогают вам развивать полезные привычки на основе ваших записей."})]}),e.jsxs(re,{value:"item-4",children:[e.jsx(ne,{children:"Как получить премиум-доступ?"}),e.jsx(le,{children:"Премиум-функции включают дополнительные темы, автоматическое резервирование и расширенную аналитику. Свяжитесь с поддержкой для подключения."})]}),e.jsxs(re,{value:"item-5",children:[e.jsx(ne,{children:"Как экспортировать данные?"}),e.jsx(le,{children:"Перейдите в Настройки → Дополнительно → Экспортировать данные. Доступны форматы JSON, CSV и ZIP."})]})]})]})]})}),e.jsx(L,{children:j&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>_(!1),className:"fixed inset-0 bg-black/40 z-modal-backdrop backdrop-blur-sm"}),e.jsxs(u.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"modal-bottom-sheet z-modal bg-card p-modal max-w-md mx-auto overflow-y-auto border-t border-border transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-title-3 text-foreground",children:m.contactSupport||"Связаться с поддержкой"}),e.jsx("button",{onClick:()=>_(!1),className:"p-1 hover:bg-accent/10 rounded-full transition-colors",children:e.jsx($,{className:"w-5 h-5 text-foreground"})})]}),e.jsx("p",{className:"text-footnote text-muted-foreground mb-4",children:"Напишите нам, и мы ответим в течение 24 часов"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-footnote font-medium text-foreground mb-1 block",children:"Email"}),e.jsx(fe,{type:"email",value:i?.email||"",disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-footnote font-medium text-foreground mb-1 block",children:"Тема обращения"}),e.jsx(fe,{type:"text",placeholder:"Например: Проблема с AI-анализом"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-footnote font-medium text-foreground mb-1 block",children:"Сообщение"}),e.jsx(Je,{placeholder:"Опишите вашу проблему или вопрос...",rows:6})]}),e.jsx(Y,{onClick:()=>{b.success("Сообщение отправлено! Мы ответим в течение 24 часов."),_(!1)},className:"w-full",children:"Отправить"})]})]})]})}),e.jsx(L,{children:k&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>B(!1),className:"fixed inset-0 bg-black/40 z-modal-backdrop backdrop-blur-sm"}),e.jsxs(u.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"modal-bottom-sheet z-modal bg-card p-modal max-w-md mx-auto overflow-y-auto border-t border-border transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-title-3 text-foreground",children:"Оценить приложение"}),e.jsx("button",{onClick:()=>B(!1),className:"p-1 hover:bg-accent/10 rounded-full transition-colors",children:e.jsx($,{className:"w-5 h-5 text-foreground"})})]}),e.jsx("p",{className:"text-footnote text-muted-foreground mb-6",children:"Ваше мнение помогает нам стать лучше"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-footnote font-medium text-foreground",children:"Ваша оценка"}),e.jsx("div",{className:"flex gap-responsive-sm justify-center py-4",children:[1,2,3,4,5].map(F=>e.jsx("button",{type:"button",className:"transition-transform hover:scale-110",children:e.jsx(te,{className:"h-10 w-10 fill-yellow-400 text-yellow-400"})},F))}),e.jsx("p",{className:"text-center text-footnote text-muted-foreground",children:"Отлично! 🎉"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-footnote font-medium text-foreground",children:"Комментарий (необязательно)"}),e.jsx(Je,{placeholder:"Расскажите, что вам понравилось или что можно улучшить...",rows:4,className:"resize-none"})]}),e.jsx(Y,{onClick:()=>{b.success("Спасибо за вашу оценку! ⭐"),B(!1)},className:"w-full",children:"Отправить отзыв"})]})]})]})}),e.jsx(L,{children:v&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>C(!1),className:"fixed inset-0 bg-black/40 z-modal-backdrop backdrop-blur-sm"}),e.jsxs(u.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"modal-bottom-sheet z-modal bg-card p-modal max-w-md mx-auto overflow-y-auto border-t border-border transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-title-3 text-foreground",children:m.language||"Выбрать язык"}),e.jsx("button",{onClick:()=>C(!1),className:"p-1 hover:bg-accent/10 rounded-full transition-colors",children:e.jsx($,{className:"w-5 h-5 text-foreground"})})]}),e.jsx("p",{className:"text-footnote text-muted-foreground mb-4",children:"Выберите язык интерфейса приложения"}),e.jsx("div",{className:"space-y-2",children:q.map(F=>e.jsxs("button",{onClick:()=>O(F.code),className:`w-full flex items-center justify-between p-4 rounded-xl transition-all ${i?.language===F.code?"bg-primary/10 border-2 border-primary":"bg-card border border-border hover:bg-accent/5"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:F.flag}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-foreground",children:F.native_name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:F.name})]})]}),i?.language===F.code&&e.jsx("div",{className:"p-1.5 bg-primary rounded-full",children:e.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]},F.code))})]})]})}),e.jsx(L,{children:N&&e.jsxs(e.Fragment,{children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>z(!1),className:"fixed inset-0 bg-black/40 z-modal-backdrop backdrop-blur-sm"}),e.jsxs(u.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"modal-bottom-sheet z-modal bg-card p-modal max-w-md mx-auto overflow-y-auto border-t border-border transition-colors duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-title-3 text-foreground",children:m.installPWA||"Установить приложение"}),e.jsx("button",{onClick:()=>z(!1),className:"p-1 hover:bg-accent/10 rounded-full transition-colors",children:e.jsx($,{className:"w-5 h-5 text-foreground"})})]}),e.jsx("p",{className:"text-footnote text-muted-foreground mb-4",children:"Добавьте UNITY на главный экран"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-headline text-blue-900 mb-2",children:"iOS (Safari)"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-footnote text-blue-800",children:[e.jsx("li",{children:'Нажмите кнопку "Поделиться" внизу экрана'}),e.jsx("li",{children:'Выберите "На экран Домой"'}),e.jsx("li",{children:'Нажмите "Добавить"'})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-headline text-green-900 mb-2",children:"Android (Chrome)"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-footnote text-green-800",children:[e.jsx("li",{children:"Нажмите меню (три точки) в правом верхнем углу"}),e.jsx("li",{children:'Выберите "Установить приложение"'}),e.jsx("li",{children:'Нажмите "Установить"'})]})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-purple-900 mb-2",children:"Преимущества PWA"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-purple-800",children:[e.jsx("li",{children:"Работает офлайн"}),e.jsx("li",{children:"Быстрая загрузка"}),e.jsx("li",{children:"Иконка на главном экране"}),e.jsx("li",{children:"Полноэкранный режим"})]})]})]})]})]})}),e.jsx(va,{open:G,onClose:()=>A(!1)}),e.jsx(ba,{isOpen:w,onClose:()=>y(!1),profile:{id:i?.id||"",name:i?.name||"",email:i?.email||"",avatar:i?.avatar||""},onProfileUpdated:F=>{o(F),r&&r(F)}})]})}const Ma=Object.freeze(Object.defineProperty({__proto__:null,SettingsScreen:ya},Symbol.toStringTag,{value:"Module"}));export{Ba as A,Fa as O,Aa as W,Sa as a,_a as b,Ea as c,Ta as d,Ra as e,za as f,Ma as g,Ia as i,ka as s};
