# üìä Streak Count Requirements & Analysis

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-19  
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è –æ—Ç –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ù–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ (AchievementHomeScreen) –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–∞ `rustam@leadshunter.biz` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **"1 –¥–µ–Ω—å –ø–æ–¥—Ä—è–¥"**, —Ö–æ—Ç—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–∂–∏–¥–∞–µ—Ç —É–≤–∏–¥–µ—Ç—å –±–æ–ª—å—à–µ –¥–Ω–µ–π.

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### **–ê–∫–∫–∞—É–Ω—Ç: rustam@leadshunter.biz**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **User ID** | `726a9369-8c28-4134-b03f-3c29ad1235f4` |
| **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è** | 2025-10-14 20:20:21 UTC |
| **–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π** | 17 |
| **–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –¥–Ω–µ–π —Å –∑–∞–ø–∏—Å—è–º–∏** | 7 |

### **–ó–∞–ø–∏—Å–∏ –ø–æ –¥–∞—Ç–∞–º:**

| –î–∞—Ç–∞ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π | –ü–µ—Ä–≤–∞—è –∑–∞–ø–∏—Å—å | –ü–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å |
|------|-------------------|---------------|------------------|
| **2025-10-19** (—Å–µ–≥–æ–¥–Ω—è) | 1 | 10:01:27 | 10:01:27 |
| **2025-10-18** | 0 | - | - |
| **2025-10-17** | 10 | 05:26:31 | 07:07:50 |
| **2025-10-16** | 0 | - | - |
| **2025-10-15** | 0 | - | - |
| **2025-10-14** | 0 | - | - |
| **2025-10-13** | 1 | 21:05:50 | 21:05:50 |
| **2025-10-12** | 1 | 21:05:50 | 21:05:50 |
| **2025-10-11** | 1 | 21:05:50 | 21:05:50 |
| **2025-10-10** | 1 | 21:05:50 | 21:05:50 |
| **2025-10-09** | 1 | 21:05:50 | 21:05:50 |

---

## üîç –ê–Ω–∞–ª–∏–∑ Streak

### **1. Current Streak (–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–Ω–µ–π)**

**–õ–æ–≥–∏–∫–∞:**
- –°—á–∏—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –¥–Ω–∏ —Å –∑–∞–ø–∏—Å—è–º–∏, –Ω–∞—á–∏–Ω–∞—è —Å —Å–µ–≥–æ–¥–Ω—è –∏–ª–∏ –≤—á–µ—Ä–∞
- –ï—Å–ª–∏ –ø—Ä–æ–ø—É—â–µ–Ω —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –¥–µ–Ω—å, streak –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è

**–†–∞—Å—á–µ—Ç –¥–ª—è rustam@leadshunter.biz:**
- –°–µ–≥–æ–¥–Ω—è (2025-10-19): ‚úÖ –ï—Å—Ç—å –∑–∞–ø–∏—Å—å
- –í—á–µ—Ä–∞ (2025-10-18): ‚ùå –ù–µ—Ç –∑–∞–ø–∏—Å–∏ ‚Üí **Streak –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è**
- **Current Streak = 1 –¥–µ–Ω—å**

**–ö–æ–¥:** `src/utils/statsCalculator.ts` (lines 26-65)

```typescript
if (daysDiff <= 1) {
  currentStreak = 1;
  
  for (let i = 1; i < sorted.length; i++) {
    const currentDate = new Date(sorted[i].createdAt);
    currentDate.setHours(0, 0, 0, 0);
    
    const diff = Math.floor((lastDate.getTime() - currentDate.getTime()) / (1000 * 60 * 60 * 24));
    
    if (diff === 1) {
      currentStreak++;
      tempStreak++;
    } else if (diff > 1) {
      break; // –ü—Ä–µ—Ä—ã–≤–∞–µ–º –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –¥–Ω—è
    }
    
    lastDate = currentDate;
  }
}
```

---

### **2. Longest Streak (–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–µ—Ä–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–Ω–µ–π)**

**–õ–æ–≥–∏–∫–∞:**
- –ù–∞—Ö–æ–¥–∏—Ç —Å–∞–º—É—é –¥–ª–∏–Ω–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–Ω–µ–π —Å –∑–∞–ø–∏—Å—è–º–∏ –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è
- –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã

**–†–∞—Å—á–µ—Ç –¥–ª—è rustam@leadshunter.biz:**
- 2025-10-13: ‚úÖ
- 2025-10-12: ‚úÖ
- 2025-10-11: ‚úÖ
- 2025-10-10: ‚úÖ
- 2025-10-09: ‚úÖ
- **Longest Streak = 5 –¥–Ω–µ–π** (09-13 –æ–∫—Ç—è–±—Ä—è)

**–ö–æ–¥:** `src/utils/statsCalculator.ts` (lines 67-86)

---

### **3. Unique Days (–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –¥–Ω–∏ —Å –∑–∞–ø–∏—Å—è–º–∏)**

**–õ–æ–≥–∏–∫–∞:**
- –°—á–∏—Ç–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –¥–Ω–µ–π, –∫–æ–≥–¥–∞ –±—ã–ª–∏ —Å–¥–µ–ª–∞–Ω—ã –∑–∞–ø–∏—Å–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–†–∞—Å—á–µ—Ç –¥–ª—è rustam@leadshunter.biz:**
- 2025-10-19, 2025-10-17, 2025-10-13, 2025-10-12, 2025-10-11, 2025-10-10, 2025-10-09
- **Unique Days = 7 –¥–Ω–µ–π**

**–ö–æ–¥:** SQL –∑–∞–ø—Ä–æ—Å `COUNT(DISTINCT DATE(created_at))`

---

## üì± –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### **AchievementHomeScreen.tsx (lines 468, 508, 627)**

```typescript
const [currentStreak, setCurrentStreak] = useState(0);

// –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
const stats = await getUserStats(userId);
setCurrentStreak(stats.currentStreak);

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ
const daysInApp = currentStreak > 0 ? currentStreak : 1;
```

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: `"üôå –ü—Ä–∏–≤–µ—Ç {userName}"`
- –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫: `"{daysInApp} –î–µ–Ω—å"` –∏–ª–∏ `"{daysInApp} –î–Ω—è"` –∏–ª–∏ `"{daysInApp} –î–Ω–µ–π"`

**–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è rustam@leadshunter.biz:**
- `currentStreak = 1`
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è: **"1 –î–µ–Ω—å"**

---

## ‚ùì –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –û—Å—Ç–∞–≤–∏—Ç—å Current Streak (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)**

**–ü–ª—é—Å—ã:**
- ‚úÖ –ú–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–∏—Å–∞—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏–∫–µ "streak" –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö (Duolingo, Habitica)
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ú–æ–∂–µ—Ç –¥–µ–º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –æ–¥–Ω–æ–≥–æ –¥–Ω—è
- ‚ùå –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü—Ä–∏–º–µ—Ä:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—Å–∞–ª 5 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ (09-13 –æ–∫—Ç)
- –ü—Ä–æ–ø—É—Å—Ç–∏–ª 3 –¥–Ω—è (14-16 –æ–∫—Ç)
- –ù–∞–ø–∏—Å–∞–ª 1 –¥–µ–Ω—å (17 –æ–∫—Ç)
- –ü—Ä–æ–ø—É—Å—Ç–∏–ª 1 –¥–µ–Ω—å (18 –æ–∫—Ç)
- –ù–∞–ø–∏—Å–∞–ª —Å–µ–≥–æ–¥–Ω—è (19 –æ–∫—Ç)
- **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è: "1 –î–µ–Ω—å"**

---

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å Unique Days (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π)**

**–ü–ª—é—Å—ã:**
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ù–µ –¥–µ–º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –¥–Ω–µ–π
- ‚úÖ –ë–æ–ª–µ–µ –ø–æ–∑–∏—Ç–∏–≤–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ù–µ –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–∏—Å–∞—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
- ‚ùå –ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–Ω—è—Ç–∏—é "streak"

**–ü—Ä–∏–º–µ—Ä:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—Å–∞–ª 7 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –¥–Ω–µ–π
- **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è: "7 –î–Ω–µ–π"**

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:**
```typescript
// AchievementHomeScreen.tsx
const daysInApp = stats.uniqueDays > 0 ? stats.uniqueDays : 1;
```

---

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å Longest Streak (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–µ—Ä–∏—è)**

**–ü–ª—é—Å—ã:**
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ú–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–æ–±–∏—Ç—å —Å–≤–æ–π —Ä–µ–∫–æ—Ä–¥

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º (—Ä–µ–∫–æ—Ä–¥ –±—ã–ª –º–µ—Å—è—Ü –Ω–∞–∑–∞–¥)

**–ü—Ä–∏–º–µ—Ä:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–ª —Å–µ—Ä–∏—é 5 –¥–Ω–µ–π (09-13 –æ–∫—Ç)
- **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è: "5 –î–Ω–µ–π"**

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:**
```typescript
// AchievementHomeScreen.tsx
const daysInApp = stats.longestStreak > 0 ? stats.longestStreak : 1;
```

---

### **–í–∞—Ä–∏–∞–Ω—Ç 4: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

**–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å Current Streak + Longest Streak:**

```
üôå –ü—Ä–∏–≤–µ—Ç Rustam
1 –î–µ–Ω—å –ø–æ–¥—Ä—è–¥ üî• (–†–µ–∫–æ—Ä–¥: 5 –¥–Ω–µ–π)
```

**–ò–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å Current Streak + Unique Days:**

```
üôå –ü—Ä–∏–≤–µ—Ç Rustam
1 –î–µ–Ω—å –ø–æ–¥—Ä—è–¥ üî• (–í—Å–µ–≥–æ: 7 –¥–Ω–µ–π)
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å
- ‚úÖ –ú–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏ –ø–æ–±–∏–≤–∞—Ç—å —Ä–µ–∫–æ—Ä–¥—ã

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:**
```typescript
// AchievementHomeScreen.tsx
<h1 className="text-title-1 font-semibold text-foreground mb-1">
  üôå –ü—Ä–∏–≤–µ—Ç {userName}
</h1>
<p className="text-callout text-muted-foreground">
  {currentStreak} {getDayWord(currentStreak)} –ø–æ–¥—Ä—è–¥ üî• 
  <span className="opacity-60"> (–†–µ–∫–æ—Ä–¥: {longestStreak} {getDayWord(longestStreak)})</span>
</p>
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç 4 (–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥)** - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å Current Streak + Longest Streak –∏–ª–∏ Unique Days.

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç UX-–ø–∞—Ç—Ç–µ—Ä–Ω–∞–º –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (Duolingo, Strava)
2. –ú–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å streak
3. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å
4. –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –ø–æ–¥—Å—á–µ—Ç–∞ streak

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚è≥ **–£—Ç–æ—á–Ω–∏—Ç—å —É –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è:** –ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ?
2. ‚è≥ **–û–±–Ω–æ–≤–∏—Ç—å AchievementHomeScreen.tsx** —Å–æ–≥–ª–∞—Å–Ω–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –≤–∞—Ä–∏–∞–Ω—Ç—É
3. ‚è≥ **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
4. ‚è≥ **–û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** —Å —Ñ–∏–Ω–∞–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `src/features/mobile/home/components/AchievementHomeScreen.tsx` (lines 468, 508, 627)
- `src/utils/statsCalculator.ts` (lines 26-86)
- `src/shared/lib/api/statsCalculator.ts` (–¥—É–±–ª–∏–∫–∞—Ç)
- `supabase/functions/stats/index.ts` (backend streak calculation)

---

**–°—Ç–∞—Ç—É—Å:** ‚è≥ –û–∂–∏–¥–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è

