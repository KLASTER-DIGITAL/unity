# PWA Test Scenarios - –ü–ª–∞–Ω –†–∞–±–æ—Ç

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-10-23  
**–°—Ç–∞—Ç—É—Å**: üìã –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: P1 (–í–∞–∂–Ω–æ –¥–ª—è Production)  
**–°—Ä–æ–∫**: –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞ Vercel

---

## üéØ –¶–ï–õ–¨

–°–æ–∑–¥–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ production –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –Ω–∞ –¥–≤—É—Ö —É—Ä–æ–≤–Ω—è—Ö:
1. **Super-admin workflow** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PWA —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
2. **Regular user workflow** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PWA –∫–∞–∫ –∫–æ–Ω–µ—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

---

## üìã –ü–õ–ê–ù –†–ê–ë–û–¢

### –≠–¢–ê–ü 1: –ü–û–î–ì–û–¢–û–í–ö–ê –û–ö–†–£–ñ–ï–ù–ò–Ø (30 –º–∏–Ω—É—Ç)

#### 1.1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–ø–ª–æ–π –Ω–∞ Vercel
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ –Ω–∞ Vercel
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL: `https://unity-wine.vercel.app/`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å admin URL: `https://unity-wine.vercel.app/?view=admin`
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –≤ production –ë–î

#### 1.2. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω: `diary@leadshunter.biz` (role: super_admin)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `rustam@leadshunter.biz` (role: user)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–º–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `an@leadshunter.biz` (role: user, —Å –¥–∞–Ω–Ω—ã–º–∏)
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∫ production –ë–î

#### 1.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PWA –≤ –ë–î
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å admin_settings
SELECT key, value 
FROM admin_settings 
WHERE key IN ('pwa_settings', 'vapid_keys');

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å push_subscriptions
SELECT COUNT(*) as total_subscriptions,
       COUNT(CASE WHEN endpoint IS NOT NULL THEN 1 END) as active_subscriptions
FROM push_subscriptions;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å usage —Å–æ–±—ã—Ç–∏—è
SELECT operation_type, COUNT(*) as count
FROM usage
WHERE operation_type LIKE 'push_%'
GROUP BY operation_type;
```

---

### –≠–¢–ê–ü 2: –°–¶–ï–ù–ê–†–ò–ô 2.1 - SUPER-ADMIN WORKFLOW (2 —á–∞—Å–∞)

#### 2.1.1. –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞

**–®–∞–≥–∏**:
1. –û—Ç–∫—Ä—ã—Ç—å `https://unity-wine.vercel.app/?view=admin`
2. –í–≤–µ—Å—Ç–∏ email: `diary@leadshunter.biz`
3. –í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å
4. –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ Admin Dashboard
- ‚úÖ Sidebar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–°—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"
- ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã: –û–±–∑–æ—Ä, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –ü–æ–¥–ø–∏—Å–∫–∏, AI Analytics, PWA, –ù–∞—Å—Ç—Ä–æ–π–∫–∏

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
- –ù–µ—Ç –æ—à–∏–±–æ–∫ RLS policy
- Session —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage

---

#### 2.1.2. PWA Overview - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ PWA –º–µ—Ç—Ä–∏–∫

**–®–∞–≥–∏**:
1. –ö–ª–∏–∫–Ω—É—Ç—å "PWA" –≤ sidebar
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ—Ç–∫—Ä—ã–ª–∞—Å—å –≤–∫–ª–∞–¥–∫–∞ "Overview"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å 4 —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å "–î–∏–Ω–∞–º–∏–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–æ–∫"
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å "–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –°—Ç–∞—Ç—É—Å badge "–ê–∫—Ç–∏–≤–µ–Ω" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚úÖ "–í—Å–µ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–æ–∫" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –∏–∑ –ë–î
- ‚úÖ "Retention Rate" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç
- ‚úÖ "–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á–∏—Å–ª–æ –∑–∞ 7 –¥–Ω–µ–π
- ‚úÖ "Push –ø–æ–¥–ø–∏—Å–∫–∏" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –∏–∑ –ë–î
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ "–î–∏–Ω–∞–º–∏–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–æ–∫" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ 6 –º–µ—Å—è—Ü–µ–≤
- ‚úÖ 3 –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ë–î (–Ω–µ mock –¥–∞–Ω–Ω—ã–µ)
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ < 2 —Å–µ–∫—É–Ω–¥

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö**:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ UI –∏ –ë–î
SELECT 
  COUNT(DISTINCT user_id) FILTER (WHERE pwa_installed = true) as total_installs,
  COUNT(DISTINCT ps.user_id) as push_subscriptions
FROM profiles p
LEFT JOIN push_subscriptions ps ON p.id = ps.user_id;
```

---

#### 2.1.3. PWA Settings - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ PWA

**–®–∞–≥–∏**:
1. –ö–ª–∏–∫–Ω—É—Ç—å –≤–∫–ª–∞–¥–∫—É "Settings"
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (3 –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è)
3. –ò–∑–º–µ–Ω–∏—Ç—å "–ì–¥–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å" —Å "–¢–æ–ª—å–∫–æ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ" –Ω–∞ "–ù–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ –∏ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ"
4. –ò–∑–º–µ–Ω–∏—Ç—å "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–∑–∏—Ç–æ–≤" —Å 3 –Ω–∞ 5
5. –ù–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
6. –î–æ–∂–¥–∞—Ç—å—Å—è toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ PWA —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã! üì±"
7. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –í—Å–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ Select "–ö–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å" —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Input "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–∑–∏—Ç–æ–≤" —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Select "–ì–¥–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å" —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" –∞–∫—Ç–∏–≤–Ω–∞
- ‚úÖ Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- ‚úÖ –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –ù–µ—Ç –æ—à–∏–±–æ–∫ RLS policy
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ admin_settings —Ç–∞–±–ª–∏—Ü–µ
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö**:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
SELECT value->>'installPromptLocation' as location,
       value->>'installPromptVisitsCount' as visits_count
FROM admin_settings
WHERE key = 'pwa_settings';
```

---

#### 2.1.4. Push Notifications - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–®–∞–≥–∏**:
1. –ö–ª–∏–∫–Ω—É—Ç—å –≤–∫–ª–∞–¥–∫—É "Push Notifications"
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∫–ª–∞–¥–∫—É "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å VAPID Keys (Public/Private)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–í—Å–µ–≥–æ –ø–æ–¥–ø–∏—Å–æ–∫, –ê–∫—Ç–∏–≤–Ω—ã—Ö, –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ)
5. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:
   - –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ"
   - –¢–µ–∫—Å—Ç: "–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏"
   - –ò–∫–æ–Ω–∫–∞: "/icon-192.png"
6. –ù–∞–∂–∞—Ç—å "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º"
7. –î–æ–∂–¥–∞—Ç—å—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∫–ª–∞–¥–∫—É "–ò—Å—Ç–æ—Ä–∏—è"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ VAPID Keys –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (Public –≤–∏–¥–∏–º—ã–π, Private —Å–∫—Ä—ã—Ç—ã–π)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —á–∏—Å–ª–∞ –∏–∑ –ë–î
- ‚úÖ –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤—Å–µ–º –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å—å—é
- ‚úÖ Usage —Ç–∞–±–ª–∏—Ü–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å —Å–æ–±—ã—Ç–∏—è–º–∏ push_delivered

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –≤—Å–µ–º –∞–∫—Ç–∏–≤–Ω—ã–º –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö**:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
SELECT * FROM push_notifications_history
ORDER BY created_at DESC
LIMIT 1;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏
SELECT COUNT(*) as delivered_count
FROM usage
WHERE operation_type = 'push_delivered'
AND created_at > NOW() - INTERVAL '5 minutes';
```

---

#### 2.1.5. PWA Analytics - –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–®–∞–≥–∏**:
1. –ö–ª–∏–∫–Ω—É—Ç—å –≤–∫–ª–∞–¥–∫—É "Analytics"
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∫–ª–∞–¥–∫—É "Push Analytics"
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å 4 –≥–ª–∞–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ, –û—Ç–∫—Ä—ã—Ç–æ, CTR)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–µ—Ä–∏–æ–¥–∞ (7 –¥–Ω–µ–π, 30 –¥–Ω–µ–π, –í—Å–µ –≤—Ä–µ–º—è)
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–Ω—è–º"
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —á–∞—Å–∞–º"
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –±—Ä–∞—É–∑–µ—Ä–∞–º"
8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ 4 –º–µ—Ç—Ä–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ Delivery Rate –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ Open Rate –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–∫—Ä—ã—Ç–∏–π
- ‚úÖ CTR –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç click-through rate
- ‚úÖ –§–∏–ª—å—Ç—Ä –ø–µ—Ä–∏–æ–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ (–≤—Ä–µ–º–µ–Ω–Ω–æ –≤–º–µ—Å—Ç–æ –≥—Ä–∞—Ñ–∏–∫–æ–≤)
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ë–î
- –ú–µ—Ç—Ä–∏–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö**:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫
SELECT 
  COUNT(*) FILTER (WHERE operation_type = 'push_delivered') as delivered,
  COUNT(*) FILTER (WHERE operation_type = 'push_opened') as opened,
  ROUND(100.0 * COUNT(*) FILTER (WHERE operation_type = 'push_opened') / 
        NULLIF(COUNT(*) FILTER (WHERE operation_type = 'push_delivered'), 0), 1) as open_rate
FROM usage
WHERE operation_type IN ('push_delivered', 'push_opened')
AND created_at > NOW() - INTERVAL '7 days';
```

---

#### 2.1.6. PWA Cache - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Service Worker –∫—ç—à–µ–º

**–®–∞–≥–∏**:
1. –ö–ª–∏–∫–Ω—É—Ç—å –≤–∫–ª–∞–¥–∫—É "Cache"
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫—ç—à–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫—ç—à–µ–π
4. –ù–∞–∂–∞—Ç—å "–û–±–Ω–æ–≤–∏—Ç—å –∫—ç—à"
5. –ù–∞–∂–∞—Ç—å "–ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à"
6. –ù–∞–∂–∞—Ç—å "–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—ç—à–µ–π, –∑–∞–ø–∏—Å–µ–π, —Ä–∞–∑–º–µ—Ä
- ‚úÖ –°–ø–∏—Å–æ–∫ –∫—ç—à–µ–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å –∫—ç—à" —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫—ç—à" —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à" —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫—ç—à–µ–º –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π

---

#### 2.1.7. –í—ã—Ö–æ–¥ –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã—Ö–æ–¥

**–®–∞–≥–∏**:
1. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–í—ã—Ö–æ–¥" –≤ sidebar
2. –î–æ–∂–¥–∞—Ç—å—Å—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ Session –æ—á–∏—â–∞–µ—Ç—Å—è (signOut())
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
- ‚úÖ localStorage –æ—á–∏—â–∞–µ—Ç—Å—è
- ‚úÖ –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ /?view=admin —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å —Å–µ—Å—Å–∏–∏
- –ù–µ—Ç —É—Ç–µ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö –≤ localStorage

---

### –≠–¢–ê–ü 3: –°–¶–ï–ù–ê–†–ò–ô 2.2 - REGULAR USER WORKFLOW (2 —á–∞—Å–∞)

#### 2.2.1. –ü–µ—Ä–≤—ã–π –≤–∏–∑–∏—Ç - Onboarding
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PWA Install Prompt –Ω–∞ onboarding

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è**:
- –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω –Ω–∞—Å—Ç—Ä–æ–∏–ª –≤ PWA Settings:
  - `installPromptTiming`: "after_visits"
  - `installPromptVisitsCount`: 3
  - `installPromptLocation`: "onboarding"

**–®–∞–≥–∏**:
1. –û—Ç–∫—Ä—ã—Ç—å `https://unity-wine.vercel.app/` –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏–ª–∏ –≤–æ–π—Ç–∏ –∫–∞–∫ `rustam@leadshunter.biz`
3. –ü—Ä–æ–π—Ç–∏ onboarding (—à–∞–≥–∏ 1-4)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ Install Prompt

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç** (1-–π –≤–∏–∑–∏—Ç):
- ‚ùå Install Prompt –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è (–Ω—É–∂–Ω–æ 3 –≤–∏–∑–∏—Ç–∞)
- ‚úÖ Visit count —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ localStorage

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç** (3-–π –≤–∏–∑–∏—Ç):
- ‚úÖ Install Prompt –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ onboarding
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" –¥–æ—Å—Ç—É–ø–Ω–∞
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü–æ–∑–∂–µ" –¥–æ—Å—Ç—É–ø–Ω–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –õ–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á—ë—Ç–∞ –≤–∏–∑–∏—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Prompt –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –∞–¥–º–∏–Ω–∞

---

#### 2.2.2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PWA
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA

**–®–∞–≥–∏**:
1. –ö–ª–∏–∫–Ω—É—Ç—å "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å" –≤ Install Prompt
2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ PWA –ø–æ—è–≤–∏–ª–æ—Å—å –Ω–∞ –¥–æ–º–∞—à–Ω–µ–º —ç–∫—Ä–∞–Ω–µ / –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π –¥–∏–∞–ª–æ–≥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ standalone —Ä–µ–∂–∏–º–µ
- ‚úÖ –ò–∫–æ–Ω–∫–∞ PWA –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ "–î–Ω–µ–≤–Ω–∏–∫ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–π" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚úÖ –í –ë–î –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `profiles.pwa_installed = true`
- ‚úÖ –í usage —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ `pwa_installed`

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- PWA —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ standalone —Ä–µ–∂–∏–º–µ
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å –ë–î

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö**:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É PWA
SELECT id, email, pwa_installed
FROM profiles
WHERE email = 'rustam@leadshunter.biz';

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
SELECT * FROM usage
WHERE user_id = (SELECT id FROM profiles WHERE email = 'rustam@leadshunter.biz')
AND operation_type = 'pwa_installed'
ORDER BY created_at DESC
LIMIT 1;
```

---

#### 2.2.3. Push Notifications - –ü–æ–¥–ø–∏—Å–∫–∞
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–®–∞–≥–∏**:
1. –û—Ç–∫—Ä—ã—Ç—å PWA (standalone —Ä–µ–∂–∏–º)
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ù–∞—Å—Ç—Ä–æ–π–∫–∏
3. –ù–∞–π—Ç–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
4. –í–∫–ª—é—á–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ü–æ—Å–ª–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–æ–∑–¥–∞—ë—Ç—Å—è push subscription
- ‚úÖ –í –ë–î —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ push_subscriptions
- ‚úÖ –í usage —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ `push_subscribed`
- ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –æ—Å—Ç–∞—ë—Ç—Å—è –≤–∫–ª—é—á—ë–Ω–Ω—ã–º

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- Subscription —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
- Endpoint, p256dh, auth –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- Browser info —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö**:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
SELECT * FROM push_subscriptions
WHERE user_id = (SELECT id FROM profiles WHERE email = 'rustam@leadshunter.biz')
ORDER BY created_at DESC
LIMIT 1;
```

---

#### 2.2.4. –ü–æ–ª—É—á–µ–Ω–∏–µ Push Notification
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

**–ü—Ä–µ–¥—É—Å–ª–æ–≤–∏—è**:
- –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω –æ—Ç–ø—Ä–∞–≤–∏–ª push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (—Å–º. 2.1.4)

**–®–∞–≥–∏**:
1. –î–æ–∂–¥–∞—Ç—å—Å—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
3. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ PWA –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ (–¥–∞–∂–µ –µ—Å–ª–∏ PWA –∑–∞–∫—Ä—ã—Ç–æ)
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ò–∫–æ–Ω–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚úÖ –ü—Ä–∏ –∫–ª–∏–∫–µ PWA –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –í usage —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ `push_delivered`
- ‚úÖ –ü—Ä–∏ –∫–ª–∏–∫–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ `push_opened`

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ
- –ö–ª–∏–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç PWA
- –°–æ–±—ã—Ç–∏—è —Ç—Ä–µ–∫–∞—é—Ç—Å—è –≤ –ë–î

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö**:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–±—ã—Ç–∏—è
SELECT operation_type, COUNT(*)
FROM usage
WHERE user_id = (SELECT id FROM profiles WHERE email = 'rustam@leadshunter.biz')
AND operation_type IN ('push_delivered', 'push_opened', 'push_closed')
AND created_at > NOW() - INTERVAL '1 hour'
GROUP BY operation_type;
```

---

#### 2.2.5. Offline —Ä–µ–∂–∏–º
**–¶–µ–ª—å**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É PWA –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

**–®–∞–≥–∏**:
1. –û—Ç–∫—Ä—ã—Ç—å PWA
2. –û—Ç–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç (Airplane mode –∏–ª–∏ DevTools)
3. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
4. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å
5. –í–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- ‚úÖ PWA –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "Offline"
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ –ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –¥–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞**:
- Service Worker –∫—ç—à–∏—Ä—É–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- Offline UX –ø–æ–Ω—è—Ç–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### –≠–¢–ê–ü 4: –î–û–ö–£–ú–ï–ù–¢–ò–†–û–í–ê–ù–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–û–í (1 —á–∞—Å)

#### 4.1. –°–æ–∑–¥–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
- [ ] –°–æ–∑–¥–∞—Ç—å `docs/testing/PWA_TEST_SCENARIOS.md`
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —à–∞–≥–∏ –∏–∑ –ø–ª–∞–Ω–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å —á–µ–∫-–ª–∏—Å—Ç—ã –¥–ª—è QA

#### 4.2. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```markdown
| –°—Ü–µ–Ω–∞—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –í—Ä–µ–º—è | –ü—Ä–æ–±–ª–µ–º—ã |
|----------|--------|-------|----------|
| 2.1.1 Admin Login | ‚úÖ | 2 –º–∏–Ω | - |
| 2.1.2 PWA Overview | ‚úÖ | 5 –º–∏–Ω | - |
| ... | ... | ... | ... |
```

#### 4.3. –°–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
```markdown
## üêõ –ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### P0 - –ö—Ä–∏—Ç–∏—á–Ω–æ
1. [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã]
   - –®–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
   - –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
   - –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
   - –°–∫—Ä–∏–Ω—à–æ—Ç

### P1 - –í–∞–∂–Ω–æ
...
```

---

## üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ (Must Have):
- ‚úÖ –í—Å–µ —à–∞–≥–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è 2.1 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –±–µ–∑ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –í—Å–µ —à–∞–≥–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è 2.2 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –±–µ–∑ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ RLS policy
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ (Nice to Have):
- ‚úÖ –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ < 2 —Å–µ–∫—É–Ω–¥
- ‚úÖ PWA —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ iOS Safari (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
- ‚úÖ PWA —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Android Chrome
- ‚úÖ Offline —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üõ†Ô∏è –ò–ù–°–¢–†–£–ú–ï–ù–¢–´

### –ë—Ä–∞—É–∑–µ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- Chrome Desktop (–æ—Å–Ω–æ–≤–Ω–æ–π)
- Firefox Desktop
- Safari Desktop (macOS)
- Chrome Mobile (Android)
- Safari Mobile (iOS) - –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ

### DevTools:
- Chrome DevTools ‚Üí Application ‚Üí Service Workers
- Chrome DevTools ‚Üí Application ‚Üí Cache Storage
- Chrome DevTools ‚Üí Network ‚Üí Offline mode
- Chrome DevTools ‚Üí Console ‚Üí Errors

### SQL –∫–ª–∏–µ–Ω—Ç:
- Supabase Dashboard ‚Üí SQL Editor
- –ò–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π SQL –∫–ª–∏–µ–Ω—Ç

---

## ‚è±Ô∏è –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò

| –≠—Ç–∞–ø | –í—Ä–µ–º—è |
|------|-------|
| 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è | 30 –º–∏–Ω |
| 2. –°—Ü–µ–Ω–∞—Ä–∏–π 2.1 (Super-admin) | 2 —á–∞—Å–∞ |
| 3. –°—Ü–µ–Ω–∞—Ä–∏–π 2.2 (Regular user) | 2 —á–∞—Å–∞ |
| 4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 1 —á–∞—Å |
| **–ò–¢–û–ì–û** | **5.5 —á–∞—Å–æ–≤** |

---

## ‚úÖ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–î–æ–∂–¥–∞—Ç—å—Å—è –¥–µ–ø–ª–æ—è –Ω–∞ Vercel**
2. **–í—ã–ø–æ–ª–Ω–∏—Ç—å –≠–¢–ê–ü 1** (–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
3. **–í—ã–ø–æ–ª–Ω–∏—Ç—å –≠–¢–ê–ü 2** (–°—Ü–µ–Ω–∞—Ä–∏–π 2.1)
4. **–í—ã–ø–æ–ª–Ω–∏—Ç—å –≠–¢–ê–ü 3** (–°—Ü–µ–Ω–∞—Ä–∏–π 2.2)
5. **–í—ã–ø–æ–ª–Ω–∏—Ç—å –≠–¢–ê–ü 4** (–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
6. **–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á–∏** –¥–ª—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-10-23  
**–ê–≤—Ç–æ—Ä**: AI Assistant  
**–°—Ç–∞—Ç—É—Å**: üìã –ü–ª–∞–Ω –≥–æ—Ç–æ–≤ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é

